<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>pgRouting Concepts &#8212; pgRouting Manual (3.4-dev)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Function Families" href="routingFunctions.html" />
    <link rel="prev" title="Sample Data" href="sampledata.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/pgrouting.png"></span>
          pgRouting</a>
        <span class="navbar-text navbar-version pull-left"><b>v3.4.0-dev</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Sample Data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">pgRouting Concepts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="routingFunctions.html">Function Families</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="proposed.html">Proposed Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental.html">Experimental Functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migration guide</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">pgRouting Concepts</a><ul>
<li><a class="reference internal" href="#graphs">Graphs</a><ul>
<li><a class="reference internal" href="#graph-with-cost">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code></a></li>
<li><a class="reference internal" href="#graph-with-cost-and-reverse-cost">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphs-without-geometries">Graphs without geometries</a><ul>
<li><a class="reference internal" href="#wiki-example">Wiki example</a></li>
<li><a class="reference internal" href="#prepare-the-database">Prepare the database</a></li>
<li><a class="reference internal" href="#create-a-table">Create a table</a></li>
<li><a class="reference internal" href="#insert-the-data">Insert the data</a></li>
<li><a class="reference internal" href="#find-the-shortest-path">Find the shortest path</a></li>
<li><a class="reference internal" href="#create-a-topology">Create a topology</a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphs-with-geometries">Graphs with geometries</a><ul>
<li><a class="reference internal" href="#create-a-routing-database">Create a routing Database</a></li>
<li><a class="reference internal" href="#load-data">Load Data</a></li>
<li><a class="reference internal" href="#build-a-routing-topology">Build a routing topology</a><ul>
<li><a class="reference internal" href="#update-to-length-of-geometry">Update to length of geometry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-the-routing-topology">Check the Routing Topology</a><ul>
<li><a class="reference internal" href="#crossing-edges">Crossing edges</a><ul>
<li><a class="reference internal" href="#adding-split-edges">Adding split edges</a></li>
<li><a class="reference internal" href="#adding-new-vertices">Adding new vertices</a></li>
<li><a class="reference internal" href="#updating-edges-topology">Updating edges topology</a></li>
<li><a class="reference internal" href="#removing-the-surplus-edges">Removing the surplus edges</a></li>
<li><a class="reference internal" href="#updating-vertices-topology">Updating vertices topology</a></li>
<li><a class="reference internal" href="#checking-for-crossing-edges">Checking for crossing edges</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dead-ends-and-disconnected-graphs">Dead ends and disconnected graphs</a><ul>
<li><a class="reference internal" href="#prepare-storage-for-connection-information">Prepare storage for connection information</a></li>
<li><a class="reference internal" href="#save-the-vertices-connection-information">Save the vertices connection information</a></li>
<li><a class="reference internal" href="#save-the-edges-connection-information">Save the edges connection information</a></li>
<li><a class="reference internal" href="#get-the-closest-vertex">Get the closest vertex</a></li>
<li><a class="reference internal" href="#connecting-components">Connecting components</a></li>
<li><a class="reference internal" href="#checking-components">Checking components</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#compute-a-path">Compute a Path</a></li>
</ul>
</li>
<li><a class="reference internal" href="#group-of-functions">Group of Functions</a><ul>
<li><a class="reference internal" href="#one-to-one">One to One</a></li>
<li><a class="reference internal" href="#one-to-many">One to Many</a></li>
<li><a class="reference internal" href="#many-to-one">Many to One</a></li>
<li><a class="reference internal" href="#many-to-many">Many to Many</a></li>
<li><a class="reference internal" href="#combinations">Combinations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inner-queries">Inner Queries</a><ul>
<li><a class="reference internal" href="#edges-sql">Edges SQL</a><ul>
<li><a class="reference internal" href="#general">General</a></li>
<li><a class="reference internal" href="#general-without-id">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></li>
<li><a class="reference internal" href="#general-with-x-y">General with (X,Y)</a></li>
<li><a class="reference internal" href="#flow">Flow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#combinations-sql">Combinations SQL</a></li>
<li><a class="reference internal" href="#restrictions-sql">Restrictions SQL</a></li>
<li><a class="reference internal" href="#points-sql">Points SQL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters">Parameters</a><ul>
<li><a class="reference internal" href="#parameters-for-the-via-functions">Parameters for the Via functions</a></li>
<li><a class="reference internal" href="#for-the-trsp-functions">For the TRSP functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#return-columns">Return columns</a><ul>
<li><a class="reference internal" href="#return-columns-for-a-path">Return columns for a path</a></li>
<li><a class="reference internal" href="#multiple-paths">Multiple paths</a><ul>
<li><a class="reference internal" href="#selective-for-multiple-paths">Selective for multiple paths.</a></li>
<li><a class="reference internal" href="#non-selective-for-multiple-paths">Non selective for multiple paths</a></li>
</ul>
</li>
<li><a class="reference internal" href="#return-columns-for-cost-functions">Return columns for cost functions</a></li>
<li><a class="reference internal" href="#return-columns-for-flow-functions">Return columns for flow functions</a></li>
<li><a class="reference internal" href="#return-columns-for-spanning-tree-functions">Return columns for spanning tree functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-topics">Advanced Topics</a><ul>
<li><a class="reference internal" href="#routing-topology">Routing Topology</a></li>
<li><a class="reference internal" href="#graph-analytics">Graph Analytics</a></li>
<li><a class="reference internal" href="#analyze-a-graph">Analyze a Graph</a></li>
<li><a class="reference internal" href="#analyze-one-way-streets">Analyze One Way Streets</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#performance-tips">Performance Tips</a><ul>
<li><a class="reference internal" href="#for-the-routing-functions">For the Routing functions</a></li>
<li><a class="reference internal" href="#for-the-topology-functions">For the topology functions:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-contribute">How to contribute</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="sampledata.html" title="Previous Chapter: Sample Data"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Sample Data</span>
    </a>
  </li>
  <li>
    <a href="routingFunctions.html" title="Next Chapter: Function Families"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Function Families &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p><strong>Supported versions:</strong>
<a class="reference external" href="https://docs.pgrouting.org/latest/en/pgRouting-concepts.html">Latest</a>
(<a class="reference external" href="https://docs.pgrouting.org/3.4/en/pgRouting-concepts.html">3.4</a>)
<a class="reference external" href="https://docs.pgrouting.org/3.3/en/pgRouting-concepts.html">3.3</a>
<a class="reference external" href="https://docs.pgrouting.org/3.2/en/pgRouting-concepts.html">3.2</a>
<a class="reference external" href="https://docs.pgrouting.org/3.1/en/pgRouting-concepts.html">3.1</a>
<a class="reference external" href="https://docs.pgrouting.org/3.0/en/pgRouting-concepts.html">3.0</a></p></li>
<li><p><strong>Unsupported versions:</strong>
<a class="reference external" href="https://docs.pgrouting.org/2.6/en/pgRouting-concepts.html">2.6</a>
<a class="reference external" href="https://docs.pgrouting.org/2.5/en/pgRouting-concepts.html">2.5</a>
<a class="reference external" href="https://docs.pgrouting.org/2.4/en/pgRouting-concepts.html">2.4</a>
<a class="reference external" href="https://docs.pgrouting.org/2.3/en/doc/src/tutorial/index.html">2.3</a>
<a class="reference external" href="https://docs.pgrouting.org/2.2/en/doc/src/tutorial/index.html">2.2</a>
<a class="reference external" href="https://docs.pgrouting.org/2.1/en/doc/src/tutorial/index.html">2.1</a>
<a class="reference external" href="https://docs.pgrouting.org/2.0/en/doc/src/tutorial/index.html">2.0</a></p></li>
</ul>
<section id="pgrouting-concepts">
<h1><a class="toc-backref" href="#id6" role="doc-backlink">pgRouting Concepts</a><a class="headerlink" href="#pgrouting-concepts" title="Permalink to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pgrouting-concepts" id="id6">pgRouting Concepts</a></p>
<ul>
<li><p><a class="reference internal" href="#graphs" id="id7">Graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#graph-with-cost" id="id8">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code></a></p></li>
<li><p><a class="reference internal" href="#graph-with-cost-and-reverse-cost" id="id9">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-without-geometries" id="id10">Graphs without geometries</a></p>
<ul>
<li><p><a class="reference internal" href="#wiki-example" id="id11">Wiki example</a></p></li>
<li><p><a class="reference internal" href="#prepare-the-database" id="id12">Prepare the database</a></p></li>
<li><p><a class="reference internal" href="#create-a-table" id="id13">Create a table</a></p></li>
<li><p><a class="reference internal" href="#insert-the-data" id="id14">Insert the data</a></p></li>
<li><p><a class="reference internal" href="#find-the-shortest-path" id="id15">Find the shortest path</a></p></li>
<li><p><a class="reference internal" href="#create-a-topology" id="id16">Create a topology</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-with-geometries" id="id17">Graphs with geometries</a></p>
<ul>
<li><p><a class="reference internal" href="#create-a-routing-database" id="id18">Create a routing Database</a></p></li>
<li><p><a class="reference internal" href="#load-data" id="id19">Load Data</a></p></li>
<li><p><a class="reference internal" href="#build-a-routing-topology" id="id20">Build a routing topology</a></p>
<ul>
<li><p><a class="reference internal" href="#update-to-length-of-geometry" id="id21">Update to length of geometry</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#check-the-routing-topology" id="id22">Check the Routing Topology</a></p>
<ul>
<li><p><a class="reference internal" href="#crossing-edges" id="id23">Crossing edges</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-split-edges" id="id24">Adding split edges</a></p></li>
<li><p><a class="reference internal" href="#adding-new-vertices" id="id25">Adding new vertices</a></p></li>
<li><p><a class="reference internal" href="#updating-edges-topology" id="id26">Updating edges topology</a></p></li>
<li><p><a class="reference internal" href="#removing-the-surplus-edges" id="id27">Removing the surplus edges</a></p></li>
<li><p><a class="reference internal" href="#updating-vertices-topology" id="id28">Updating vertices topology</a></p></li>
<li><p><a class="reference internal" href="#checking-for-crossing-edges" id="id29">Checking for crossing edges</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dead-ends-and-disconnected-graphs" id="id30">Dead ends and disconnected graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#prepare-storage-for-connection-information" id="id31">Prepare storage for connection information</a></p></li>
<li><p><a class="reference internal" href="#save-the-vertices-connection-information" id="id32">Save the vertices connection information</a></p></li>
<li><p><a class="reference internal" href="#save-the-edges-connection-information" id="id33">Save the edges connection information</a></p></li>
<li><p><a class="reference internal" href="#get-the-closest-vertex" id="id34">Get the closest vertex</a></p></li>
<li><p><a class="reference internal" href="#connecting-components" id="id35">Connecting components</a></p></li>
<li><p><a class="reference internal" href="#checking-components" id="id36">Checking components</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#compute-a-path" id="id37">Compute a Path</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#group-of-functions" id="id38">Group of Functions</a></p>
<ul>
<li><p><a class="reference internal" href="#one-to-one" id="id39">One to One</a></p></li>
<li><p><a class="reference internal" href="#one-to-many" id="id40">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-one" id="id41">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many" id="id42">Many to Many</a></p></li>
<li><p><a class="reference internal" href="#combinations" id="id43">Combinations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inner-queries" id="id44">Inner Queries</a></p>
<ul>
<li><p><a class="reference internal" href="#edges-sql" id="id45">Edges SQL</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id46">General</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id47">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id48">General with (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id49">Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id50">Combinations SQL</a></p></li>
<li><p><a class="reference internal" href="#restrictions-sql" id="id51">Restrictions SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id52">Points SQL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id53">Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#parameters-for-the-via-functions" id="id54">Parameters for the Via functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-trsp-functions" id="id55">For the TRSP functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns" id="id56">Return columns</a></p>
<ul>
<li><p><a class="reference internal" href="#return-columns-for-a-path" id="id57">Return columns for a path</a></p></li>
<li><p><a class="reference internal" href="#multiple-paths" id="id58">Multiple paths</a></p>
<ul>
<li><p><a class="reference internal" href="#selective-for-multiple-paths" id="id59">Selective for multiple paths.</a></p></li>
<li><p><a class="reference internal" href="#non-selective-for-multiple-paths" id="id60">Non selective for multiple paths</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns-for-cost-functions" id="id61">Return columns for cost functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-flow-functions" id="id62">Return columns for flow functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-spanning-tree-functions" id="id63">Return columns for spanning tree functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-topics" id="id64">Advanced Topics</a></p>
<ul>
<li><p><a class="reference internal" href="#routing-topology" id="id65">Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#graph-analytics" id="id66">Graph Analytics</a></p></li>
<li><p><a class="reference internal" href="#analyze-a-graph" id="id67">Analyze a Graph</a></p></li>
<li><p><a class="reference internal" href="#analyze-one-way-streets" id="id68">Analyze One Way Streets</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id69">Example</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance-tips" id="id70">Performance Tips</a></p>
<ul>
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id71">For the Routing functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-topology-functions" id="id72">For the topology functions:</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-contribute" id="id73">How to contribute</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>This is a simple guide to walk you through the steps of getting started
with pgRouting. In this guide we will cover:</p>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#graphs" id="id74">Graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#graph-with-cost" id="id75">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code></a></p></li>
<li><p><a class="reference internal" href="#graph-with-cost-and-reverse-cost" id="id76">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-without-geometries" id="id77">Graphs without geometries</a></p>
<ul>
<li><p><a class="reference internal" href="#wiki-example" id="id78">Wiki example</a></p></li>
<li><p><a class="reference internal" href="#prepare-the-database" id="id79">Prepare the database</a></p></li>
<li><p><a class="reference internal" href="#create-a-table" id="id80">Create a table</a></p></li>
<li><p><a class="reference internal" href="#insert-the-data" id="id81">Insert the data</a></p></li>
<li><p><a class="reference internal" href="#find-the-shortest-path" id="id82">Find the shortest path</a></p></li>
<li><p><a class="reference internal" href="#create-a-topology" id="id83">Create a topology</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-with-geometries" id="id84">Graphs with geometries</a></p>
<ul>
<li><p><a class="reference internal" href="#create-a-routing-database" id="id85">Create a routing Database</a></p></li>
<li><p><a class="reference internal" href="#load-data" id="id86">Load Data</a></p></li>
<li><p><a class="reference internal" href="#build-a-routing-topology" id="id87">Build a routing topology</a></p>
<ul>
<li><p><a class="reference internal" href="#update-to-length-of-geometry" id="id88">Update to length of geometry</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#check-the-routing-topology" id="id89">Check the Routing Topology</a></p>
<ul>
<li><p><a class="reference internal" href="#crossing-edges" id="id90">Crossing edges</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-split-edges" id="id91">Adding split edges</a></p></li>
<li><p><a class="reference internal" href="#adding-new-vertices" id="id92">Adding new vertices</a></p></li>
<li><p><a class="reference internal" href="#updating-edges-topology" id="id93">Updating edges topology</a></p></li>
<li><p><a class="reference internal" href="#removing-the-surplus-edges" id="id94">Removing the surplus edges</a></p></li>
<li><p><a class="reference internal" href="#updating-vertices-topology" id="id95">Updating vertices topology</a></p></li>
<li><p><a class="reference internal" href="#checking-for-crossing-edges" id="id96">Checking for crossing edges</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dead-ends-and-disconnected-graphs" id="id97">Dead ends and disconnected graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#prepare-storage-for-connection-information" id="id98">Prepare storage for connection information</a></p></li>
<li><p><a class="reference internal" href="#save-the-vertices-connection-information" id="id99">Save the vertices connection information</a></p></li>
<li><p><a class="reference internal" href="#save-the-edges-connection-information" id="id100">Save the edges connection information</a></p></li>
<li><p><a class="reference internal" href="#get-the-closest-vertex" id="id101">Get the closest vertex</a></p></li>
<li><p><a class="reference internal" href="#connecting-components" id="id102">Connecting components</a></p></li>
<li><p><a class="reference internal" href="#checking-components" id="id103">Checking components</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#compute-a-path" id="id104">Compute a Path</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#group-of-functions" id="id105">Group of Functions</a></p>
<ul>
<li><p><a class="reference internal" href="#one-to-one" id="id106">One to One</a></p></li>
<li><p><a class="reference internal" href="#one-to-many" id="id107">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-one" id="id108">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many" id="id109">Many to Many</a></p></li>
<li><p><a class="reference internal" href="#combinations" id="id110">Combinations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inner-queries" id="id111">Inner Queries</a></p>
<ul>
<li><p><a class="reference internal" href="#edges-sql" id="id112">Edges SQL</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id113">General</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id114">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id115">General with (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id116">Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id117">Combinations SQL</a></p></li>
<li><p><a class="reference internal" href="#restrictions-sql" id="id118">Restrictions SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id119">Points SQL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id120">Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#parameters-for-the-via-functions" id="id121">Parameters for the Via functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-trsp-functions" id="id122">For the TRSP functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns" id="id123">Return columns</a></p>
<ul>
<li><p><a class="reference internal" href="#return-columns-for-a-path" id="id124">Return columns for a path</a></p></li>
<li><p><a class="reference internal" href="#multiple-paths" id="id125">Multiple paths</a></p>
<ul>
<li><p><a class="reference internal" href="#selective-for-multiple-paths" id="id126">Selective for multiple paths.</a></p></li>
<li><p><a class="reference internal" href="#non-selective-for-multiple-paths" id="id127">Non selective for multiple paths</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns-for-cost-functions" id="id128">Return columns for cost functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-flow-functions" id="id129">Return columns for flow functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-spanning-tree-functions" id="id130">Return columns for spanning tree functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-topics" id="id131">Advanced Topics</a></p>
<ul>
<li><p><a class="reference internal" href="#routing-topology" id="id132">Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#graph-analytics" id="id133">Graph Analytics</a></p></li>
<li><p><a class="reference internal" href="#analyze-a-graph" id="id134">Analyze a Graph</a></p></li>
<li><p><a class="reference internal" href="#analyze-one-way-streets" id="id135">Analyze One Way Streets</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id136">Example</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance-tips" id="id137">Performance Tips</a></p>
<ul>
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id138">For the Routing functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-topology-functions" id="id139">For the topology functions:</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-contribute" id="id140">How to contribute</a></p></li>
</ul>
</nav>
<section id="graphs">
<h2><a class="toc-backref" href="#id74" role="doc-backlink">Graphs</a><a class="headerlink" href="#graphs" title="Permalink to this heading">¶</a></h2>
<p>A graph is an ordered pair <span class="math notranslate nohighlight">\(G = (V ,E)\)</span> where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V\)</span> is a set of vertices, also called nodes</p></li>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid u , v \in V \}\)</span></p></li>
</ul>
<p>There are different kinds of graphs.</p>
<ul class="simple">
<li><p>Undirected simple graph</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid u , v \in V, u \neq v\}\)</span></p></li>
</ul>
</li>
<li><p>Directed graph</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid (u , v) \in (V X V) \}\)</span></p></li>
</ul>
</li>
<li><p>Directed simple graph</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid (u , v) \in (V X V), u \neq v\}\)</span></p></li>
</ul>
</li>
</ul>
<p>Graphs:</p>
<ul class="simple">
<li><p>Do not have geometries</p></li>
<li><p>Some graph theory problems requires graphs to have weights, called <strong>cost</strong> in
pgRouting.</p></li>
</ul>
<p>In pgRouting there are several ways to represent a graph on the database:</p>
<ul class="simple">
<li><p>With <code class="docutils literal notranslate"><span class="pre">cost</span></code></p>
<ul>
<li><p>(<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">cost</span></code>)</p></li>
</ul>
</li>
<li><p>With <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p>
<ul>
<li><p>(<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">cost</span></code>, <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>)</p></li>
</ul>
</li>
</ul>
<p>Where:</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p>Identifier of the edge. Requirement to use the database in a consistent
manner.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p>Identifier of a vertex</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p>Identifier of a vertex</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p>
<ul class="simple">
<li><p>When negative the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>) do not exist on the
graph</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) do not exist on the
graph</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The decision of the graph to be <strong>directed</strong> or <strong>undirected</strong> is done when
running a pgRouting algorithm.</p>
<section id="graph-with-cost">
<h3><a class="toc-backref" href="#id75" role="doc-backlink">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code></a><a class="headerlink" href="#graph-with-cost" title="Permalink to this heading">¶</a></h3>
<p>The weighted directed graph, <span class="math notranslate nohighlight">\(G_d(V,E)\)</span>, is interpreted as:</p>
<ul class="simple">
<li><p>the set of vertices  <span class="math notranslate nohighlight">\(V\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(V = source \cup target\)</span></p></li>
</ul>
</li>
<li><p>the set of edges <span class="math notranslate nohighlight">\(E\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E = \{(source_i, target_i, cost_i) \text{ when } cost_i &gt;=0 \}\)</span></p></li>
</ul>
</li>
</ul>
<p class="rubric">Directed graph</p>
<p>In a directed graph the edge <span class="math notranslate nohighlight">\((source_i, target_i, cost_i)\)</span> has
directionality: <span class="math notranslate nohighlight">\(source_i \rightarrow target_i\)</span></p>
<p>For the following data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span>
<span class="o">----+--------+--------+------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-fea3ff0c3c30969d4fcc1a5452438952118b0036.png" alt="digraph G {
 1 -&gt; 2 [label=&quot;  1(5)&quot;];
 3;
}" class="graphviz" /></div>
<p class="rubric">Undirected graph</p>
<p>In an undirected graph the edge <span class="math notranslate nohighlight">\((source_i, target_i, cost_i)\)</span> does not
have directionality: <span class="math notranslate nohighlight">\(source_i \; {\rule[0.5ex]{1em}{0.55pt}} \; target_i\)</span></p>
<ul class="simple">
<li><p>In terms of a directed graph is like having two edges: <span class="math notranslate nohighlight">\(source_i
\leftrightarrow target_i\)</span></p></li>
</ul>
<p>For the following data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span>
<span class="o">----+--------+--------+------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-15ad35e043b1329141358020162ef62da0f2d5e0.png" alt="graph G {
 1 -- 2 [label=&quot;  1(5)&quot;];
 3;
}" class="graphviz" /></div>
</section>
<section id="graph-with-cost-and-reverse-cost">
<h3><a class="toc-backref" href="#id76" role="doc-backlink">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></a><a class="headerlink" href="#graph-with-cost-and-reverse-cost" title="Permalink to this heading">¶</a></h3>
<p>The weighted directed graph, <span class="math notranslate nohighlight">\(G_d(V,E)\)</span>, is defined by:</p>
<ul class="simple">
<li><p>the set of vertices  <span class="math notranslate nohighlight">\(V\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(V = source \cup target\)</span></p></li>
</ul>
</li>
<li><p>the set of edges <span class="math notranslate nohighlight">\(E\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E = \begin{split} \begin{align}
&amp; {\{(source_i, target_i, cost_i) \text{ when } cost_i &gt;=0 \}} \\
&amp; \cup \\
&amp; {\{(target_i, source_i, reverse\_cost_i) \text{ when } reverse\_cost_i &gt;=0 \}}
\end{align} \end{split}\)</span></p></li>
</ul>
</li>
</ul>
<p class="rubric">Directed graph</p>
<p>In a directed graph both edges have directionality</p>
<ul class="simple">
<li><p>edge <span class="math notranslate nohighlight">\((source_i, target_i, cost_i)\)</span> has directionality: <span class="math notranslate nohighlight">\(source_i
\rightarrow target_i\)</span></p></li>
<li><p>edge <span class="math notranslate nohighlight">\((target_i, source_i, reverse\_cost_i)\)</span> has directionality:
<span class="math notranslate nohighlight">\(target_i \rightarrow source_i\)</span></p></li>
</ul>
<p>For the following data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">reverse_cost</span>
<span class="o">----+--------+--------+------+--------------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>            <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span> <span class="o">|</span>            <span class="mi">4</span>
  <span class="mi">3</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>           <span class="o">-</span><span class="mi">1</span>
<span class="p">(</span><span class="mi">3</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-30736f62adc8dbf11ad4115151b7af7577cda635.png" alt="digraph G {
 1 -&gt; 2 [label=&quot;  1(5)&quot;];
 2 -&gt; 1 [label=&quot;  1(2)&quot;];
 3 -&gt; 1 [label=&quot;  2(4)&quot;];
 2 -&gt; 3 [label=&quot;  3(7)&quot;];
}" class="graphviz" /></div>
<p class="rubric">Undirected graph</p>
<p>In a directed graph both edges do not have directionality</p>
<ul class="simple">
<li><p>Edge <span class="math notranslate nohighlight">\((source_i, target_i, cost_i)\)</span> is <span class="math notranslate nohighlight">\(source_i
\; {\rule[0.5ex]{1em}{0.55pt}} \; target_i\)</span></p></li>
<li><p>Edge <span class="math notranslate nohighlight">\((target_i, source_i, reverse\_cost_i)\)</span> is <span class="math notranslate nohighlight">\(target_i
\; {\rule[0.5ex]{1em}{0.55pt}} \; source_i\)</span></p></li>
<li><p>In terms of a directed graph is like having four edges:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(source_i \leftrightarrow target_i\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(target_i \leftrightarrow source_i\)</span></p></li>
</ul>
</li>
</ul>
<p>For the following data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">reverse_cost</span>
<span class="o">----+--------+--------+------+--------------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>            <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span> <span class="o">|</span>            <span class="mi">4</span>
  <span class="mi">3</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>           <span class="o">-</span><span class="mi">1</span>
<span class="p">(</span><span class="mi">3</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-d3e0d812756609c1050c29940fd38b77a9a039cd.png" alt="graph G {
 1 -- 2 [label=&quot;  1(5)&quot;];
 2 -- 1 [label=&quot;  1(2)&quot;];
 3 -- 1 [label=&quot;  2(4)&quot;];
 2 -- 3 [label=&quot;  3(7)&quot;];
}" class="graphviz" /></div>
</section>
</section>
<section id="graphs-without-geometries">
<h2><a class="toc-backref" href="#id77" role="doc-backlink">Graphs without geometries</a><a class="headerlink" href="#graphs-without-geometries" title="Permalink to this heading">¶</a></h2>
<p>Personal relationships, genealogy, file dependency problems can be solved
using pgRouting. Those problems, normally,  do not come with gemetries asociated
with the graph data.</p>
<section id="wiki-example">
<h3><a class="toc-backref" href="#id78" role="doc-backlink">Wiki example</a><a class="headerlink" href="#wiki-example" title="Permalink to this heading">¶</a></h3>
<p>Solve the example problem taken from wikipedia (<a class="reference external" href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">see top
right graph</a>) which:</p>
<ul class="simple">
<li><p>Problem find the shortest path from <span class="math notranslate nohighlight">\(1\)</span> to <span class="math notranslate nohighlight">\(5\)</span>.</p></li>
<li><p>Is an undirected graph.</p></li>
<li><p>Although visually looks like to have geometries, the drawing is not to scale.</p>
<ul>
<li><p>No geometries asociated to the vertices or edges</p></li>
</ul>
</li>
<li><p>Has 6 vertices :math`{1,2,3,4,5,6}’</p></li>
<li><p>Has 9 edges:</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\begin{split} \begin{align}
E = &amp; \{(1,2,7), (1,3,9), (1,6,14), \\
&amp; (2,3,10), (2,4,13), \\
&amp; (3,4,11), (3,6,2), \\
&amp; (4,5,6), \\
&amp; (5,6,9) \}
\end{align} \end{split}\)</span></p>
<ul class="simple">
<li><p>The graph can be represented in many ways for example:</p></li>
</ul>
<div class="graphviz"><img src="_images/graphviz-f7be590ac01a366380dea45ade8a60068b4b9db9.png" alt="graph G {
 rankdir=&quot;LR&quot;;
 1 [color=&quot;red&quot;];
 5 [color=&quot;green&quot;];
 1 -- 2 [label=&quot;  (7)&quot;];
 5 -- 6 [label=&quot;  (9)&quot;];
 1 -- 3 [label=&quot;  (9)&quot;];
 1 -- 6 [label=&quot;  (14)&quot;];
 2 -- 3 [label=&quot;  (10)&quot;];
 2 -- 4 [label=&quot;  (13)&quot;];
 3 -- 4 [label=&quot;  (11)&quot;];
 3 -- 6 [label=&quot;  (2)&quot;];
 4 -- 5 [label=&quot;  (6)&quot;];
}" class="graphviz" /></div>
</section>
<section id="prepare-the-database">
<h3><a class="toc-backref" href="#id79" role="doc-backlink">Prepare the database</a><a class="headerlink" href="#prepare-the-database" title="Permalink to this heading">¶</a></h3>
<p>Create a database for the example, access the database and install pgRouting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ createdb wiki
$ psql wiki
wiki =# CREATE EXTENSION pgRouting CASCADE;
</pre></div>
</div>
</section>
<section id="create-a-table">
<h3><a class="toc-backref" href="#id80" role="doc-backlink">Create a table</a><a class="headerlink" href="#create-a-table" title="Permalink to this heading">¶</a></h3>
<p>The basic elements needed to perform basic routing on an undirected graph are:</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p>SMALLINT, INTEGER, BIGINT</p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p>SMALLINT, INTEGER, BIGINT, REAL, FLOAT</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">wiki</span> <span class="p">(</span>
  <span class="nb">id</span> <span class="n">SERIAL</span><span class="p">,</span>
  <span class="n">source</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="n">target</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="n">cost</span> <span class="n">INTEGER</span><span class="p">);</span>
<span class="n">CREATE</span> <span class="n">TABLE</span>
</pre></div>
</div>
</section>
<section id="insert-the-data">
<h3><a class="toc-backref" href="#id81" role="doc-backlink">Insert the data</a><a class="headerlink" href="#insert-the-data" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">wiki</span> <span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span> <span class="n">VALUES</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">9</span>
</pre></div>
</div>
</section>
<section id="find-the-shortest-path">
<h3><a class="toc-backref" href="#id82" role="doc-backlink">Find the shortest path</a><a class="headerlink" href="#find-the-shortest-path" title="Permalink to this heading">¶</a></h3>
<p>To solve this example <a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a> is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost FROM wiki&#39;</span><span class="p">,</span>
  <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----+----------+------+------+------+----------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>        <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>    <span class="mi">6</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>        <span class="mi">9</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>    <span class="mi">6</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>       <span class="mi">11</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span> <span class="o">|</span>       <span class="mi">20</span>
<span class="p">(</span><span class="mi">4</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>To go from <span class="math notranslate nohighlight">\(1\)</span> to <span class="math notranslate nohighlight">\(5\)</span> the path goes thru the following vertices:
<span class="math notranslate nohighlight">\(1 \rightarrow 3 \rightarrow 6 \rightarrow 5\)</span></p>
<div class="graphviz"><img src="_images/graphviz-5ad5eec8c89b5f62e851c73f0c5ed9e9286be10c.png" alt="graph G {
 rankdir=&quot;LR&quot;;
 1 [color=&quot;red&quot;];
 5 [color=&quot;green&quot;];
 1 -- 2 [label=&quot;  (7)&quot;];
 5 -- 6 [label=&quot;  (9)&quot;, color=&quot;blue&quot;];
 1 -- 3 [label=&quot;  (9)&quot;, color=&quot;blue&quot;];
 1 -- 6 [label=&quot;  (14)&quot;];
 2 -- 3 [label=&quot;  (10)&quot;];
 2 -- 4 [label=&quot;  (13)&quot;];
 3 -- 4 [label=&quot;  (11)&quot;];
 3 -- 6 [label=&quot;  (2)&quot;, color=&quot;blue&quot;];
 4 -- 5 [label=&quot;  (6)&quot;];
}" class="graphviz" /></div>
</section>
<section id="create-a-topology">
<h3><a class="toc-backref" href="#id83" role="doc-backlink">Create a topology</a><a class="headerlink" href="#create-a-topology" title="Permalink to this heading">¶</a></h3>
<p>For more complex functions a complete topology might be needed.</p>
<p>To create the vertices table, use <a class="reference internal" href="pgr_extractVertices.html"><span class="doc">pgr_extractVertices – Proposed</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="n">FROM</span> <span class="n">wiki</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span>
<span class="o">----+--------+--------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span>
  <span class="mi">3</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">6</span>
  <span class="mi">4</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">3</span>
  <span class="mi">5</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">4</span>
  <span class="mi">6</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>      <span class="mi">6</span>
  <span class="mi">7</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>      <span class="mi">4</span>
  <span class="mi">8</span> <span class="o">|</span>      <span class="mi">4</span> <span class="o">|</span>      <span class="mi">5</span>
  <span class="mi">9</span> <span class="o">|</span>      <span class="mi">5</span> <span class="o">|</span>      <span class="mi">6</span>
<span class="p">(</span><span class="mi">9</span> <span class="n">rows</span><span class="p">)</span>

<span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span>
<span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, source, target FROM wiki&#39;</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">in_edges</span> <span class="o">|</span> <span class="n">out_edges</span>
<span class="o">----+----------+-----------</span>
  <span class="mi">3</span> <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>    <span class="o">|</span> <span class="p">{</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">}</span>
  <span class="mi">5</span> <span class="o">|</span> <span class="p">{</span><span class="mi">8</span><span class="p">}</span>      <span class="o">|</span> <span class="p">{</span><span class="mi">9</span><span class="p">}</span>
  <span class="mi">4</span> <span class="o">|</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">}</span>    <span class="o">|</span> <span class="p">{</span><span class="mi">8</span><span class="p">}</span>
  <span class="mi">2</span> <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">}</span>      <span class="o">|</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>
  <span class="mi">1</span> <span class="o">|</span>          <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
  <span class="mi">6</span> <span class="o">|</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">}</span>  <span class="o">|</span>
<span class="p">(</span><span class="mi">6</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
<section id="graphs-with-geometries">
<h2><a class="toc-backref" href="#id84" role="doc-backlink">Graphs with geometries</a><a class="headerlink" href="#graphs-with-geometries" title="Permalink to this heading">¶</a></h2>
<section id="create-a-routing-database">
<h3><a class="toc-backref" href="#id85" role="doc-backlink">Create a routing Database</a><a class="headerlink" href="#create-a-routing-database" title="Permalink to this heading">¶</a></h3>
<p>The first step is to create a database and load pgRouting in the database.</p>
<p>Typically create a database for each project.</p>
<p>Once having the database to work in, load your data and build the routing
application in that database.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">createdb</span> <span class="n">sampledata</span>
<span class="n">psql</span> <span class="n">sampledata</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;CREATE EXTENSION postgis CASCADE&quot;</span>
</pre></div>
</div>
</section>
<section id="load-data">
<h3><a class="toc-backref" href="#id86" role="doc-backlink">Load Data</a><a class="headerlink" href="#load-data" title="Permalink to this heading">¶</a></h3>
<p>There are several ways to load your data into pgRouting.</p>
<ul class="simple">
<li><p>Manually creating a database.</p>
<ul>
<li><p><a class="reference internal" href="#graphs-without-geometries">Graphs without geometries</a></p></li>
<li><p><a class="reference internal" href="sampledata.html"><span class="doc">Sample Data</span></a>: a small graph used on the documentation examples</p></li>
</ul>
</li>
<li><p>Using <a class="reference external" href="https://workshop.pgrouting.org/latest/en/basic/data.html">osm2pgrouting</a></p></li>
</ul>
<p>There are various open source tools that can help, like:</p>
<dl class="field-list simple">
<dt class="field-odd">shp2pgsql<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>postgresql shapefile loader</p></li>
</ul>
</dd>
<dt class="field-even">ogr2ogr<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>vector data conversion utility</p></li>
</ul>
</dd>
<dt class="field-odd">osm2pgsql<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>loadg OSM data into postgresql</p></li>
</ul>
</dd>
</dl>
<p>Please note that these tools will <strong>not</strong> import the data in a structure
compatible with pgRouting and when this happens the topology needs to be
adajusted.</p>
<ul class="simple">
<li><p>Breakup a segments on each segment-segment instersection</p></li>
<li><p>When missing, add columns and assign values to <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>,
<code class="docutils literal notranslate"><span class="pre">cost</span></code>, <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>.</p></li>
<li><p>Connect a disconnected graph.</p></li>
<li><p>Create the complete graph topology</p></li>
<li><p>Create one or more graphs based on the application to be developed.</p>
<ul>
<li><p>Create a contracted graph for the high speed roads</p></li>
<li><p>Create graphs per state/country</p></li>
</ul>
</li>
</ul>
<p>In few words:</p>
<blockquote>
<div><p>Prepare the graph</p>
</div></blockquote>
<p>What and how to prepare the graph, will depend on the application and/or on the
quality of the data and/or on how close the information is to have a topology
usable by pgRouting and/or some other factors not mentioned.</p>
<p>The steps to prepare the graph involve geometry operations using <a class="reference external" href="https://postgis.net/">PostGIS</a> and some others involve graph operations like
<a class="reference internal" href="pgr_contraction.html"><span class="doc">pgr_contraction</span></a> to contract a graph.</p>
<p>The <a class="reference external" href="https://workshop.pgrouting.org/latest">workshop</a> has a step by step on
how to prepare a graph using Open Street Map data, for a small application.</p>
<p>The use of indexes on the database design in general:</p>
<ul class="simple">
<li><p>Have the geometries indexed.</p></li>
<li><p>Have the identifiers columns indexed.</p></li>
</ul>
<p>Please consult the <a class="reference external" href="https://www.postgresql.org/docs/">PostgreSQL</a> documentation
and the <a class="reference external" href="https://postgis.net/">PostGIS</a> documentation.</p>
</section>
<section id="build-a-routing-topology">
<h3><a class="toc-backref" href="#id87" role="doc-backlink">Build a routing topology</a><a class="headerlink" href="#build-a-routing-topology" title="Permalink to this heading">¶</a></h3>
<p>The basic information to use the majority of the pgRouting functions <code class="docutils literal notranslate"><span class="pre">id,</span>
<span class="pre">source,</span> <span class="pre">target,</span> <span class="pre">cost,</span> <span class="pre">[reverse_cost]</span></code> is what in pgRouting is called the
routing topology.</p>
<p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> is optional but strongly recomended to have in order to reduce
the size of the database due to the size of the geometry columns.
Having said that, in this documentation <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> is used in this
documentation.</p>
<p>When the data comes with geometries and there is no routing topology, then this
step is needed.</p>
<p>All the start and end vertices of the geometries need an identifier that is to
be stored in a <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">target</span></code> columns of the table of the data.
Likewise, <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> need to have the value of traversing the
edge in both directions.</p>
<p>If the columns do not exist they need to be added to the table in question. (see
<a class="reference external" href="https://www.postgresql.org/docs/current/sql-altertable.html">ALTER TABLE</a></p>
<p>The function <a class="reference internal" href="pgr_extractVertices.html"><span class="doc">pgr_extractVertices – Proposed</span></a> is used to create a vertices table
based on the edge identifier and the geometry of the edge of the graph.</p>
<p>Finnaly using the data stored on the vertices tables the <code class="docutils literal notranslate"><span class="pre">source</span></code> and
<code class="docutils literal notranslate"><span class="pre">target</span></code> are filled up.</p>
<p>See <a class="reference internal" href="sampledata.html"><span class="doc">Sample Data</span></a> for an example for building the topology.</p>
<p>Data coming from OSM and using <a class="reference external" href="https://github.com/pgRouting/osm2pgrouting">osm2pgrouting</a> as an import tool, comes with
the routing topology. See an example of using <code class="docutils literal notranslate"><span class="pre">osm2pgrouting</span></code> on the <a class="reference external" href="https://workshop.pgrouting.org/latest/en/basic/data.html">workshop</a>.</p>
<section id="update-to-length-of-geometry">
<h4><a class="toc-backref" href="#id88" role="doc-backlink">Update to length of geometry</a><a class="headerlink" href="#update-to-length-of-geometry" title="Permalink to this heading">¶</a></h4>
<p>The cost and reverse cost values can be in terms of the length of the geometry.
Assume that the <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> columns in the sample data
represent:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(1\)</span> when the edge exists in the graph</p></li>
<li><p><span class="math notranslate nohighlight">\(-1\)</span> when the edge does not exist in the graph</p></li>
</ul>
<p>Using that information updating to the length of the geometries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">geom</span><span class="p">),</span>
<span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">reverse_cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">geom</span><span class="p">);</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
<p>Which gives the following results</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span> <span class="n">FROM</span> <span class="n">edges</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span>        <span class="n">cost</span>        <span class="o">|</span>    <span class="n">reverse_cost</span>
<span class="o">----+--------------------+--------------------</span>
  <span class="mi">6</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">7</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">4</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">5</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
  <span class="mi">8</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
 <span class="mi">12</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">11</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">10</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
 <span class="mi">17</span> <span class="o">|</span>     <span class="mf">1.499999999999</span> <span class="o">|</span>     <span class="mf">1.499999999999</span>
 <span class="mi">14</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
 <span class="mi">18</span> <span class="o">|</span> <span class="mf">1.7000000000000002</span> <span class="o">|</span> <span class="mf">1.7000000000000002</span>
 <span class="mi">13</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">15</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
 <span class="mi">16</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">9</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">3</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Note that to be able to follow the documentation examples, everything is based
on the original graph.</p>
<p>So fixing to what there was before:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span>
<span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">reverse_cost</span><span class="p">);</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
</section>
</section>
<section id="check-the-routing-topology">
<h3><a class="toc-backref" href="#id89" role="doc-backlink">Check the Routing Topology</a><a class="headerlink" href="#check-the-routing-topology" title="Permalink to this heading">¶</a></h3>
<p>There are lots of possible problems in a graph.</p>
<ul class="simple">
<li><p>The data used may not have been designed with routing in mind.</p></li>
<li><p>A graph has some very specific requirements.</p></li>
<li><p>The graph is disconnected.</p></li>
<li><p>There are unwanted intersections.</p></li>
<li><p>The graph is too large and needs to be contracted.</p></li>
<li><p>A subgraph is needed for the application.</p></li>
<li><p>and many other problems that the pgRouting user, that is the application
developer might encounter.</p></li>
</ul>
<section id="crossing-edges">
<h4><a class="toc-backref" href="#id90" role="doc-backlink">Crossing edges</a><a class="headerlink" href="#crossing-edges" title="Permalink to this heading">¶</a></h4>
<p>To get the crossing edges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">&lt;</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">st_crosses</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="nb">id</span>
<span class="o">----+----</span>
 <span class="mi">13</span> <span class="o">|</span> <span class="mi">18</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
<figure class="align-default">
<img alt="_images/crossing_edges.png" src="_images/crossing_edges.png" />
</figure>
<p>That information is correct, for example, when in terms of vehicles, is it a
tunnel or bride crossing over another road.</p>
<p>It might be incorrect, for example:</p>
<ol class="arabic simple">
<li><p>When it is actually an intersection of roads, where vehicles can make turns.</p></li>
<li><p>When in terms of electrical lines, the electrical line is able to swith roads
even on a tunnel or bridge.</p></li>
</ol>
<p>When it is incorrect, it needs fixing:</p>
<ol class="arabic simple">
<li><p>For vehicles and pedestrians</p>
<ul class="simple">
<li><p>If the data comes from OSM and was imported to the database using
<code class="docutils literal notranslate"><span class="pre">osm2pgrouting</span></code>, the fix needs to be done in the <a class="reference external" href="https://www.openstreetmap.org">OSM portal</a> and the data imported again.</p></li>
<li><p>In general when the data comes from a supplier that has the data prepared
for routing vehicles, and there is a problem, the data is to be fixed from
the supplier</p></li>
</ul>
</li>
<li><p>For very specific applications</p>
<ul class="simple">
<li><p>The data is correct when from the point of view of routing vehicles or
pedestrians.</p></li>
<li><p>The data needs a local fix for the specific application.</p></li>
</ul>
</li>
</ol>
<p>Once analized one by one the crossings, for the ones that need a local fix,
the edges need to be <a class="reference external" href="https://postgis.net/docs/ST_Split.html">split</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">ST_AsText</span><span class="p">((</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">13</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">18</span>
<span class="n">UNION</span>
<span class="n">SELECT</span> <span class="n">ST_AsText</span><span class="p">((</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">13</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>
         <span class="n">st_astext</span>
<span class="o">---------------------------</span>
 <span class="n">LINESTRING</span><span class="p">(</span><span class="mf">3.5</span> <span class="mf">2.3</span><span class="p">,</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">)</span>
 <span class="n">LINESTRING</span><span class="p">(</span><span class="mi">3</span> <span class="mi">3</span><span class="p">,</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">)</span>
 <span class="n">LINESTRING</span><span class="p">(</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">,</span><span class="mi">4</span> <span class="mi">3</span><span class="p">)</span>
 <span class="n">LINESTRING</span><span class="p">(</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">,</span><span class="mf">3.5</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="mi">4</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>The new edges need to be added to the edges table, the rest of the attributes
need to be updated in the new edges, the old edges need to be
removed and the routing topology needs to be updated.</p>
<section id="adding-split-edges">
<h5><a class="toc-backref" href="#id91" role="doc-backlink">Adding split edges</a><a class="headerlink" href="#adding-split-edges" title="Permalink to this heading">¶</a></h5>
<p>For each pair of crossing edges a process similar to this one must be performed.</p>
<p>The columns inserted and the way are calculated are based on the application.
For example, if the edges have a trait <strong>name</strong>, then that column is to be
copied.</p>
<p>For pgRouting calculations</p>
<ul class="simple">
<li><p><strong>factor</strong> based on the position of the intersection of the edges can be used
to adjust the <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> columns.</p></li>
<li><p>Capacity information, used on the <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a> functions does not need
to change when spliting edges.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WITH</span>
<span class="n">first_edge</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">ST_LineLocatePoint</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span><span class="n">ST_Intersection</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">))</span> <span class="n">AS</span> <span class="n">factor</span>
  <span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
  <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">13</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">18</span><span class="p">),</span>
<span class="n">first_segments</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">path</span><span class="p">,</span> <span class="n">first_edge</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">capacity</span><span class="p">,</span> <span class="n">reverse_capacity</span><span class="p">,</span>
    <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">path</span><span class="o">=</span><span class="mi">1</span> <span class="n">THEN</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">cost</span>
         <span class="n">ELSE</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost</span> <span class="n">END</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
    <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">path</span><span class="o">=</span><span class="mi">1</span> <span class="n">THEN</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">reverse_cost</span>
         <span class="n">ELSE</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)</span> <span class="o">*</span> <span class="n">reverse_cost</span> <span class="n">END</span> <span class="n">AS</span> <span class="n">reverse_cost</span>
  <span class="n">FROM</span> <span class="n">first_edge</span> <span class="p">,</span> <span class="n">edges</span> <span class="n">WHERE</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">13</span><span class="p">),</span>
<span class="n">second_edge</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">ST_LineLocatePoint</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span><span class="n">ST_Intersection</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">))</span> <span class="n">AS</span> <span class="n">factor</span>
  <span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
  <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">13</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">18</span><span class="p">),</span>
<span class="n">second_segments</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">path</span><span class="p">,</span> <span class="n">second_edge</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">capacity</span><span class="p">,</span> <span class="n">reverse_capacity</span><span class="p">,</span>
    <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">path</span><span class="o">=</span><span class="mi">1</span> <span class="n">THEN</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">cost</span>
         <span class="n">ELSE</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost</span> <span class="n">END</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
    <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">path</span><span class="o">=</span><span class="mi">1</span> <span class="n">THEN</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">reverse_cost</span>
         <span class="n">ELSE</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)</span> <span class="o">*</span> <span class="n">reverse_cost</span> <span class="n">END</span> <span class="n">AS</span> <span class="n">reverse_cost</span>
  <span class="n">FROM</span> <span class="n">second_edge</span> <span class="p">,</span> <span class="n">edges</span> <span class="n">WHERE</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">18</span><span class="p">),</span>
<span class="n">all_segments</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">first_segments</span>
  <span class="n">UNION</span>
  <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">second_segments</span><span class="p">)</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">edges</span>
  <span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">reverse_capacity</span><span class="p">,</span>
    <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">,</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span>
    <span class="n">geom</span><span class="p">)</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">reverse_capacity</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">,</span>
  <span class="n">ST_X</span><span class="p">(</span><span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)),</span> <span class="n">ST_Y</span><span class="p">(</span><span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)),</span>
  <span class="n">ST_X</span><span class="p">(</span><span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)),</span> <span class="n">ST_Y</span><span class="p">(</span><span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)),</span>
  <span class="n">geom</span>
  <span class="n">FROM</span> <span class="n">all_segments</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">4</span>
</pre></div>
</div>
</section>
<section id="adding-new-vertices">
<h5><a class="toc-backref" href="#id92" role="doc-backlink">Adding new vertices</a><a class="headerlink" href="#adding-new-vertices" title="Permalink to this heading">¶</a></h5>
<p>After adding all the split edges requiered by the application, the newly created
vertices need to be added to the vertices table.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">vertices</span> <span class="p">(</span><span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">geom</span><span class="p">)</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="n">nv</span><span class="o">.</span><span class="n">in_edges</span><span class="p">,</span> <span class="n">nv</span><span class="o">.</span><span class="n">out_edges</span><span class="p">,</span> <span class="n">nv</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">nv</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">nv</span><span class="o">.</span><span class="n">geom</span>
<span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges&#39;</span><span class="p">)</span> <span class="n">AS</span> <span class="n">nv</span>
<span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span> <span class="n">USING</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span> <span class="n">WHERE</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span> <span class="n">IS</span> <span class="n">NULL</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="updating-edges-topology">
<h5><a class="toc-backref" href="#id93" role="doc-backlink">Updating edges topology</a><a class="headerlink" href="#updating-edges-topology" title="Permalink to this heading">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">source</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">source</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">source</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">4</span>
<span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">target</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">target</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">target</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">4</span>
</pre></div>
</div>
</section>
<section id="removing-the-surplus-edges">
<h5><a class="toc-backref" href="#id94" role="doc-backlink">Removing the surplus edges</a><a class="headerlink" href="#removing-the-surplus-edges" title="Permalink to this heading">¶</a></h5>
<p>Once all significant information needed by the application has been transported
to the new edges, then the crossing edges can be deleted.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">edges</span> <span class="n">WHERE</span> <span class="nb">id</span> <span class="n">IN</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
<span class="n">DELETE</span> <span class="mi">2</span>
</pre></div>
</div>
<p>There are other options to do this task, like creating a view, or a materialized
view.</p>
</section>
<section id="updating-vertices-topology">
<h5><a class="toc-backref" href="#id95" role="doc-backlink">Updating vertices topology</a><a class="headerlink" href="#updating-vertices-topology" title="Permalink to this heading">¶</a></h5>
<p>To keep the graph consistent, the vertices topology needs to be updated</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span> <span class="n">SET</span>
<span class="n">in_edges</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">out_edges</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges&#39;</span><span class="p">))</span> <span class="n">AS</span> <span class="n">nv</span>
<span class="n">WHERE</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
</section>
<section id="checking-for-crossing-edges">
<h5><a class="toc-backref" href="#id96" role="doc-backlink">Checking for crossing edges</a><a class="headerlink" href="#checking-for-crossing-edges" title="Permalink to this heading">¶</a></h5>
<p>There are no crossing edges on the graph.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">&lt;</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">st_crosses</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="nb">id</span>
<span class="o">----+----</span>
<span class="p">(</span><span class="mi">0</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
<section id="dead-ends-and-disconnected-graphs">
<h4><a class="toc-backref" href="#id97" role="doc-backlink">Dead ends and disconnected graphs</a><a class="headerlink" href="#dead-ends-and-disconnected-graphs" title="Permalink to this heading">¶</a></h4>
<p>To get the dead ends:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span> <span class="n">FROM</span> <span class="n">vertices</span>
<span class="n">WHERE</span> <span class="n">array_length</span><span class="p">(</span><span class="n">in_edges</span> <span class="o">||</span> <span class="n">out_edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 <span class="nb">id</span>
<span class="o">----</span>
  <span class="mi">1</span>
  <span class="mi">2</span>
  <span class="mi">4</span>
  <span class="mi">5</span>
  <span class="mi">9</span>
 <span class="mi">13</span>
 <span class="mi">14</span>
<span class="p">(</span><span class="mi">7</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>That information is correct, for example, when the dead end is on the limit of
the imported graph.</p>
<p>Visually node <span class="math notranslate nohighlight">\(4\)</span> looks to be as start/ending of 3 edges, but it is not.</p>
<p>Is that correct?</p>
<ul class="simple">
<li><p>Is there such a small curb:</p>
<ul>
<li><p>That does not allow a vehicle to use that visual intersection?</p></li>
<li><p>Is the applicaction for pedestrians and therefore the pedestrican can easily
walk on the small curb?</p></li>
<li><p>Is the application for the electicicity and the electrical lines than can
easily be extended on top of the small curb?</p></li>
</ul>
</li>
<li><p>Is there a big cliff and from eagles view look like the dead end is close to
the segment?</p></li>
</ul>
<p>To get the graph connectivity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">component</span> <span class="o">|</span> <span class="n">node</span>
<span class="o">-----+-----------+------</span>
   <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">3</span>
   <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">5</span>
   <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span>
   <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">7</span>
   <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">8</span>
   <span class="mi">7</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">9</span>
   <span class="mi">8</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">10</span>
   <span class="mi">9</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">11</span>
  <span class="mi">10</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">12</span>
  <span class="mi">11</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">13</span>
  <span class="mi">12</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">14</span>
  <span class="mi">13</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">15</span>
  <span class="mi">14</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">16</span>
  <span class="mi">15</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">17</span>
  <span class="mi">16</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">18</span>
  <span class="mi">17</span> <span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span>    <span class="mi">2</span>
  <span class="mi">18</span> <span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span>    <span class="mi">4</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>In this example, the component <span class="math notranslate nohighlight">\(2\)</span> consists of vertices <span class="math notranslate nohighlight">\(\{2, 4\}\)</span>
and both vertices are also part of the dead end result set.</p>
<p>This graph needs to be connected.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With the original graph of this documentation, there would be 3 components as
the crossing edge in this graph is a different component.</p>
</div>
<section id="prepare-storage-for-connection-information">
<h5><a class="toc-backref" href="#id98" role="doc-backlink">Prepare storage for connection information</a><a class="headerlink" href="#prepare-storage-for-connection-information" title="Permalink to this heading">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">vertices</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">component</span> <span class="n">BIGINT</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edges</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">component</span> <span class="n">BIGINT</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
</pre></div>
</div>
</section>
<section id="save-the-vertices-connection-information">
<h5><a class="toc-backref" href="#id99" role="doc-backlink">Save the vertices connection information</a><a class="headerlink" href="#save-the-vertices-connection-information" title="Permalink to this heading">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">vertices</span> <span class="n">SET</span> <span class="n">component</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">component</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">))</span> <span class="n">AS</span> <span class="n">c</span>
<span class="n">WHERE</span> <span class="nb">id</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
</section>
<section id="save-the-edges-connection-information">
<h5><a class="toc-backref" href="#id100" role="doc-backlink">Save the edges connection information</a><a class="headerlink" href="#save-the-edges-connection-information" title="Permalink to this heading">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span> <span class="n">component</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">component</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">component</span> <span class="n">FROM</span> <span class="n">vertices</span><span class="p">)</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">source</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">20</span>
</pre></div>
</div>
</section>
<section id="get-the-closest-vertex">
<h5><a class="toc-backref" href="#id101" role="doc-backlink">Get the closest vertex</a><a class="headerlink" href="#get-the-closest-vertex" title="Permalink to this heading">¶</a></h5>
<p>Using <a class="reference internal" href="pgr_findCloseEdges.html"><span class="doc">pgr_findCloseEdges</span></a> the closest vertext to component <span class="math notranslate nohighlight">\(1\)</span> is
vertex <span class="math notranslate nohighlight">\(4\)</span>. And the closest edge to vertex <span class="math notranslate nohighlight">\(4\)</span> is edge <span class="math notranslate nohighlight">\(14\)</span>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT edge_id, fraction, ST_AsText(edge) AS edge, id AS closest_vertex
FROM pgr_findCloseEdges(
  $$SELECT id, geom FROM edges WHERE component = 1$$,
  (SELECT array_agg(geom) FROM vertices WHERE component = 2),
  2, partial =&gt; false) JOIN vertices USING (geom) ORDER BY distance LIMIT 1;
 edge_id | fraction |                 edge                 | closest_vertex
---------+----------+--------------------------------------+----------------
      14 |      0.5 | LINESTRING(1.999999999999 3.5,2 3.5) |              4
(1 row)

</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">edge</span></code> can be used to connect the components, using the <code class="docutils literal notranslate"><span class="pre">fraction</span></code>
information about the edge <span class="math notranslate nohighlight">\(14\)</span> to split the connecting edge.</p>
</section>
<section id="connecting-components">
<h5><a class="toc-backref" href="#id102" role="doc-backlink">Connecting components</a><a class="headerlink" href="#connecting-components" title="Permalink to this heading">¶</a></h5>
<p>There are three basic ways to connect the components</p>
<ul class="simple">
<li><p>From the vertex to the starting point of the edge</p></li>
<li><p>From the vertex to the ending point of the edge</p></li>
<li><p>From the vertex to the closest vertex on the edge</p>
<ul>
<li><p>This solution requiers the edge to be split.</p></li>
</ul>
</li>
</ul>
<p>The following query shows the three ways to connect the components:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>WITH
info AS (
  SELECT
    edge_id, fraction, side, distance, ce.geom, edge, v.id AS closest,
    source, target, capacity, reverse_capacity, e.geom AS e_geom
  FROM pgr_findCloseEdges(
    $$SELECT id, geom FROM edges WHERE component = 1$$,
    (SELECT array_agg(geom) FROM vertices WHERE component = 2),
    2, partial =&gt; false) AS ce
  JOIN vertices AS v USING (geom)
  JOIN edges AS e ON (edge_id = e.id)
  ORDER BY distance LIMIT 1),
three_options AS (
  SELECT
    closest AS source, target, 0 AS cost, 0 AS reverse_cost,
    capacity, reverse_capacity,
    ST_X(geom) AS x1, ST_Y(geom) AS y1,
    ST_X(ST_EndPoint(e_geom)) AS x2, ST_Y(ST_EndPoint(e_geom)) AS y2,
    ST_MakeLine(geom, ST_EndPoint(e_geom)) AS geom
  FROM info

  UNION

  SELECT closest, source, 0, 0, capacity, reverse_capacity,
    ST_X(geom) AS x1, ST_Y(geom) AS y1,
    ST_X(ST_StartPoint(e_geom)) AS x2, ST_Y(ST_StartPoint(e_geom)) AS y2,
    ST_MakeLine(info.geom, ST_StartPoint(e_geom))
  FROM info
  /*
  UNION
  -- This option requires splitting the edge
  SELECT closest, NULL, 0, 0, capacity, reverse_capacity,
    ST_X(geom) AS x1, ST_Y(geom) AS y1,
    ST_X(ST_EndPoint(edge)) AS x2, ST_Y(ST_EndPoint(edge)) AS y2,
    edge
  FROM info */
  )

INSERT INTO edges
  (source, target,
    cost, reverse_cost,
    capacity, reverse_capacity,
    x1, y1, x2, y2,
    geom)
(SELECT
    source, target, cost, reverse_cost, capacity, reverse_capacity,
    x1, y1, x2, y2, geom
  FROM three_options);
INSERT 0 2
</pre></div>
</div>
</section>
<section id="checking-components">
<h5><a class="toc-backref" href="#id103" role="doc-backlink">Checking components</a><a class="headerlink" href="#checking-components" title="Permalink to this heading">¶</a></h5>
<p>Ignoring the edge that requieres further work. The graph is now fully connected
as there is only one component.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">component</span> <span class="o">|</span> <span class="n">node</span>
<span class="o">-----+-----------+------</span>
   <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">2</span>
   <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">3</span>
   <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">4</span>
   <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">5</span>
   <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span>
   <span class="mi">7</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">7</span>
   <span class="mi">8</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">8</span>
   <span class="mi">9</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">9</span>
  <span class="mi">10</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">10</span>
  <span class="mi">11</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">11</span>
  <span class="mi">12</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">12</span>
  <span class="mi">13</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">13</span>
  <span class="mi">14</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">14</span>
  <span class="mi">15</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">15</span>
  <span class="mi">16</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">16</span>
  <span class="mi">17</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">17</span>
  <span class="mi">18</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">18</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
</section>
<section id="compute-a-path">
<h3><a class="toc-backref" href="#id104" role="doc-backlink">Compute a Path</a><a class="headerlink" href="#compute-a-path" title="Permalink to this heading">¶</a></h3>
<p>Once you have all the preparation work done above, computing a route is fairly
easy.
We have a lot of different algorithms that can work with your prepared road
network.
The general form of a route query using Dijkstra algorithm is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM myroads&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">start</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">end</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>This algorithm only requires <em>id</em>, <em>source</em>, <em>target</em> and <em>cost</em> as the minimal
attributes, that by default will be considered to be columns in your roads
table.
If the column names in your roads table do not match exactly the names of these
attributes, you can use aliases.
For example, if you imported OSM data using <strong>osm2pgrouting</strong>, your id column’s
name would be <em>gid</em> and your roads table would be <em>ways</em>, so you would query a
route from node id 1 to node id 2 by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;SELECT gid AS id, source, target, cost FROM ways&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see this is fairly straight forward and it also allows for great
flexibility, both in terms of database structure and in defining cost functions.
You can test the previous query using <em>length_m AS cost</em> to compute the shortest
path in meters or <em>cost_s / 60 AS cost</em> to compute the fastest path in minutes.</p>
<p>You can look and the specific algorithms for the details of the signatures and
how to use them.
These results have information like edge id and/or the node id along with the
cost or geometry for the step in the path from <em>start</em> to <em>end</em>.
Using the ids you can join these result back to your edge table to get more
information about each step in the path.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a></p></li>
</ul>
</section>
</section>
<section id="group-of-functions">
<h2><a class="toc-backref" href="#id105" role="doc-backlink">Group of Functions</a><a class="headerlink" href="#group-of-functions" title="Permalink to this heading">¶</a></h2>
<p>A function might have different overloads.
Across this documentation, to indicate which overload we use the following
terms:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-one">One to One</a></p></li>
<li><p><a class="reference internal" href="#one-to-many">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-one">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
<li><p><a class="reference internal" href="#combinations">Combinations</a></p></li>
</ul>
<p>Depending on the overload are the parameters used, keeping consistency across
all functions.</p>
<section id="one-to-one">
<h3><a class="toc-backref" href="#id106" role="doc-backlink">One to One</a><a class="headerlink" href="#one-to-one" title="Permalink to this heading">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>one</strong> starting vertex</p></li>
<li><p>to <strong>one</strong> ending vertex</p></li>
</ul>
</section>
<section id="one-to-many">
<h3><a class="toc-backref" href="#id107" role="doc-backlink">One to Many</a><a class="headerlink" href="#one-to-many" title="Permalink to this heading">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>one</strong> starting vertex</p></li>
<li><p>to <strong>many</strong> ending vertices</p></li>
</ul>
</section>
<section id="many-to-one">
<h3><a class="toc-backref" href="#id108" role="doc-backlink">Many to One</a><a class="headerlink" href="#many-to-one" title="Permalink to this heading">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>many</strong> starting vertices</p></li>
<li><p>to <strong>one</strong> ending vertex</p></li>
</ul>
</section>
<section id="many-to-many">
<h3><a class="toc-backref" href="#id109" role="doc-backlink">Many to Many</a><a class="headerlink" href="#many-to-many" title="Permalink to this heading">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>many</strong> starting vertices</p></li>
<li><p>to <strong>many</strong> ending vertices</p></li>
</ul>
</section>
<section id="combinations">
<h3><a class="toc-backref" href="#id110" role="doc-backlink">Combinations</a><a class="headerlink" href="#combinations" title="Permalink to this heading">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>many</strong> different starting vertices</p></li>
<li><p>to <strong>many</strong> different ending vertices</p></li>
<li><p>Every tuple specifies a pair of a start vertex and an end vertex</p></li>
<li><p>Users can define the combinations as desired.</p></li>
</ul>
</section>
</section>
<section id="inner-queries">
<h2><a class="toc-backref" href="#id111" role="doc-backlink">Inner Queries</a><a class="headerlink" href="#inner-queries" title="Permalink to this heading">¶</a></h2>
<nav class="contents local" id="id2">
<ul class="simple">
<li><p><a class="reference internal" href="#edges-sql" id="id141">Edges SQL</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id142">General</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id143">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id144">General with (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id145">Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id146">Combinations SQL</a></p></li>
<li><p><a class="reference internal" href="#restrictions-sql" id="id147">Restrictions SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id148">Points SQL</a></p></li>
</ul>
</nav>
<p>There are several kinds of valid inner queries and also the columns returned are
depending of the function.
Which kind of inner query will depend on the function(s) requirements.
To simplify variety of types, <strong>ANY-INTEGER</strong> and <strong>ANY-NUMERICAL</strong> is used.</p>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p>SMALLINT, INTEGER, BIGINT</p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p>SMALLINT, INTEGER, BIGINT, REAL, FLOAT</p>
</dd>
</dl>
<section id="edges-sql">
<h3><a class="toc-backref" href="#id141" role="doc-backlink">Edges SQL</a><a class="headerlink" href="#edges-sql" title="Permalink to this heading">¶</a></h3>
<section id="general">
<h4><a class="toc-backref" href="#id142" role="doc-backlink">General</a><a class="headerlink" href="#general" title="Permalink to this heading">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="dijkstra-family.html"><span class="doc">Dijkstra - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="bdDijkstra-family.html"><span class="doc">Bidirectional Dijkstra - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="components-family.html"><span class="doc">Components - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="kruskal-family.html"><span class="doc">Kruskal - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="prim-family.html"><span class="doc">Prim - Family of functions</span></a></p></li>
<li><p>Some uncategorized functions</p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="general-without-id">
<h4><a class="toc-backref" href="#id143" role="doc-backlink">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a><a class="headerlink" href="#general-without-id" title="Permalink to this heading">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="allpairs-family.html"><span class="doc">All Pairs - Family of Functions</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="general-with-x-y">
<h4><a class="toc-backref" href="#id144" role="doc-backlink">General with (X,Y)</a><a class="headerlink" href="#general-with-x-y" title="Permalink to this heading">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="aStar-family.html"><span class="doc">A* - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="bdAstar-family.html"><span class="doc">Bidirectional A* - Family of functions</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 16%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>),</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x1</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>X coordinate of <code class="docutils literal notranslate"><span class="pre">source</span></code> vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y1</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Y coordinate of <code class="docutils literal notranslate"><span class="pre">source</span></code> vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x2</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>X coordinate of <code class="docutils literal notranslate"><span class="pre">target</span></code> vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y2</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Y coordinate of <code class="docutils literal notranslate"><span class="pre">target</span></code> vertex.</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="flow">
<h4><a class="toc-backref" href="#id145" role="doc-backlink">Flow</a><a class="headerlink" href="#flow" title="Permalink to this heading">¶</a></h4>
<p class="rubric">Edges SQL for <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a></p>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_pushRelabel.html"><span class="doc">pgr_pushRelabel</span></a></p></li>
<li><p><a class="reference internal" href="pgr_edmondsKarp.html"><span class="doc">pgr_edmondsKarp</span></a></p></li>
<li><p><a class="reference internal" href="pgr_boykovKolmogorov.html"><span class="doc">pgr_boykovKolmogorov</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
<p class="rubric">Edges SQL for the following functions of <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a></p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_maxFlowMinCost.html"><span class="doc">pgr_maxFlowMinCost - Experimental</span></a></p></li>
<li><p><a class="reference internal" href="pgr_maxFlowMinCost_Cost.html"><span class="doc">pgr_maxFlowMinCost_Cost - Experimental</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Capacity of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>-1</p></td>
<td><p>Capacity of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>) if it exist</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(-1\)</span></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) if it exist</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="combinations-sql">
<h3><a class="toc-backref" href="#id146" role="doc-backlink">Combinations SQL</a><a class="headerlink" href="#combinations-sql" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Used on combination signatures</p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the departure vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the arrival vertex.</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
</dl>
</section>
<section id="restrictions-sql">
<h3><a class="toc-backref" href="#id147" role="doc-backlink">Restrictions SQL</a><a class="headerlink" href="#restrictions-sql" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 10%" />
<col style="width: 25%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td><p>Sequence of edge identifiers that form a path that is not allowed to be
taken.
- Empty arrays or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> arrays are ignored.
- Arrays that have a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> element will raise an exception.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>Cost of taking the forbidden path.</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="points-sql">
<h3><a class="toc-backref" href="#id148" role="doc-backlink">Points SQL</a><a class="headerlink" href="#points-sql" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Points SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Family of functions</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 16%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pid</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p><strong>value</strong></p></td>
<td><p>Identifier of the point.</p>
<ul class="simple">
<li><p>Use with positive value, as internally will be converted to negative
value</p></li>
<li><p>If column is present, it can not be NULL.</p></li>
<li><p>If column is not present, a sequential negative <strong>value</strong> will be given
automatically.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge_id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the “closest” edge to the point.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fraction</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Value in &lt;0,1&gt; that indicates the relative postition from the first end
point of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">side</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHAR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>Value in [<code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">l</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code>] indicating if the point is:</p>
<ul class="simple">
<li><p>In the right <code class="docutils literal notranslate"><span class="pre">r</span></code>,</p></li>
<li><p>In the left <code class="docutils literal notranslate"><span class="pre">l</span></code>,</p></li>
<li><p>In both sides <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id120" role="doc-backlink">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h2>
<p>The main parameter of the majority of the pgRouting functions is a query that
selects the edges of the graph.</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Edges SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#edges-sql">Edges SQL</a> as described below.</p></td>
</tr>
</tbody>
</table>
<p>Depending on the family or category of a function it will have additional
parameters, some of them are compulsory and some are optional.</p>
<p>The compulsory parameters are nameless and must be given in the required order.
The optional parameters are named parameters and will have a default value.</p>
<section id="parameters-for-the-via-functions">
<h3><a class="toc-backref" href="#id121" role="doc-backlink">Parameters for the Via functions</a><a class="headerlink" href="#parameters-for-the-via-functions" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstraVia.html"><span class="doc">pgr_dijkstraVia - Proposed</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17%" />
<col style="width: 25%" />
<col style="width: 9%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Edges SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td></td>
<td><p>SQL query as described.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>via vertices</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td></td>
<td><p>Array of ordered vertices identifiers that are going to be visited.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directed</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code> Graph is considered <cite>Directed</cite></p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">false</span></code> the graph is considered as Undirected.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">strict</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code> if a path is missing stops and returns <strong>EMPTY SET</strong></p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">false</span></code> ignores missing paths returning all paths found</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">U_turn_on_edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code> departing from a visited vertex will not try to avoid
using the edge used to reach it.  In other words, U turn using the edge
with same identifier is allowed.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">false</span></code> when a departing from a visited vertex tries to avoid
using the edge used to reach it.  In other words, U turn using the edge
with same identifier is used when no other path is found.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="for-the-trsp-functions">
<h3><a class="toc-backref" href="#id122" role="doc-backlink">For the TRSP functions</a><a class="headerlink" href="#for-the-trsp-functions" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_trsp.html"><span class="doc">pgr_trsp - Proposed</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 20%" />
<col style="width: 27%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Edges SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p>SQL query as described.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#restrictions-sql">Restrictions SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p>SQL query as described.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#combinations-sql">Combinations SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#combinations-sql">Combinations SQL</a> as described below</p></td>
</tr>
<tr class="row-odd"><td><p><strong>start vid</strong></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the departure vertex.</p></td>
</tr>
<tr class="row-even"><td><p><strong>start vids</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td><p>Array of identifiers of destination vertices.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>end vid</strong></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the departure vertex.</p></td>
</tr>
<tr class="row-even"><td><p><strong>end vids</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td><p>Array of identifiers of destination vertices.</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="return-columns">
<h2><a class="toc-backref" href="#id123" role="doc-backlink">Return columns</a><a class="headerlink" href="#return-columns" title="Permalink to this heading">¶</a></h2>
<nav class="contents local" id="id3">
<ul class="simple">
<li><p><a class="reference internal" href="#return-columns-for-a-path" id="id149">Return columns for a path</a></p></li>
<li><p><a class="reference internal" href="#multiple-paths" id="id150">Multiple paths</a></p>
<ul>
<li><p><a class="reference internal" href="#selective-for-multiple-paths" id="id151">Selective for multiple paths.</a></p></li>
<li><p><a class="reference internal" href="#non-selective-for-multiple-paths" id="id152">Non selective for multiple paths</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns-for-cost-functions" id="id153">Return columns for cost functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-flow-functions" id="id154">Return columns for flow functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-spanning-tree-functions" id="id155">Return columns for spanning tree functions</a></p></li>
</ul>
</nav>
<p>There are several kinds of columns returned are depending of the function.</p>
<section id="return-columns-for-a-path">
<h3><a class="toc-backref" href="#id149" role="doc-backlink">Return columns for a path</a><a class="headerlink" href="#return-columns-for-a-path" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Used on functions that return one path solution</p>
<p>Returns set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_vid]</span> <span class="pre">[,</span> <span class="pre">end_vid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path. Has value <strong>1</strong> for the beginning of a
path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex.
Returned when multiple starting vetrices are in the query.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#many-to-one">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex.
Returned when multiple ending vertices are in the query.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-many">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Used on functions the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Proposed</span></a></p></li>
</ul>
<p>Returns set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_pid]</span> <span class="pre">[,</span> <span class="pre">end_pid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path.</p>
<ul class="simple">
<li><p><strong>1</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_pid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of a starting vertex/point of the path.</p>
<ul class="simple">
<li><p>When positive is the identifier of the starting vertex.</p></li>
<li><p>When negative is the identifier of the starting point.</p></li>
<li><p>Returned on <a class="reference internal" href="#many-to-one">Many to One</a>  and <a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_pid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of an ending vertex/point of the path.</p>
<ul class="simple">
<li><p>When positive is the identifier of the ending vertex.</p></li>
<li><p>When negative is the identifier of the ending point.</p></li>
<li><p>Returned on <a class="reference internal" href="#one-to-many">One to Many</a> and <a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_pid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_pid</span></code>.</p>
<ul class="simple">
<li><p>When positive is the identifier of the a vertex.</p></li>
<li><p>When negative is the identifier of the a point.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence.</p>
<ul class="simple">
<li><p><strong>-1</strong> for the last row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p>
<ul class="simple">
<li><p><strong>0</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
<ul class="simple">
<li><p><strong>0</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Used on functions the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstraNear.html"><span class="doc">pgr_dijkstraNear - Proposed</span></a></p></li>
</ul>
<p>Returns <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq,</span> <span class="pre">start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path. Has value <strong>1</strong> for the beginning of a
path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex of the current path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex of the current path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="multiple-paths">
<h3><a class="toc-backref" href="#id150" role="doc-backlink">Multiple paths</a><a class="headerlink" href="#multiple-paths" title="Permalink to this heading">¶</a></h3>
<section id="selective-for-multiple-paths">
<h4><a class="toc-backref" href="#id151" role="doc-backlink">Selective for multiple paths.</a><a class="headerlink" href="#selective-for-multiple-paths" title="Permalink to this heading">¶</a></h4>
<p>The columns depend on the function call.</p>
<p>Set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_id,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_vid]</span> <span class="pre">[,</span> <span class="pre">end_vid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Path identifier.</p>
<ul class="simple">
<li><p>Has value <strong>1</strong> for the first of a path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to
<code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path. Has value <strong>1</strong> for the beginning of a
path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex.
Returned when multiple starting vetrices are in the query.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#many-to-one">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
<li><p><a class="reference internal" href="#combinations">Combinations</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex.
Returned when multiple ending vertices are in the query.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-many">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
<li><p><a class="reference internal" href="#combinations">Combinations</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="non-selective-for-multiple-paths">
<h4><a class="toc-backref" href="#id152" role="doc-backlink">Non selective for multiple paths</a><a class="headerlink" href="#non-selective-for-multiple-paths" title="Permalink to this heading">¶</a></h4>
<p>Regardless of the call, al the columns are returned.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_trsp.html"><span class="doc">pgr_trsp - Proposed</span></a></p></li>
</ul>
<p>Returns set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_id,</span> <span class="pre">path_seq,</span> <span class="pre">start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Path identifier.</p>
<ul class="simple">
<li><p>Has value <strong>1</strong> for the first of a path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to
<code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path. Has value <strong>1</strong> for the beginning of a
path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="return-columns-for-cost-functions">
<h3><a class="toc-backref" href="#id153" role="doc-backlink">Return columns for cost functions</a><a class="headerlink" href="#return-columns-for-cost-functions" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Used in the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="cost-category.html"><span class="doc">Cost - Category</span></a></p></li>
<li><p><a class="reference internal" href="costMatrix-category.html"><span class="doc">Cost Matrix - Category</span></a></p></li>
<li><p><a class="reference internal" href="allpairs-family.html"><span class="doc">All Pairs - Family of Functions</span></a></p></li>
</ul>
<p>Set of <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When start_vid or end_vid columns have negative values, the identifier is for
a Point.</p>
</div>
</section>
<section id="return-columns-for-flow-functions">
<h3><a class="toc-backref" href="#id154" role="doc-backlink">Return columns for flow functions</a><a class="headerlink" href="#return-columns-for-flow-functions" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Edges SQL for the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a></p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>seq</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>edge</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge in the original query
(edges_sql).</p></td>
</tr>
<tr class="row-even"><td><p><strong>start_vid</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the first end point vertex of
the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>end_vid</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the second end point vertex of
the edge.</p></td>
</tr>
<tr class="row-even"><td><p><strong>flow</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Flow through the edge in the direction
(<code class="docutils literal notranslate"><span class="pre">start_vid</span></code>, <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>residual_capacity</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Residual capacity of the edge in the direction
(<code class="docutils literal notranslate"><span class="pre">start_vid</span></code>, <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>).</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Edges SQL for the following functions of <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a></p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_maxFlowMinCost.html"><span class="doc">pgr_maxFlowMinCost - Experimental</span></a></p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>seq</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>edge</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge in the original query
(edges_sql).</p></td>
</tr>
<tr class="row-even"><td><p><strong>source</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the first end point vertex of
the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>target</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the second end point vertex of
the edge.</p></td>
</tr>
<tr class="row-even"><td><p><strong>flow</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Flow through the edge in the direction
(source, target).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>residual_capacity</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Residual capacity of the edge in the direction
(source, target).</p></td>
</tr>
<tr class="row-even"><td><p><strong>cost</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>The cost of sending this flow through the edge
in the direction (source, target).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>agg_cost</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>The aggregate cost.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="return-columns-for-spanning-tree-functions">
<h3><a class="toc-backref" href="#id155" role="doc-backlink">Return columns for spanning tree functions</a><a class="headerlink" href="#return-columns-for-spanning-tree-functions" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Edges SQL for the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_prim.html"><span class="doc">pgr_prim</span></a></p></li>
<li><p><a class="reference internal" href="pgr_kruskal.html"><span class="doc">pgr_kruskal</span></a></p></li>
</ul>
<p>Returns SET OF <code class="docutils literal notranslate"><span class="pre">(edge,</span> <span class="pre">cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse the edge.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="advanced-topics">
<h2><a class="toc-backref" href="#id131" role="doc-backlink">Advanced Topics</a><a class="headerlink" href="#advanced-topics" title="Permalink to this heading">¶</a></h2>
<nav class="contents local" id="id4">
<ul class="simple">
<li><p><a class="reference internal" href="#routing-topology" id="id156">Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#graph-analytics" id="id157">Graph Analytics</a></p></li>
<li><p><a class="reference internal" href="#analyze-a-graph" id="id158">Analyze a Graph</a></p></li>
<li><p><a class="reference internal" href="#analyze-one-way-streets" id="id159">Analyze One Way Streets</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id160">Example</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="routing-topology">
<span id="topology"></span><h3><a class="toc-backref" href="#id156" role="doc-backlink">Routing Topology</a><a class="headerlink" href="#routing-topology" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Overview</p>
<p>Typically when GIS files are loaded into the data database for use with
pgRouting they do not have topology information associated with them. To create
a useful topology the data needs to be “noded”. This means that where two or
more roads form an intersection there it needs to be a node at the intersection
and all the road segments need to be broken at the intersection, assuming that
you can navigate from any of these segments to any other segment via that
intersection.</p>
<p>You can use the <a class="reference internal" href="#analytics"><span class="std std-ref">graph analysis functions</span></a> to help you see
where you might have topology problems in your data. If you need to node your
data, we also have a function <a class="reference internal" href="pgr_nodeNetwork.html"><span class="doc">pgr_nodeNetwork()</span></a> that
might work for you. This function splits ALL crossing segments and nodes them.
There are some cases where this might NOT be the right thing to do.</p>
<p>For example, when you have an overpass and underpass intersection, you do not
want these noded, but pgr_nodeNetwork does not know that is the case and will
node them which is not good because then the router will be able to turn off the
overpass onto the underpass like it was a flat 2D intersection. To deal with
this problem some data sets use z-levels at these types of intersections and
other data might not node these intersection which would be ok.</p>
<p>For those cases where topology needs to be added the following functions may be
useful. One way to prep the data for pgRouting is to add the following columns
to your table and then populate them as appropriate. This example makes a lot of
assumption like that you original data tables already has certain columns in it
like <code class="docutils literal notranslate"><span class="pre">one_way</span></code>, <code class="docutils literal notranslate"><span class="pre">fcc</span></code>, and possibly others and that they contain specific
data values. This is only to give you an idea of what you can do with your data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edge_table</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">source</span> <span class="n">integer</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">target</span> <span class="n">integer</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">cost_len</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">cost_time</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">rcost_len</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">rcost_time</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">x1</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">y1</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">x2</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">y2</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">to_cost</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">rule</span> <span class="n">text</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">isolated</span> <span class="n">integer</span><span class="p">;</span>

<span class="n">SELECT</span> <span class="n">pgr_createTopology</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span> <span class="mf">0.000001</span><span class="p">,</span> <span class="s1">&#39;the_geom&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>The function <a class="reference internal" href="pgr_createTopology.html"><span class="doc">pgr_createTopology</span></a> will create the
<code class="docutils literal notranslate"><span class="pre">vertices_tmp</span></code> table and populate the <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">target</span></code> columns. The
following example populated the remaining columns. In this example, the <code class="docutils literal notranslate"><span class="pre">fcc</span></code>
column contains feature class code and the <code class="docutils literal notranslate"><span class="pre">CASE</span></code> statements converts it to an
average speed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edge_table</span> <span class="n">SET</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">st_x</span><span class="p">(</span><span class="n">st_startpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span>
                      <span class="n">y1</span> <span class="o">=</span> <span class="n">st_y</span><span class="p">(</span><span class="n">st_startpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span>
                      <span class="n">x2</span> <span class="o">=</span> <span class="n">st_x</span><span class="p">(</span><span class="n">st_endpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span>
                      <span class="n">y2</span> <span class="o">=</span> <span class="n">st_y</span><span class="p">(</span><span class="n">st_endpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span>
  <span class="n">cost_len</span>  <span class="o">=</span> <span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">),</span>
  <span class="n">rcost_len</span> <span class="o">=</span> <span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">),</span>
  <span class="n">len_km</span> <span class="o">=</span> <span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">)</span><span class="o">/</span><span class="mf">1000.0</span><span class="p">,</span>
  <span class="n">len_miles</span> <span class="o">=</span> <span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">)</span>
              <span class="o">/</span> <span class="mf">1000.0</span> <span class="o">*</span> <span class="mf">0.6213712</span><span class="p">,</span>
  <span class="n">speed_mph</span> <span class="o">=</span> <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A10&#39;</span> <span class="n">THEN</span> <span class="mi">65</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A15&#39;</span> <span class="n">THEN</span> <span class="mi">65</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A20&#39;</span> <span class="n">THEN</span> <span class="mi">55</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A25&#39;</span> <span class="n">THEN</span> <span class="mi">55</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A30&#39;</span> <span class="n">THEN</span> <span class="mi">45</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A35&#39;</span> <span class="n">THEN</span> <span class="mi">45</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A40&#39;</span> <span class="n">THEN</span> <span class="mi">35</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A45&#39;</span> <span class="n">THEN</span> <span class="mi">35</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A50&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A60&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A61&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A62&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A64&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A70&#39;</span> <span class="n">THEN</span> <span class="mi">15</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A69&#39;</span> <span class="n">THEN</span> <span class="mi">10</span>
                   <span class="n">ELSE</span> <span class="n">null</span> <span class="n">END</span><span class="p">,</span>
  <span class="n">speed_kmh</span> <span class="o">=</span> <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A10&#39;</span> <span class="n">THEN</span> <span class="mi">104</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A15&#39;</span> <span class="n">THEN</span> <span class="mi">104</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A20&#39;</span> <span class="n">THEN</span> <span class="mi">88</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A25&#39;</span> <span class="n">THEN</span> <span class="mi">88</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A30&#39;</span> <span class="n">THEN</span> <span class="mi">72</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A35&#39;</span> <span class="n">THEN</span> <span class="mi">72</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A40&#39;</span> <span class="n">THEN</span> <span class="mi">56</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A45&#39;</span> <span class="n">THEN</span> <span class="mi">56</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A50&#39;</span> <span class="n">THEN</span> <span class="mi">40</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A60&#39;</span> <span class="n">THEN</span> <span class="mi">50</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A61&#39;</span> <span class="n">THEN</span> <span class="mi">40</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A62&#39;</span> <span class="n">THEN</span> <span class="mi">40</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A64&#39;</span> <span class="n">THEN</span> <span class="mi">40</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A70&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A69&#39;</span> <span class="n">THEN</span> <span class="mi">15</span>
                   <span class="n">ELSE</span> <span class="n">null</span> <span class="n">END</span><span class="p">;</span>

<span class="o">--</span> <span class="n">UPDATE</span> <span class="n">the</span> <span class="n">cost</span> <span class="n">information</span> <span class="n">based</span> <span class="n">on</span> <span class="n">oneway</span> <span class="n">streets</span>

<span class="n">UPDATE</span> <span class="n">edge_table</span> <span class="n">SET</span>
    <span class="n">cost_time</span> <span class="o">=</span> <span class="n">CASE</span>
        <span class="n">WHEN</span> <span class="n">one_way</span><span class="o">=</span><span class="s1">&#39;TF&#39;</span> <span class="n">THEN</span> <span class="mf">10000.0</span>
        <span class="n">ELSE</span> <span class="n">cost_len</span><span class="o">/</span><span class="mf">1000.0</span><span class="o">/</span><span class="n">speed_kmh</span><span class="p">::</span><span class="n">numeric</span><span class="o">*</span><span class="mf">3600.0</span>
        <span class="n">END</span><span class="p">,</span>
    <span class="n">rcost_time</span> <span class="o">=</span> <span class="n">CASE</span>
        <span class="n">WHEN</span> <span class="n">one_way</span><span class="o">=</span><span class="s1">&#39;FT&#39;</span> <span class="n">THEN</span> <span class="mf">10000.0</span>
        <span class="n">ELSE</span> <span class="n">cost_len</span><span class="o">/</span><span class="mf">1000.0</span><span class="o">/</span><span class="n">speed_kmh</span><span class="p">::</span><span class="n">numeric</span><span class="o">*</span><span class="mf">3600.0</span>
        <span class="n">END</span><span class="p">;</span>

<span class="o">--</span> <span class="n">clean</span> <span class="n">up</span> <span class="n">the</span> <span class="n">database</span> <span class="n">because</span> <span class="n">we</span> <span class="n">have</span> <span class="n">updated</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">of</span> <span class="n">records</span>

<span class="n">VACUUM</span> <span class="n">ANALYZE</span> <span class="n">VERBOSE</span> <span class="n">edge_table</span><span class="p">;</span>
</pre></div>
</div>
<p>Now your database should be ready to use any (most?) of the pgRouting algorithms.</p>
</section>
<section id="graph-analytics">
<span id="analytics"></span><h3><a class="toc-backref" href="#id157" role="doc-backlink">Graph Analytics</a><a class="headerlink" href="#graph-analytics" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Overview</p>
<p>It is common to find problems with graphs that have not been constructed fully
noded or in graphs with z-levels at intersection that have been entered
incorrectly. An other problem is one way streets that have been entered in the
wrong direction. We can not detect errors with respect to “ground” truth, but we
can look for inconsistencies and some anomalies in a graph and report them for
additional inspections.</p>
<p>We do not current have any visualization tools for these problems, but I have
used mapserver to render the graph and highlight potential problem areas.
Someone familiar with graphviz might contribute tools for generating images with
that.</p>
</section>
<section id="analyze-a-graph">
<h3><a class="toc-backref" href="#id158" role="doc-backlink">Analyze a Graph</a><a class="headerlink" href="#analyze-a-graph" title="Permalink to this heading">¶</a></h3>
<p>With <a class="reference internal" href="pgr_analyzeGraph.html"><span class="doc">pgr_analyzeGraph</span></a> the graph can be checked for errors. For example
for table “mytab” that has “mytab_vertices_pgr” as the vertices table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">pgr_analyzeGraph</span><span class="p">(</span><span class="s1">&#39;mytab&#39;</span><span class="p">,</span> <span class="mf">0.000002</span><span class="p">);</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Performing</span> <span class="n">checks</span><span class="p">,</span> <span class="n">pelase</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">dead</span> <span class="n">ends</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">gaps</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">isolated</span> <span class="n">edges</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">ring</span> <span class="n">geometries</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">intersections</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>              <span class="n">ANALYSIS</span> <span class="n">RESULTS</span> <span class="n">FOR</span> <span class="n">SELECTED</span> <span class="n">EDGES</span><span class="p">:</span>
<span class="n">NOTICE</span><span class="p">:</span>                    <span class="n">Isolated</span> <span class="n">segments</span><span class="p">:</span> <span class="mi">158</span>
<span class="n">NOTICE</span><span class="p">:</span>                            <span class="n">Dead</span> <span class="n">ends</span><span class="p">:</span> <span class="mi">20028</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Potential</span> <span class="n">gaps</span> <span class="n">found</span> <span class="n">near</span> <span class="n">dead</span> <span class="n">ends</span><span class="p">:</span> <span class="mi">527</span>
<span class="n">NOTICE</span><span class="p">:</span>               <span class="n">Intersections</span> <span class="n">detected</span><span class="p">:</span> <span class="mi">2560</span>
<span class="n">NOTICE</span><span class="p">:</span>                      <span class="n">Ring</span> <span class="n">geometries</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">pgr_analyzeGraph</span>
<span class="o">----------</span>
   <span class="n">OK</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>In the vertices table “mytab_vertices_pgr”:</p>
<ul class="simple">
<li><p>Deadends are identified by <code class="docutils literal notranslate"><span class="pre">cnt=1</span></code></p></li>
<li><p>Potencial gap problems are identified with <code class="docutils literal notranslate"><span class="pre">chk=1</span></code>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="n">deadends</span>  <span class="n">FROM</span> <span class="n">mytab_vertices_pgr</span> <span class="n">WHERE</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">deadends</span>
<span class="o">----------</span>
    <span class="mi">20028</span>
 <span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

<span class="n">SELECT</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="n">gaps</span>  <span class="n">FROM</span> <span class="n">mytab_vertices_pgr</span> <span class="n">WHERE</span> <span class="n">chk</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 <span class="n">gaps</span>
 <span class="o">-----</span>
   <span class="mi">527</span>
 <span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>For isolated road segments, for example, a segment where both ends are deadends.
you can find these with the following query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
    <span class="n">FROM</span> <span class="n">mytab</span> <span class="n">a</span><span class="p">,</span> <span class="n">mytab_vertices_pgr</span> <span class="n">b</span><span class="p">,</span> <span class="n">mytab_vertices_pgr</span> <span class="n">c</span>
    <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">source</span><span class="o">=</span><span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">cnt</span><span class="o">=</span><span class="mi">1</span> <span class="n">AND</span> <span class="n">a</span><span class="o">.</span><span class="n">target</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">c</span><span class="o">.</span><span class="n">cnt</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>If you want to visualize these on a graphic image, then you can use something
like mapserver to render the edges and the vertices and style based on <code class="docutils literal notranslate"><span class="pre">cnt</span></code>
or if they are isolated, etc. You can also do this with a tool like graphviz, or
geoserver or other similar tools.</p>
</section>
<section id="analyze-one-way-streets">
<h3><a class="toc-backref" href="#id159" role="doc-backlink">Analyze One Way Streets</a><a class="headerlink" href="#analyze-one-way-streets" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="pgr_analyzeOneWay.html"><span class="doc">pgr_analyzeOneWay</span></a> analyzes one way streets in a graph and identifies any
flipped segments. Basically if you count the edges coming into a node and the
edges exiting a node the number has to be greater than one.</p>
<p>This query will add two columns to the vertices_tmp table <code class="docutils literal notranslate"><span class="pre">ein</span> <span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">eout</span>
<span class="pre">int</span></code> and populate it with the appropriate counts. After running this on a graph
you can identify nodes with potential problems with the following query.</p>
<p>The rules are defined as an array of text strings that if match the <code class="docutils literal notranslate"><span class="pre">col</span></code>
value would be counted as true for the source or target in or out condition.</p>
<section id="example">
<h4><a class="toc-backref" href="#id160" role="doc-backlink">Example</a><a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h4>
<p>Lets assume we have a table “st” of edges and a column “one_way” that might have
values like:</p>
<ul class="simple">
<li><p>‘FT’    - oneway from the source to the target node.</p></li>
<li><p>‘TF’    - oneway from the target to the source node.</p></li>
<li><p>‘B’     - two way street.</p></li>
<li><p>‘’      - empty field, assume twoway.</p></li>
<li><p>&lt;NULL&gt;  - NULL field, use two_way_if_null flag.</p></li>
</ul>
<p>Then we could form the following query to analyze the oneway streets for errors.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">pgr_analyzeOneway</span><span class="p">(</span><span class="s1">&#39;mytab&#39;</span><span class="p">,</span>
            <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;TF&#39;</span><span class="p">],</span>
            <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;FT&#39;</span><span class="p">],</span>
            <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;FT&#39;</span><span class="p">],</span>
            <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;TF&#39;</span><span class="p">],</span>
            <span class="p">);</span>

<span class="o">--</span> <span class="n">now</span> <span class="n">we</span> <span class="n">can</span> <span class="n">see</span> <span class="n">the</span> <span class="n">problem</span> <span class="n">nodes</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">mytab_vertices_pgr</span> <span class="n">WHERE</span> <span class="n">ein</span><span class="o">=</span><span class="mi">0</span> <span class="n">OR</span> <span class="n">eout</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

<span class="o">--</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">problem</span> <span class="n">edges</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">those</span> <span class="n">nodes</span>
<span class="n">SELECT</span> <span class="n">gid</span> <span class="n">FROM</span> <span class="n">mytab</span> <span class="n">a</span><span class="p">,</span> <span class="n">mytab_vertices_pgr</span> <span class="n">b</span> <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">source</span><span class="o">=</span><span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">ein</span><span class="o">=</span><span class="mi">0</span> <span class="n">OR</span> <span class="n">eout</span><span class="o">=</span><span class="mi">0</span>
<span class="n">UNION</span>
<span class="n">SELECT</span> <span class="n">gid</span> <span class="n">FROM</span> <span class="n">mytab</span> <span class="n">a</span><span class="p">,</span> <span class="n">mytab_vertices_pgr</span> <span class="n">b</span> <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">target</span><span class="o">=</span><span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">ein</span><span class="o">=</span><span class="mi">0</span> <span class="n">OR</span> <span class="n">eout</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<p>Typically these problems are generated by a break in the network, the one way
direction set wrong, maybe an error related to z-levels or a network that is not
properly noded.</p>
<p>The above tools do not detect all network issues, but they will identify some
common problems. There are other problems that are hard to detect because they
are more global in nature like multiple disconnected networks. Think of an
island with a road network that is not connected to the mainland network because
the bridge or ferry routes are missing.</p>
</section>
</section>
</section>
<section id="performance-tips">
<span id="performance"></span><h2><a class="toc-backref" href="#id137" role="doc-backlink">Performance Tips</a><a class="headerlink" href="#performance-tips" title="Permalink to this heading">¶</a></h2>
<nav class="contents local" id="id5">
<ul class="simple">
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id161">For the Routing functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-topology-functions" id="id162">For the topology functions:</a></p></li>
</ul>
</nav>
<section id="for-the-routing-functions">
<h3><a class="toc-backref" href="#id161" role="doc-backlink">For the Routing functions</a><a class="headerlink" href="#for-the-routing-functions" title="Permalink to this heading">¶</a></h3>
<p>To get faster results bound your queries to the area of interest of routing to
have, for example, no more than one million rows.</p>
<p>Use an inner query SQL that does not include some edges in the routing function</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="kn">from</span> <span class="nn">edge_table</span> <span class="n">WHERE</span>
        <span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">17</span> <span class="ow">and</span>
        <span class="n">the_geom</span>  <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">select</span> <span class="n">st_buffer</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">myarea</span> <span class="n">FROM</span>  <span class="n">edge_table</span> <span class="n">where</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>Integrating the inner query to the pgRouting function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span>
        <span class="s1">&#39;SELECT id, source, target from edge_table WHERE</span>
            <span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">17</span> <span class="ow">and</span>
            <span class="n">the_geom</span>  <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">select</span> <span class="n">st_buffer</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">myarea</span> <span class="n">FROM</span>  <span class="n">edge_table</span> <span class="n">where</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span><span class="s1">&#39;,</span>
    <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="for-the-topology-functions">
<h3><a class="toc-backref" href="#id162" role="doc-backlink">For the topology functions:</a><a class="headerlink" href="#for-the-topology-functions" title="Permalink to this heading">¶</a></h3>
<p>When “you know” that you are going to remove a set of edges from the edges
table, and without those edges you are going to use a routing function you can
do the following:</p>
<p>Analize the new topology based on the actual topology:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_analyzegraph</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="o">:=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Or create a new topology if the change is permanent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_createTopology</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="o">:=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span>
<span class="n">pgr_analyzegraph</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="o">:=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="how-to-contribute">
<span id="how-contribute"></span><h2><a class="toc-backref" href="#id140" role="doc-backlink">How to contribute</a><a class="headerlink" href="#how-to-contribute" title="Permalink to this heading">¶</a></h2>
<p class="rubric">Wiki</p>
<ul class="simple">
<li><p>Edit an existing  <a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki">pgRouting Wiki</a> page.</p></li>
<li><p>Or create a new Wiki page</p>
<ul>
<li><p>Create a page on the <a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki">pgRouting Wiki</a></p></li>
<li><p>Give the title an appropriate name</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki/How-to:-Handle-parallel-edges-(KSP)">Example</a></p></li>
</ul>
<p class="rubric">Adding Functionaity to pgRouting</p>
<p>Consult the <a class="reference external" href="https://docs.pgrouting.org/doxy/2.4/index.html">developer’s documentation</a></p>
<p class="rubric">Indices and tables</p>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v3.4.0-dev.<br/>
      Last updated on Jun 20, 2022.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>