<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>pgRouting Concepts &#8212; pgRouting Manual (3.4-dev)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Function Families" href="routingFunctions.html" />
    <link rel="prev" title="Sample Data" href="sampledata.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/pgrouting.png"></span>
          pgRouting</a>
        <span class="navbar-text navbar-version pull-left"><b>v3.4.0-dev</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Sample Data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">pgRouting Concepts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="routingFunctions.html">Function Families</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="proposed.html">Proposed Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental.html">Experimental Functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="trsp_migration.html"><code class="docutils literal notranslate"><span class="pre">pgr_trsp</span></code> - Migration guide</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">pgRouting Concepts</a><ul>
<li><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li><a class="reference internal" href="#create-a-routing-database">Create a routing Database</a></li>
<li><a class="reference internal" href="#load-data">Load Data</a></li>
<li><a class="reference internal" href="#build-a-routing-topology">Build a Routing Topology</a></li>
<li><a class="reference internal" href="#check-the-routing-topology">Check the Routing Topology</a></li>
<li><a class="reference internal" href="#compute-a-path">Compute a Path</a></li>
</ul>
</li>
<li><a class="reference internal" href="#group-of-functions">Group of Functions</a><ul>
<li><a class="reference internal" href="#one-to-one">One to One</a></li>
<li><a class="reference internal" href="#one-to-many">One to Many</a></li>
<li><a class="reference internal" href="#many-to-one">Many to One</a></li>
<li><a class="reference internal" href="#many-to-many">Many to Many</a></li>
<li><a class="reference internal" href="#combinations">Combinations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inner-queries">Inner Queries</a><ul>
<li><a class="reference internal" href="#edges-sql">Edges SQL</a><ul>
<li><a class="reference internal" href="#general">General</a></li>
<li><a class="reference internal" href="#general-without-id">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></li>
<li><a class="reference internal" href="#general-with-x-y">General with (X,Y)</a></li>
<li><a class="reference internal" href="#flow">Flow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#combinations-sql">Combinations SQL</a></li>
<li><a class="reference internal" href="#points-sql">Points SQL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters">Parameters</a></li>
<li><a class="reference internal" href="#return-columns">Return columns</a><ul>
<li><a class="reference internal" href="#return-columns-for-a-path">Return columns for a path</a></li>
<li><a class="reference internal" href="#return-columns-for-multiple-paths">Return columns for multiple paths</a></li>
<li><a class="reference internal" href="#return-columns-for-cost-functions">Return columns for cost functions</a></li>
<li><a class="reference internal" href="#return-columns-for-flow-functions">Return columns for flow functions</a></li>
<li><a class="reference internal" href="#return-columns-for-spanning-tree-functions">Return columns for spanning tree functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-topics">Advanced Topics</a><ul>
<li><a class="reference internal" href="#routing-topology">Routing Topology</a></li>
<li><a class="reference internal" href="#graph-analytics">Graph Analytics</a></li>
<li><a class="reference internal" href="#analyze-a-graph">Analyze a Graph</a></li>
<li><a class="reference internal" href="#analyze-one-way-streets">Analyze One Way Streets</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#performance-tips">Performance Tips</a><ul>
<li><a class="reference internal" href="#for-the-routing-functions">For the Routing functions</a></li>
<li><a class="reference internal" href="#for-the-topology-functions">For the topology functions:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-contribute">How to contribute</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="sampledata.html" title="Previous Chapter: Sample Data"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Sample Data</span>
    </a>
  </li>
  <li>
    <a href="routingFunctions.html" title="Next Chapter: Function Families"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Function Families &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p><strong>Supported versions:</strong>
<a class="reference external" href="https://docs.pgrouting.org/latest/en/pgRouting-concepts.html">Latest</a>
(<a class="reference external" href="https://docs.pgrouting.org/3.3/en/pgRouting-concepts.html">3.3</a>)
<a class="reference external" href="https://docs.pgrouting.org/3.2/en/pgRouting-concepts.html">3.2</a>
<a class="reference external" href="https://docs.pgrouting.org/3.1/en/pgRouting-concepts.html">3.1</a>
<a class="reference external" href="https://docs.pgrouting.org/3.0/en/pgRouting-concepts.html">3.0</a></p></li>
<li><p><strong>Unsupported versions:</strong>
<a class="reference external" href="https://docs.pgrouting.org/2.6/en/pgRouting-concepts.html">2.6</a>
<a class="reference external" href="https://docs.pgrouting.org/2.5/en/pgRouting-concepts.html">2.5</a>
<a class="reference external" href="https://docs.pgrouting.org/2.4/en/pgRouting-concepts.html">2.4</a>
<a class="reference external" href="https://docs.pgrouting.org/2.3/en/doc/src/tutorial/index.html">2.3</a>
<a class="reference external" href="https://docs.pgrouting.org/2.2/en/doc/src/tutorial/index.html">2.2</a>
<a class="reference external" href="https://docs.pgrouting.org/2.1/en/doc/src/tutorial/index.html">2.1</a>
<a class="reference external" href="https://docs.pgrouting.org/2.0/en/doc/src/tutorial/index.html">2.0</a></p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="pgrouting-concepts">
<h1><a class="toc-backref" href="#id8">pgRouting Concepts</a><a class="headerlink" href="#pgrouting-concepts" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pgrouting-concepts" id="id8">pgRouting Concepts</a></p>
<ul>
<li><p><a class="reference internal" href="#getting-started" id="id9">Getting Started</a></p>
<ul>
<li><p><a class="reference internal" href="#create-a-routing-database" id="id10">Create a routing Database</a></p></li>
<li><p><a class="reference internal" href="#load-data" id="id11">Load Data</a></p></li>
<li><p><a class="reference internal" href="#build-a-routing-topology" id="id12">Build a Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#check-the-routing-topology" id="id13">Check the Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#compute-a-path" id="id14">Compute a Path</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#group-of-functions" id="id15">Group of Functions</a></p>
<ul>
<li><p><a class="reference internal" href="#one-to-one" id="id16">One to One</a></p></li>
<li><p><a class="reference internal" href="#one-to-many" id="id17">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-one" id="id18">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many" id="id19">Many to Many</a></p></li>
<li><p><a class="reference internal" href="#combinations" id="id20">Combinations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inner-queries" id="id21">Inner Queries</a></p>
<ul>
<li><p><a class="reference internal" href="#edges-sql" id="id22">Edges SQL</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id23">General</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id24">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id25">General with (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id26">Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id27">Combinations SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id28">Points SQL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id29">Parameters</a></p></li>
<li><p><a class="reference internal" href="#return-columns" id="id30">Return columns</a></p>
<ul>
<li><p><a class="reference internal" href="#return-columns-for-a-path" id="id31">Return columns for a path</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-multiple-paths" id="id32">Return columns for multiple paths</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-cost-functions" id="id33">Return columns for cost functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-flow-functions" id="id34">Return columns for flow functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-spanning-tree-functions" id="id35">Return columns for spanning tree functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-topics" id="id36">Advanced Topics</a></p>
<ul>
<li><p><a class="reference internal" href="#routing-topology" id="id37">Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#graph-analytics" id="id38">Graph Analytics</a></p></li>
<li><p><a class="reference internal" href="#analyze-a-graph" id="id39">Analyze a Graph</a></p></li>
<li><p><a class="reference internal" href="#analyze-one-way-streets" id="id40">Analyze One Way Streets</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id41">Example</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance-tips" id="id42">Performance Tips</a></p>
<ul>
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id43">For the Routing functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-topology-functions" id="id44">For the topology functions:</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-contribute" id="id45">How to contribute</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="getting-started">
<h2><a class="toc-backref" href="#id9">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>This is a simple guide to walk you through the steps of getting started
with pgRouting. In this guide we will cover:</p>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#create-a-routing-database" id="id46">Create a routing Database</a></p></li>
<li><p><a class="reference internal" href="#load-data" id="id47">Load Data</a></p></li>
<li><p><a class="reference internal" href="#build-a-routing-topology" id="id48">Build a Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#check-the-routing-topology" id="id49">Check the Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#compute-a-path" id="id50">Compute a Path</a></p></li>
</ul>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="create-a-routing-database">
<h3><a class="toc-backref" href="#id46">Create a routing Database</a><a class="headerlink" href="#create-a-routing-database" title="Permalink to this headline">¶</a></h3>
<p>The first thing we need to do is create a database and load pgrouting in
the database. Typically you will create a database for each project. Once
you have a database to work in, your can load your data and build your
application in that database. This makes it easy to move your project
later if you want to to say a production server.</p>
<p>For Postgresql 9.2 and later versions</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>createdb mydatabase
psql mydatabase -c <span class="s2">&quot;create extension postgis&quot;</span>
psql mydatabase -c <span class="s2">&quot;create extension pgrouting&quot;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="load-data">
<h3><a class="toc-backref" href="#id47">Load Data</a><a class="headerlink" href="#load-data" title="Permalink to this headline">¶</a></h3>
<p>There are several ways to load your data into pgRouting. The most direct way
is to load an Open Street Maps (OSM) dataset using <strong>osm2pgrouting</strong>. This is a
tool, integrated in pgRouting project, that loads OSM data into postgresql
with pgRouting requirements, including data structure and routing topology.</p>
<p>If you have other requirements, you can try various OpenSource tools that can
help you, like:</p>
<dl class="field-list simple">
<dt class="field-odd">shp2pgsql</dt>
<dd class="field-odd"><ul class="simple">
<li><p>this is the postgresql shapefile loader</p></li>
</ul>
</dd>
<dt class="field-even">ogr2ogr</dt>
<dd class="field-even"><ul class="simple">
<li><p>this is a vector data conversion utility</p></li>
</ul>
</dd>
<dt class="field-odd">osm2pgsql</dt>
<dd class="field-odd"><ul class="simple">
<li><p>this is a tool for loading OSM data into postgresql</p></li>
</ul>
</dd>
</dl>
<p>Please note that these tools will not import the data in a structure compatible
with pgRouting and you might need to adapt it.</p>
<p>These tools and probably others will allow you to read vector data so that
you may then load that data into your database as a table of some kind. At this
point you need to know a little about your data structure and content. One easy
way to browse your new data table is with pgAdmin or phpPgAdmin.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="build-a-routing-topology">
<h3><a class="toc-backref" href="#id48">Build a Routing Topology</a><a class="headerlink" href="#build-a-routing-topology" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>this step is not needed if data is loaded with <cite>osm2pgrouting</cite></p>
</div>
<p>Next we need to build a topology for our street data. What this means is that
for any given edge in your street data the ends of that edge will be connected
to a unique node and to other edges that are also connected to that same unique
node. Once all the edges are connected to nodes we have a graph that can be
used for routing with pgrouting. We provide a tool that will help with this:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">pgr_createTopology</span><span class="p">(</span><span class="s1">&#39;myroads&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">000001</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>where you should replace ‘myroads’ with the name of your table storing the edges.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_createTopology.html"><span class="doc">pgr_createTopology</span></a></p></li>
</ul>
</section>
<section id="check-the-routing-topology">
<h3><a class="toc-backref" href="#id49">Check the Routing Topology</a><a class="headerlink" href="#check-the-routing-topology" title="Permalink to this headline">¶</a></h3>
<p>There are lots of possible sources for errors in a graph. The data that you
started with may not have been designed with routing in mind. A graph has some
very specific requirements. One is that it is <em>NODED</em>, this means that except
for some very specific use cases, each road segment starts and ends at a node
and that in general is does not cross another road segment that it should be
connected to.</p>
<p>There can be other errors like the direction of a one-way street being entered
in the wrong direction. We do not have tools to search for all possible errors
but we have some basic tools that might help.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">pgr_analyzegraph</span><span class="p">(</span><span class="s1">&#39;myroads&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">000001</span><span class="p">);</span><span class="w"></span>
<span class="k">select</span><span class="w"> </span><span class="n">pgr_analyzeoneway</span><span class="p">(</span><span class="s1">&#39;myroads&#39;</span><span class="p">,</span><span class="w">  </span><span class="n">s_in_rules</span><span class="p">,</span><span class="w"> </span><span class="n">s_out_rules</span><span class="p">,</span><span class="w"></span>
<span class="w">                                     </span><span class="n">t_in_rules</span><span class="p">,</span><span class="w"> </span><span class="n">t_out_rules</span><span class="w"></span>
<span class="w">                                     </span><span class="n">direction</span><span class="p">)</span><span class="w"></span>
<span class="k">select</span><span class="w"> </span><span class="n">pgr_nodeNetwork</span><span class="p">(</span><span class="s1">&#39;myroads&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">001</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>where you should replace ‘myroads’ with the name of your table storing the edges
(‘ways’, in case you used osm2pgrouting to import the data).</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_analyzeGraph.html"><span class="doc">pgr_analyzeGraph</span></a></p></li>
<li><p><a class="reference internal" href="pgr_analyzeOneWay.html"><span class="doc">pgr_analyzeOneWay</span></a></p></li>
<li><p><a class="reference internal" href="pgr_nodeNetwork.html"><span class="doc">pgr_nodeNetwork</span></a></p></li>
</ul>
</section>
<section id="compute-a-path">
<h3><a class="toc-backref" href="#id50">Compute a Path</a><a class="headerlink" href="#compute-a-path" title="Permalink to this headline">¶</a></h3>
<p>Once you have all the preparation work done above, computing a route is fairly easy.
We have a lot of different algorithms that can work with your prepared road
network. The general form of a route query using Dijkstra algorithm is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>select pgr_dijkstra(`SELECT * FROM myroads&#39;, &lt;start&gt;, &lt;end&gt;)
</pre></div>
</div>
<p>This algorithm only requires <em>id</em>, <em>source</em>, <em>target</em> and <em>cost</em> as the minimal attributes, that by
default will be considered to be columns in your roads table. If the column names in your
roads table do not match exactly the names of these attributes, you can use aliases. For example,
if you imported OSM data using <strong>osm2pgrouting</strong>, your id column’s name would be <em>gid</em> and your
roads table would be <em>ways</em>, so you would query a route from node id 1 to node id 2 by typing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>select pgr_dijkstra(&#39;SELECT gid AS id, source, target, cost FROM ways&#39;, 1, 2)
</pre></div>
</div>
<p>As you can see this is fairly straight forward and it also allows for great flexibility, both in terms
of database structure and in defining cost functions. You can test the previous query
using <em>length_m AS cost</em> to compute the shortest path in meters or <em>cost_s / 60 AS cost</em> to compute
the fastest path in minutes.</p>
<p>You can look and the specific algorithms for the details of the signatures and how
to use them. These results have information like edge id and/or the
node id along with the cost or geometry for the step in the path from <em>start</em>
to <em>end</em>. Using the ids you can join these result back to your edge table
to get more information about each step in the path.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a></p></li>
</ul>
</section>
</section>
<section id="group-of-functions">
<h2><a class="toc-backref" href="#id15">Group of Functions</a><a class="headerlink" href="#group-of-functions" title="Permalink to this headline">¶</a></h2>
<p>A function might have different overloads.
Across this documentation, to indicate which overload we use the following terms:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-one">One to One</a></p></li>
<li><p><a class="reference internal" href="#one-to-many">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-one">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
<li><p><a class="reference internal" href="#combinations">Combinations</a></p></li>
</ul>
<p>Depending on the overload are the parameters used, keeping consistency across
all functions.</p>
<section id="one-to-one">
<h3><a class="toc-backref" href="#id16">One to One</a><a class="headerlink" href="#one-to-one" title="Permalink to this headline">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>one</strong> starting vertex</p></li>
<li><p>to <strong>one</strong> ending vertex</p></li>
</ul>
</section>
<section id="one-to-many">
<h3><a class="toc-backref" href="#id17">One to Many</a><a class="headerlink" href="#one-to-many" title="Permalink to this headline">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>one</strong> starting vertex</p></li>
<li><p>to <strong>many</strong> ending vertices</p></li>
</ul>
</section>
<section id="many-to-one">
<h3><a class="toc-backref" href="#id18">Many to One</a><a class="headerlink" href="#many-to-one" title="Permalink to this headline">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>many</strong> starting vertices</p></li>
<li><p>to <strong>one</strong> ending vertex</p></li>
</ul>
</section>
<section id="many-to-many">
<h3><a class="toc-backref" href="#id19">Many to Many</a><a class="headerlink" href="#many-to-many" title="Permalink to this headline">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>many</strong> starting vertices</p></li>
<li><p>to <strong>many</strong> ending vertices</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="combinations">
<h3><a class="toc-backref" href="#id20">Combinations</a><a class="headerlink" href="#combinations" title="Permalink to this headline">¶</a></h3>
<p>When routing from:</p>
<ul class="simple">
<li><p>From <strong>many</strong> different starting vertices</p></li>
<li><p>to <strong>many</strong> different ending vertices</p></li>
<li><p>Every tuple specifies a pair of a start vertex and an end vertex</p></li>
<li><p>Users can define the combinations as desired.</p></li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
</section>
<section id="inner-queries">
<h2><a class="toc-backref" href="#id21">Inner Queries</a><a class="headerlink" href="#inner-queries" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="id2">
<ul class="simple">
<li><p><a class="reference internal" href="#edges-sql" id="id51">Edges SQL</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id52">General</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id53">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id54">General with (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id55">Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id56">Combinations SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id57">Points SQL</a></p></li>
</ul>
</div>
<p>There are several kinds of valid inner queries and also the columns returned are depending of the function.
Which kind of inner query will depend on the function(s) requirements.
To simplify variety of types, <strong>ANY-INTEGER</strong> and <strong>ANY-NUMERICAL</strong> is used.</p>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER</dt>
<dd class="field-odd"><p>SMALLINT, INTEGER, BIGINT</p>
</dd>
<dt class="field-even">ANY-NUMERICAL</dt>
<dd class="field-even"><p>SMALLINT, INTEGER, BIGINT, REAL, FLOAT</p>
</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="edges-sql">
<h3><a class="toc-backref" href="#id51">Edges SQL</a><a class="headerlink" href="#edges-sql" title="Permalink to this headline">¶</a></h3>
<section id="general">
<h4><a class="toc-backref" href="#id52">General</a><a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="dijkstra-family.html"><span class="doc">Dijkstra - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="bdDijkstra-family.html"><span class="doc">Bidirectional Dijkstra - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="components-family.html"><span class="doc">Components - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="kruskal-family.html"><span class="doc">Kruskal - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="prim-family.html"><span class="doc">Prim - Family of functions</span></a></p></li>
<li><p>Some uncategorized functions</p></li>
</ul>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="general-without-id">
<h4><a class="toc-backref" href="#id53">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a><a class="headerlink" href="#general-without-id" title="Permalink to this headline">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="allpairs-family.html"><span class="doc">All Pairs - Family of Functions</span></a></p></li>
</ul>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="general-with-x-y">
<h4><a class="toc-backref" href="#id54">General with (X,Y)</a><a class="headerlink" href="#general-with-x-y" title="Permalink to this headline">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="aStar-family.html"><span class="doc">aStar - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="bdAstar-family.html"><span class="doc">Bidirectional A* - Family of functions</span></a></p></li>
</ul>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 16%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>),</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x1</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>X coordinate of <code class="docutils literal notranslate"><span class="pre">source</span></code> vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y1</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Y coordinate of <code class="docutils literal notranslate"><span class="pre">source</span></code> vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x2</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>X coordinate of <code class="docutils literal notranslate"><span class="pre">target</span></code> vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y2</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Y coordinate of <code class="docutils literal notranslate"><span class="pre">target</span></code> vertex.</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="flow">
<h4><a class="toc-backref" href="#id55">Flow</a><a class="headerlink" href="#flow" title="Permalink to this headline">¶</a></h4>
<p class="rubric">Edges SQL for <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a></p>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_pushRelabel.html"><span class="doc">pgr_pushRelabel</span></a></p></li>
<li><p><a class="reference internal" href="pgr_edmondsKarp.html"><span class="doc">pgr_edmondsKarp</span></a></p></li>
<li><p><a class="reference internal" href="pgr_boykovKolmogorov.html"><span class="doc">pgr_boykovKolmogorov</span></a></p></li>
</ul>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
<p class="rubric">Edges SQL for the following functions of <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a></p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_maxFlowMinCost.html"><span class="doc">pgr_maxFlowMinCost - Experimental</span></a></p></li>
<li><p><a class="reference internal" href="pgr_maxFlowMinCost_Cost.html"><span class="doc">pgr_maxFlowMinCost_Cost - Experimental</span></a></p></li>
</ul>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Capacity of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>-1</p></td>
<td><p>Capacity of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>) if it exist</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(-1\)</span></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) if it exist</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="combinations-sql">
<h3><a class="toc-backref" href="#id56">Combinations SQL</a><a class="headerlink" href="#combinations-sql" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Used on combination signatures</p>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the departure vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the arrival vertex.</p></td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
</dl>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="points-sql">
<h3><a class="toc-backref" href="#id57">Points SQL</a><a class="headerlink" href="#points-sql" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Points SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Family of functions</span></a></p></li>
</ul>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 16%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pid</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p><strong>value</strong></p></td>
<td><p>Identifier of the point.</p>
<ul class="simple">
<li><p>Use with positive value, as internally will be converted to negative
value</p></li>
<li><p>If column is present, it can not be NULL.</p></li>
<li><p>If column is not present, a sequential negative <strong>value</strong> will be given
automatically.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge_id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifier of the “closest” edge to the point.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fraction</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Value in &lt;0,1&gt; that indicates the relative postition from the first end
point of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">side</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHAR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>Value in [<code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">l</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code>] indicating if the point is:</p>
<ul class="simple">
<li><p>In the right <code class="docutils literal notranslate"><span class="pre">r</span></code>,</p></li>
<li><p>In the left <code class="docutils literal notranslate"><span class="pre">l</span></code>,</p></li>
<li><p>In both sides <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id29">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>The main parameter of the majority of the pgRouting functions is a query that
selects the edges of the graph.</p>
<table class="colwidths-auto docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Edges SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#edges-sql">Edges SQL</a> as described below.</p></td>
</tr>
</tbody>
</table>
<p>Depending on the family or category of a function it will have additional
parameters, some of them are compulsory and some are optional.</p>
<p>The compulsory parameters are nameless and must be given in the required order.
The optional parameters are named parameters and will have a default value.</p>
<p class="rubric">Parameters for the Via functions</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstraVia.html"><span class="doc">pgr_dijkstraVia - Proposed</span></a></p></li>
</ul>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17%" />
<col style="width: 25%" />
<col style="width: 9%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Edges SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td></td>
<td><p>SQL query as described.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>via vertices</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td></td>
<td><p>Array of ordered vertices identifiers that are going to be visited.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directed</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code> Graph is considered <cite>Directed</cite></p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">false</span></code> the graph is considered as Undirected.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">strict</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code> if a path is missing stops and returns <strong>EMPTY SET</strong></p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">false</span></code> ignores missing paths returning all paths found</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">U_turn_on_edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code> departing from a visited vertex will not try to avoid
using the edge used to reach it.  In other words, U turn using the edge
with same identifier is allowed.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">false</span></code> when a departing from a visited vertex tries to avoid
using the edge used to reach it.  In other words, U turn using the edge
with same identifier is used when no other path is found.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="return-columns">
<h2><a class="toc-backref" href="#id30">Return columns</a><a class="headerlink" href="#return-columns" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="id3">
<ul class="simple">
<li><p><a class="reference internal" href="#return-columns-for-a-path" id="id58">Return columns for a path</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-multiple-paths" id="id59">Return columns for multiple paths</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-cost-functions" id="id60">Return columns for cost functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-flow-functions" id="id61">Return columns for flow functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-spanning-tree-functions" id="id62">Return columns for spanning tree functions</a></p></li>
</ul>
</div>
<p>There are several kinds of columns returned are depending of the function.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<section id="return-columns-for-a-path">
<h3><a class="toc-backref" href="#id58">Return columns for a path</a><a class="headerlink" href="#return-columns-for-a-path" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Used on functions that return one path solution</p>
<p>Returns set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_vid]</span> <span class="pre">[,</span> <span class="pre">end_vid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path. Has value <strong>1</strong> for the beginning of a path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex.
Returned when multiple starting vetrices are in the query.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#many-to-one">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex.
Returned when multiple ending vertices are in the query.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-many">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Used on functions the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Proposed</span></a></p></li>
</ul>
<p>Returns set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_pid]</span> <span class="pre">[,</span> <span class="pre">end_pid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path.</p>
<ul class="simple">
<li><p><strong>1</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_pid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of a starting vertex/point of the path.</p>
<ul class="simple">
<li><p>When positive is the identifier of the starting vertex.</p></li>
<li><p>When negative is the identifier of the starting point.</p></li>
<li><p>Returned on <a class="reference internal" href="#many-to-one">Many to One</a>  and <a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_pid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of an ending vertex/point of the path.</p>
<ul class="simple">
<li><p>When positive is the identifier of the ending vertex.</p></li>
<li><p>When negative is the identifier of the ending point.</p></li>
<li><p>Returned on <a class="reference internal" href="#one-to-many">One to Many</a> and <a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_pid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_pid</span></code>.</p>
<ul class="simple">
<li><p>When positive is the identifier of the a vertex.</p></li>
<li><p>When negative is the identifier of the a point.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence.</p>
<ul class="simple">
<li><p><strong>-1</strong> for the last row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p>
<ul class="simple">
<li><p><strong>0</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
<ul class="simple">
<li><p><strong>0</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Used on functions the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstraNear.html"><span class="doc">pgr_dijkstraNear - Proposed</span></a></p></li>
</ul>
<p>Returns set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq,</span> <span class="pre">start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span> <span class="pre">agg_cost)</span></code></p>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path. Has value <strong>1</strong> for the beginning of a path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex of the current path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex of the current path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="return-columns-for-multiple-paths">
<h3><a class="toc-backref" href="#id59">Return columns for multiple paths</a><a class="headerlink" href="#return-columns-for-multiple-paths" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Used on functions that return many paths solutions</p>
<p>Set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_id,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_vid]</span> <span class="pre">[,</span> <span class="pre">end_vid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Path identifier.</p>
<ul class="simple">
<li><p>Has value <strong>1</strong> for the first of a path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path. Has value <strong>1</strong> for the beginning of a path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex.
Returned when multiple starting vetrices are in the query.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#many-to-one">Many to One</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex.
Returned when multiple ending vertices are in the query.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-many">One to Many</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse from <code class="docutils literal notranslate"><span class="pre">node</span></code> using <code class="docutils literal notranslate"><span class="pre">edge</span></code> to the next node in the
path sequence.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="return-columns-for-cost-functions">
<h3><a class="toc-backref" href="#id60">Return columns for cost functions</a><a class="headerlink" href="#return-columns-for-cost-functions" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Used in the following</p>
<ul class="simple">
<li><p>Cost functions</p></li>
<li><p><a class="reference internal" href="costMatrix-category.html"><span class="doc">Cost Matrix - Category</span></a></p></li>
<li><p><a class="reference internal" href="allpairs-family.html"><span class="doc">All Pairs - Family of Functions</span></a></p></li>
</ul>
<p>Set of <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">agg_cost)</span></code></p>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Used in the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_withPointsCost.html"><span class="doc">pgr_withPointsCost - Proposed</span></a></p></li>
</ul>
<p>Set of <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">agg_cost)</span></code></p>
<table class="colwidths-given docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex or point.</p>
<ul class="simple">
<li><p>When positive: is a vertex’s identifier.</p></li>
<li><p>When negative: is a point’s identifier.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex or point.</p>
<ul class="simple">
<li><p>When positive: is a vertex’s identifier.</p></li>
<li><p>When negative: is a point’s identifier.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="return-columns-for-flow-functions">
<h3><a class="toc-backref" href="#id61">Return columns for flow functions</a><a class="headerlink" href="#return-columns-for-flow-functions" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Edges SQL for the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 17%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>seq</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>edge</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge in the original query(edges_sql).</p></td>
</tr>
<tr class="row-even"><td><p><strong>start_vid</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>end_vid</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><strong>flow</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Flow through the edge in the direction (<code class="docutils literal notranslate"><span class="pre">start_vid</span></code>, <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>residual_capacity</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Residual capacity of the edge in the direction (<code class="docutils literal notranslate"><span class="pre">start_vid</span></code>, <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>).</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Edges SQL for the following functions of <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Family of functions</span></a></p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_maxFlowMinCost.html"><span class="doc">pgr_maxFlowMinCost - Experimental</span></a></p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 16%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>seq</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Sequential value starting from <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>edge</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge in the original query(edges_sql).</p></td>
</tr>
<tr class="row-even"><td><p><strong>source</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the first end point vertex of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>target</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the second end point vertex of the edge.</p></td>
</tr>
<tr class="row-even"><td><p><strong>flow</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Flow through the edge in the direction (source, target).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>residual_capacity</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Residual capacity of the edge in the direction (source, target).</p></td>
</tr>
<tr class="row-even"><td><p><strong>cost</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>The cost of sending this flow through the edge in the direction (source, target).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>agg_cost</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>The aggregate cost.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="return-columns-for-spanning-tree-functions">
<h3><a class="toc-backref" href="#id62">Return columns for spanning tree functions</a><a class="headerlink" href="#return-columns-for-spanning-tree-functions" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Edges SQL for the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_prim.html"><span class="doc">pgr_prim</span></a></p></li>
<li><p><a class="reference internal" href="pgr_kruskal.html"><span class="doc">pgr_kruskal</span></a></p></li>
</ul>
<p>Returns SET OF <code class="docutils literal notranslate"><span class="pre">(edge,</span> <span class="pre">cost)</span></code></p>
<table class="colwidths-auto docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse the edge.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="advanced-topics">
<h2><a class="toc-backref" href="#id36">Advanced Topics</a><a class="headerlink" href="#advanced-topics" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="id4">
<ul class="simple">
<li><p><a class="reference internal" href="#routing-topology" id="id63">Routing Topology</a></p></li>
<li><p><a class="reference internal" href="#graph-analytics" id="id64">Graph Analytics</a></p></li>
<li><p><a class="reference internal" href="#analyze-a-graph" id="id65">Analyze a Graph</a></p></li>
<li><p><a class="reference internal" href="#analyze-one-way-streets" id="id66">Analyze One Way Streets</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id67">Example</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="routing-topology">
<span id="topology"></span><h3><a class="toc-backref" href="#id63">Routing Topology</a><a class="headerlink" href="#routing-topology" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Overview</p>
<p>Typically when GIS files are loaded into the data database for use with pgRouting they do not have topology information associated with them. To create a useful topology the data needs to be “noded”. This means that where two or more roads form an intersection there it needs to be a node at the intersection and all the road segments need to be broken at the intersection, assuming that you can navigate from any of these segments to any other segment via that intersection.</p>
<p>You can use the <a class="reference internal" href="#analytics"><span class="std std-ref">graph analysis functions</span></a> to help you see where you might have topology problems in your data. If you need to node your data, we also have a function <a class="reference internal" href="pgr_nodeNetwork.html"><span class="doc">pgr_nodeNetwork()</span></a> that might work for you. This function splits ALL crossing segments and nodes them. There are some cases where this might NOT be the right thing to do.</p>
<p>For example, when you have an overpass and underpass intersection, you do not want these noded, but pgr_nodeNetwork does not know that is the case and will node them which is not good because then the router will be able to turn off the overpass onto the underpass like it was a flat 2D intersection. To deal with this problem some data sets use z-levels at these types of intersections and other data might not node these intersection which would be ok.</p>
<p>For those cases where topology needs to be added the following functions may be useful. One way to prep the data for pgRouting is to add the following columns to your table and then populate them as appropriate. This example makes a lot of assumption like that you original data tables already has certain columns in it like <code class="docutils literal notranslate"><span class="pre">one_way</span></code>, <code class="docutils literal notranslate"><span class="pre">fcc</span></code>, and possibly others and that they contain specific data values. This is only to give you an idea of what you can do with your data.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">edge_table</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="k">source</span><span class="w"> </span><span class="nb">integer</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="nb">integer</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">cost_len</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">cost_time</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">rcost_len</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">rcost_time</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">y1</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">x2</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">y2</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">to_cost</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="k">precision</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="k">rule</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">isolated</span><span class="w"> </span><span class="nb">integer</span><span class="p">;</span><span class="w"></span>

<span class="k">SELECT</span><span class="w"> </span><span class="n">pgr_createTopology</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">000001</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;the_geom&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;id&#39;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The function <a class="reference internal" href="pgr_createTopology.html"><span class="doc">pgr_createTopology</span></a> will create the <code class="docutils literal notranslate"><span class="pre">vertices_tmp</span></code> table and populate the <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">target</span></code> columns. The following example populated the remaining columns. In this example, the <code class="docutils literal notranslate"><span class="pre">fcc</span></code> column contains feature class code and the <code class="docutils literal notranslate"><span class="pre">CASE</span></code> statements converts it to an average speed.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span><span class="w"> </span><span class="n">edge_table</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_x</span><span class="p">(</span><span class="n">st_startpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span><span class="w"></span>
<span class="w">                      </span><span class="n">y1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_y</span><span class="p">(</span><span class="n">st_startpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span><span class="w"></span>
<span class="w">                      </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_x</span><span class="p">(</span><span class="n">st_endpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span><span class="w"></span>
<span class="w">                      </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_y</span><span class="p">(</span><span class="n">st_endpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span><span class="w"></span>
<span class="w">  </span><span class="n">cost_len</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">rcost_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">len_km</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">len_miles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">)</span><span class="w"></span>
<span class="w">              </span><span class="o">/</span><span class="w"> </span><span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">6213712</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">speed_mph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A10&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">65</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A15&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">65</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A20&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">55</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A25&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">55</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A30&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">45</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A35&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">45</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A40&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">35</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A45&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">35</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A50&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">25</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A60&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">25</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A61&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">25</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A62&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">25</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A64&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">25</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A70&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">15</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A69&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">10</span><span class="w"></span>
<span class="w">                   </span><span class="k">ELSE</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">END</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">speed_kmh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A10&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">104</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A15&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">104</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A20&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">88</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A25&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">88</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A30&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">72</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A35&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">72</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A40&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">56</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A45&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">56</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A50&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">40</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A60&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">50</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A61&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">40</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A62&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">40</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A64&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">40</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A70&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">25</span><span class="w"></span>
<span class="w">                   </span><span class="k">WHEN</span><span class="w"> </span><span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A69&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">15</span><span class="w"></span>
<span class="w">                   </span><span class="k">ELSE</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">END</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- UPDATE the cost information based on oneway streets</span>

<span class="k">UPDATE</span><span class="w"> </span><span class="n">edge_table</span><span class="w"> </span><span class="k">SET</span><span class="w"></span>
<span class="w">    </span><span class="n">cost_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">CASE</span><span class="w"></span>
<span class="w">        </span><span class="k">WHEN</span><span class="w"> </span><span class="n">one_way</span><span class="o">=</span><span class="s1">&#39;TF&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">10000</span><span class="p">.</span><span class="mi">0</span><span class="w"></span>
<span class="w">        </span><span class="k">ELSE</span><span class="w"> </span><span class="n">cost_len</span><span class="o">/</span><span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span><span class="n">speed_kmh</span><span class="p">::</span><span class="nb">numeric</span><span class="o">*</span><span class="mi">3600</span><span class="p">.</span><span class="mi">0</span><span class="w"></span>
<span class="w">        </span><span class="k">END</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">rcost_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">CASE</span><span class="w"></span>
<span class="w">        </span><span class="k">WHEN</span><span class="w"> </span><span class="n">one_way</span><span class="o">=</span><span class="s1">&#39;FT&#39;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="mi">10000</span><span class="p">.</span><span class="mi">0</span><span class="w"></span>
<span class="w">        </span><span class="k">ELSE</span><span class="w"> </span><span class="n">cost_len</span><span class="o">/</span><span class="mi">1000</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span><span class="n">speed_kmh</span><span class="p">::</span><span class="nb">numeric</span><span class="o">*</span><span class="mi">3600</span><span class="p">.</span><span class="mi">0</span><span class="w"></span>
<span class="w">        </span><span class="k">END</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- clean up the database because we have updated a lot of records</span>

<span class="k">VACUUM</span><span class="w"> </span><span class="k">ANALYZE</span><span class="w"> </span><span class="k">VERBOSE</span><span class="w"> </span><span class="n">edge_table</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Now your database should be ready to use any (most?) of the pgRouting algorithms.</p>
</section>
<section id="graph-analytics">
<span id="analytics"></span><h3><a class="toc-backref" href="#id64">Graph Analytics</a><a class="headerlink" href="#graph-analytics" title="Permalink to this headline">¶</a></h3>
<p class="rubric">Overview</p>
<p>It is common to find problems with graphs that have not been constructed fully noded or in graphs with z-levels at intersection that have been entered incorrectly. An other problem is one way streets that have been entered in the wrong direction. We can not detect errors with respect to “ground” truth, but we can look for inconsistencies and some anomalies in a graph and report them for additional inspections.</p>
<p>We do not current have any visualization tools for these problems, but I have used mapserver to render the graph and highlight potential problem areas. Someone familiar with graphviz might contribute tools for generating images with that.</p>
</section>
<section id="analyze-a-graph">
<h3><a class="toc-backref" href="#id65">Analyze a Graph</a><a class="headerlink" href="#analyze-a-graph" title="Permalink to this headline">¶</a></h3>
<p>With <a class="reference internal" href="pgr_analyzeGraph.html"><span class="doc">pgr_analyzeGraph</span></a> the graph can be checked for errors. For example for table “mytab” that has “mytab_vertices_pgr” as the vertices table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">pgr_analyzeGraph</span><span class="p">(</span><span class="s1">&#39;mytab&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">.</span><span class="mi">000002</span><span class="p">);</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">  </span><span class="n">Performing</span><span class="w"> </span><span class="n">checks</span><span class="p">,</span><span class="w"> </span><span class="n">pelase</span><span class="w"> </span><span class="n">wait</span><span class="p">...</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">  </span><span class="n">Analyzing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">dead</span><span class="w"> </span><span class="n">ends</span><span class="p">.</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">wait</span><span class="p">...</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">  </span><span class="n">Analyzing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">gaps</span><span class="p">.</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">wait</span><span class="p">...</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">  </span><span class="n">Analyzing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">isolated</span><span class="w"> </span><span class="n">edges</span><span class="p">.</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">wait</span><span class="p">...</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">  </span><span class="n">Analyzing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">ring</span><span class="w"> </span><span class="n">geometries</span><span class="p">.</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">wait</span><span class="p">...</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">  </span><span class="n">Analyzing</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">intersections</span><span class="p">.</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">wait</span><span class="p">...</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">              </span><span class="n">ANALYSIS</span><span class="w"> </span><span class="n">RESULTS</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="n">SELECTED</span><span class="w"> </span><span class="n">EDGES</span><span class="p">:</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">                    </span><span class="n">Isolated</span><span class="w"> </span><span class="n">segments</span><span class="p">:</span><span class="w"> </span><span class="mi">158</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">                            </span><span class="n">Dead</span><span class="w"> </span><span class="n">ends</span><span class="p">:</span><span class="w"> </span><span class="mi">20028</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">  </span><span class="n">Potential</span><span class="w"> </span><span class="n">gaps</span><span class="w"> </span><span class="k">found</span><span class="w"> </span><span class="n">near</span><span class="w"> </span><span class="n">dead</span><span class="w"> </span><span class="n">ends</span><span class="p">:</span><span class="w"> </span><span class="mi">527</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">               </span><span class="n">Intersections</span><span class="w"> </span><span class="n">detected</span><span class="p">:</span><span class="w"> </span><span class="mi">2560</span><span class="w"></span>
<span class="n">NOTICE</span><span class="p">:</span><span class="w">                      </span><span class="n">Ring</span><span class="w"> </span><span class="n">geometries</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="n">pgr_analyzeGraph</span><span class="w"></span>
<span class="c1">----------</span>
<span class="w">   </span><span class="n">OK</span><span class="w"></span>
<span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>In the vertices table “mytab_vertices_pgr”:</p>
<ul class="simple">
<li><p>Deadends are identified by <code class="docutils literal notranslate"><span class="pre">cnt=1</span></code></p></li>
<li><p>Potencial gap problems are identified with <code class="docutils literal notranslate"><span class="pre">chk=1</span></code>.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">deadends</span><span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">mytab_vertices_pgr</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">cnt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="n">deadends</span><span class="w"></span>
<span class="c1">----------</span>
<span class="w">    </span><span class="mi">20028</span><span class="w"></span>
<span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="p">)</span><span class="w"></span>

<span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">gaps</span><span class="w">  </span><span class="k">FROM</span><span class="w"> </span><span class="n">mytab_vertices_pgr</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">chk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="n">gaps</span><span class="w"></span>
<span class="w"> </span><span class="c1">-----</span>
<span class="w">   </span><span class="mi">527</span><span class="w"></span>
<span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>For isolated road segments, for example, a segment where both ends are deadends. you can find these with the following query:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"></span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">mytab</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">mytab_vertices_pgr</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">mytab_vertices_pgr</span><span class="w"> </span><span class="k">c</span><span class="w"></span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="k">source</span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">cnt</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">target</span><span class="o">=</span><span class="k">c</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cnt</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>If you want to visualize these on a graphic image, then you can use something like mapserver to render the edges and the vertices and style based on <code class="docutils literal notranslate"><span class="pre">cnt</span></code> or if they are isolated, etc. You can also do this with a tool like graphviz, or geoserver or other similar tools.</p>
</section>
<section id="analyze-one-way-streets">
<h3><a class="toc-backref" href="#id66">Analyze One Way Streets</a><a class="headerlink" href="#analyze-one-way-streets" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="pgr_analyzeOneWay.html"><span class="doc">pgr_analyzeOneWay</span></a> analyzes one way streets in a graph and identifies any flipped segments. Basically if you count the edges coming into a node and the edges exiting a node the number has to be greater than one.</p>
<p>This query will add two columns to the vertices_tmp table <code class="docutils literal notranslate"><span class="pre">ein</span> <span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">eout</span> <span class="pre">int</span></code> and populate it with the appropriate counts. After running this on a graph you can identify nodes with potential problems with the following query.</p>
<p>The rules are defined as an array of text strings that if match the <code class="docutils literal notranslate"><span class="pre">col</span></code> value would be counted as true for the source or target in or out condition.</p>
<section id="example">
<h4><a class="toc-backref" href="#id67">Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>Lets assume we have a table “st” of edges and a column “one_way” that might have values like:</p>
<ul class="simple">
<li><p>‘FT’    - oneway from the source to the target node.</p></li>
<li><p>‘TF’    - oneway from the target to the source node.</p></li>
<li><p>‘B’     - two way street.</p></li>
<li><p>‘’      - empty field, assume twoway.</p></li>
<li><p>&lt;NULL&gt;  - NULL field, use two_way_if_null flag.</p></li>
</ul>
<p>Then we could form the following query to analyze the oneway streets for errors.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">pgr_analyzeOneway</span><span class="p">(</span><span class="s1">&#39;mytab&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;TF&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;FT&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;FT&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;TF&#39;</span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="p">);</span><span class="w"></span>

<span class="c1">-- now we can see the problem nodes</span>
<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">mytab_vertices_pgr</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">ein</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">eout</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- and the problem edges connected to those nodes</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">gid</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">mytab</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">mytab_vertices_pgr</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="k">source</span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">ein</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">eout</span><span class="o">=</span><span class="mi">0</span><span class="w"></span>
<span class="k">UNION</span><span class="w"></span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">gid</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">mytab</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">mytab_vertices_pgr</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">target</span><span class="o">=</span><span class="n">b</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">ein</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">eout</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Typically these problems are generated by a break in the network, the one way direction set wrong, maybe an error related to z-levels or a network that is not properly noded.</p>
<p>The above tools do not detect all network issues, but they will identify some common problems. There are other problems that are hard to detect because they are more global in nature like multiple disconnected networks. Think of an island with a road network that is not connected to the mainland network because the bridge or ferry routes are missing.</p>
</section>
</section>
</section>
<section id="performance-tips">
<span id="performance"></span><h2><a class="toc-backref" href="#id42">Performance Tips</a><a class="headerlink" href="#performance-tips" title="Permalink to this headline">¶</a></h2>
<div class="contents local topic" id="id5">
<ul class="simple">
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id68">For the Routing functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-topology-functions" id="id69">For the topology functions:</a></p></li>
</ul>
</div>
<section id="for-the-routing-functions">
<h3><a class="toc-backref" href="#id68">For the Routing functions</a><a class="headerlink" href="#for-the-routing-functions" title="Permalink to this headline">¶</a></h3>
<p>To get faster results bound your queries to the area of interest of routing to have, for example, no more than one million rows.</p>
<p>Use an inner query SQL that does not include some edges in the routing function</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="k">source</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">edge_table</span><span class="w"> </span><span class="k">WHERE</span><span class="w"></span>
<span class="w">        </span><span class="n">id</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">17</span><span class="w"> </span><span class="k">and</span><span class="w"></span>
<span class="w">        </span><span class="n">the_geom</span><span class="w">  </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">st_buffer</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">myarea</span><span class="w"> </span><span class="k">FROM</span><span class="w">  </span><span class="n">edge_table</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>Integrating the inner query to the pgRouting function:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstra</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="s1">&#39;SELECT id, source, target from edge_table WHERE</span>
<span class="s1">            id &lt; 17 and</span>
<span class="s1">            the_geom  &amp;&amp; (select st_buffer(the_geom,1) as myarea FROM  edge_table where id = 5)&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="for-the-topology-functions">
<h3><a class="toc-backref" href="#id69">For the topology functions:</a><a class="headerlink" href="#for-the-topology-functions" title="Permalink to this headline">¶</a></h3>
<p>When “you know” that you are going to remove a set of edges from the edges table, and without those edges you are going to use a routing function you can do the following:</p>
<p>Analize the new topology based on the actual topology:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_analyzegraph</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Or create a new topology if the change is permanent:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_createTopology</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span><span class="w"></span>
<span class="n">pgr_analyzegraph</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="how-to-contribute">
<span id="how-contribute"></span><h2><a class="toc-backref" href="#id45">How to contribute</a><a class="headerlink" href="#how-to-contribute" title="Permalink to this headline">¶</a></h2>
<p class="rubric">Wiki</p>
<ul class="simple">
<li><p>Edit an existing  <a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki">pgRouting Wiki</a> page.</p></li>
<li><p>Or create a new Wiki page</p>
<ul>
<li><p>Create a page on the <a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki">pgRouting Wiki</a></p></li>
<li><p>Give the title an appropriate name</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki/How-to:-Handle-parallel-edges-(KSP)">Example</a></p></li>
</ul>
<p class="rubric">Adding Functionaity to pgRouting</p>
<p>Consult the <a class="reference external" href="https://docs.pgrouting.org/doxy/2.4/index.html">developer’s documentation</a></p>
<p class="rubric">Indices and tables</p>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v3.4.0-dev.<br/>
      Last updated on May 06, 2022.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>