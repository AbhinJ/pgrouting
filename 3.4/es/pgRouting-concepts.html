<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Conceptos de pgRouting &#8212; pgRouting Manual (3.4-dev)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/translations.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="Familias de Funciones" href="routingFunctions.html" />
    <link rel="prev" title="Datos Muestra" href="sampledata.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/pgrouting.png"></span>
          pgRouting</a>
        <span class="navbar-text navbar-version pull-left"><b>v3.4.0-dev</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Instalación</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Soporte</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Datos Muestra</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Conceptos de pgRouting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="routingFunctions.html">Familias de Funciones</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="proposed.html">Funciones propuestas</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental.html">Funciones Experimentales</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Notas de versión</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migration guide</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Conceptos de pgRouting</a><ul>
<li><a class="reference internal" href="#graphs">Graphs</a><ul>
<li><a class="reference internal" href="#graph-with-cost">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code></a></li>
<li><a class="reference internal" href="#graph-with-cost-and-reverse-cost">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphs-without-geometries">Graphs without geometries</a><ul>
<li><a class="reference internal" href="#wiki-example">Wiki example</a></li>
<li><a class="reference internal" href="#prepare-the-database">Prepare the database</a></li>
<li><a class="reference internal" href="#create-a-table">Create a table</a></li>
<li><a class="reference internal" href="#insert-the-data">Insert the data</a></li>
<li><a class="reference internal" href="#find-the-shortest-path">Find the shortest path</a></li>
<li><a class="reference internal" href="#create-a-topology">Create a topology</a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphs-with-geometries">Graphs with geometries</a><ul>
<li><a class="reference internal" href="#create-a-routing-database">Crear una Base de Datos de Ruteo</a></li>
<li><a class="reference internal" href="#load-data">Cargar Datos</a></li>
<li><a class="reference internal" href="#build-a-routing-topology">Build a routing topology</a><ul>
<li><a class="reference internal" href="#update-to-length-of-geometry">Update to length of geometry</a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-the-routing-topology">Compruebe la Topología de Ruteo</a><ul>
<li><a class="reference internal" href="#crossing-edges">Crossing edges</a><ul>
<li><a class="reference internal" href="#adding-split-edges">Adding split edges</a></li>
<li><a class="reference internal" href="#adding-new-vertices">Adding new vertices</a></li>
<li><a class="reference internal" href="#updating-edges-topology">Updating edges topology</a></li>
<li><a class="reference internal" href="#removing-the-surplus-edges">Removing the surplus edges</a></li>
<li><a class="reference internal" href="#updating-vertices-topology">Updating vertices topology</a></li>
<li><a class="reference internal" href="#checking-for-crossing-edges">Checking for crossing edges</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dead-ends-and-disconnected-graphs">Dead ends and disconnected graphs</a><ul>
<li><a class="reference internal" href="#prepare-storage-for-connection-information">Prepare storage for connection information</a></li>
<li><a class="reference internal" href="#save-the-vertices-connection-information">Save the vertices connection information</a></li>
<li><a class="reference internal" href="#save-the-edges-connection-information">Save the edges connection information</a></li>
<li><a class="reference internal" href="#get-the-closest-vertex">Get the closest vertex</a></li>
<li><a class="reference internal" href="#connecting-components">Connecting components</a></li>
<li><a class="reference internal" href="#checking-components">Checking components</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#compute-a-path">Calcular una Ruta</a></li>
</ul>
</li>
<li><a class="reference internal" href="#group-of-functions">Grupo de Funciones</a><ul>
<li><a class="reference internal" href="#one-to-one">Uno a Uno</a></li>
<li><a class="reference internal" href="#one-to-many">Uno a Muchos</a></li>
<li><a class="reference internal" href="#many-to-one">Muchos a Uno</a></li>
<li><a class="reference internal" href="#many-to-many">Muchos a Muchos</a></li>
<li><a class="reference internal" href="#combinations">Combinaciones</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inner-queries">Consultas Internas</a><ul>
<li><a class="reference internal" href="#edges-sql">SQL de aristas</a><ul>
<li><a class="reference internal" href="#general">General</a></li>
<li><a class="reference internal" href="#general-without-id">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></li>
<li><a class="reference internal" href="#general-with-x-y">General with (X,Y)</a></li>
<li><a class="reference internal" href="#flow">Flow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#combinations-sql">Combinations SQL</a></li>
<li><a class="reference internal" href="#restrictions-sql">Restrictions SQL</a></li>
<li><a class="reference internal" href="#points-sql">Points SQL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters">Parámetros</a><ul>
<li><a class="reference internal" href="#parameters-for-the-via-functions">Parameters for the Via functions</a></li>
<li><a class="reference internal" href="#for-the-trsp-functions">For the TRSP functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#return-columns">Return columns</a><ul>
<li><a class="reference internal" href="#return-columns-for-a-path">Return columns for a path</a></li>
<li><a class="reference internal" href="#multiple-paths">Multiple paths</a><ul>
<li><a class="reference internal" href="#selective-for-multiple-paths">Selective for multiple paths.</a></li>
<li><a class="reference internal" href="#non-selective-for-multiple-paths">Non selective for multiple paths</a></li>
</ul>
</li>
<li><a class="reference internal" href="#return-columns-for-cost-functions">Return columns for cost functions</a></li>
<li><a class="reference internal" href="#return-columns-for-flow-functions">Return columns for flow functions</a></li>
<li><a class="reference internal" href="#return-columns-for-spanning-tree-functions">Return columns for spanning tree functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-topics">Tópicos avanzados</a><ul>
<li><a class="reference internal" href="#routing-topology">Topología para Ruteo</a></li>
<li><a class="reference internal" href="#graph-analytics">Análisis de gráficas</a></li>
<li><a class="reference internal" href="#analyze-a-graph">Analizar un gráfico</a></li>
<li><a class="reference internal" href="#analyze-one-way-streets">Analizar las calles unidireccionales</a><ul>
<li><a class="reference internal" href="#example">Ejemplo</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#performance-tips">Consejos de Rendimiento</a><ul>
<li><a class="reference internal" href="#for-the-routing-functions">Para las funciones de Ruteo</a></li>
<li><a class="reference internal" href="#for-the-topology-functions">Para las funciones de topología:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-contribute">Cómo contribuir</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="sampledata.html" title="Previous Chapter: Datos Muestra"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Datos Muestra</span>
    </a>
  </li>
  <li>
    <a href="routingFunctions.html" title="Next Chapter: Familias de Funciones"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Familias de Funciones &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="line-block">
<div class="line"><br /></div>
</div>
<ul class="simple">
<li><p><strong>Supported versions:</strong>
<a class="reference external" href="https://docs.pgrouting.org/latest/en/pgRouting-concepts.html">Latest</a>
(<a class="reference external" href="https://docs.pgrouting.org/3.4/en/pgRouting-concepts.html">3.4</a>)
<a class="reference external" href="https://docs.pgrouting.org/3.3/en/pgRouting-concepts.html">3.3</a>
<a class="reference external" href="https://docs.pgrouting.org/3.2/en/pgRouting-concepts.html">3.2</a>
<a class="reference external" href="https://docs.pgrouting.org/3.1/en/pgRouting-concepts.html">3.1</a>
<a class="reference external" href="https://docs.pgrouting.org/3.0/en/pgRouting-concepts.html">3.0</a></p></li>
<li><p><strong>Versiones soportadas:</strong> <a class="reference external" href="https://docs.pgrouting.org/2.6/en/pgRouting-concepts.html">2.6</a> <a class="reference external" href="https://docs.pgrouting.org/2.5/en/pgRouting-concepts.html">2.5</a> <a class="reference external" href="https://docs.pgrouting.org/2.4/en/pgRouting-concepts.html">2.4</a> <a class="reference external" href="https://docs.pgrouting.org/2.3/en/doc/src/tutorial/index.html">2.3</a> <a class="reference external" href="https://docs.pgrouting.org/2.2/en/doc/src/tutorial/index.html">2.2</a> <a class="reference external" href="https://docs.pgrouting.org/2.1/en/doc/src/tutorial/index.html">2.1</a> <a class="reference external" href="https://docs.pgrouting.org/2.0/en/doc/src/tutorial/index.html">2.0</a></p></li>
</ul>
<section id="pgrouting-concepts">
<h1><a class="toc-backref" href="#id6" role="doc-backlink">Conceptos de pgRouting</a><a class="headerlink" href="#pgrouting-concepts" title="Permalink to this heading">¶</a></h1>
<nav class="contents" id="contenido">
<p class="topic-title">Contenido</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pgrouting-concepts" id="id6">Conceptos de pgRouting</a></p>
<ul>
<li><p><a class="reference internal" href="#graphs" id="id7">Graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#graph-with-cost" id="id8">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code></a></p></li>
<li><p><a class="reference internal" href="#graph-with-cost-and-reverse-cost" id="id9">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-without-geometries" id="id10">Graphs without geometries</a></p>
<ul>
<li><p><a class="reference internal" href="#wiki-example" id="id11">Wiki example</a></p></li>
<li><p><a class="reference internal" href="#prepare-the-database" id="id12">Prepare the database</a></p></li>
<li><p><a class="reference internal" href="#create-a-table" id="id13">Create a table</a></p></li>
<li><p><a class="reference internal" href="#insert-the-data" id="id14">Insert the data</a></p></li>
<li><p><a class="reference internal" href="#find-the-shortest-path" id="id15">Find the shortest path</a></p></li>
<li><p><a class="reference internal" href="#create-a-topology" id="id16">Create a topology</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-with-geometries" id="id17">Graphs with geometries</a></p>
<ul>
<li><p><a class="reference internal" href="#create-a-routing-database" id="id18">Crear una Base de Datos de Ruteo</a></p></li>
<li><p><a class="reference internal" href="#load-data" id="id19">Cargar Datos</a></p></li>
<li><p><a class="reference internal" href="#build-a-routing-topology" id="id20">Build a routing topology</a></p>
<ul>
<li><p><a class="reference internal" href="#update-to-length-of-geometry" id="id21">Update to length of geometry</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#check-the-routing-topology" id="id22">Compruebe la Topología de Ruteo</a></p>
<ul>
<li><p><a class="reference internal" href="#crossing-edges" id="id23">Crossing edges</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-split-edges" id="id24">Adding split edges</a></p></li>
<li><p><a class="reference internal" href="#adding-new-vertices" id="id25">Adding new vertices</a></p></li>
<li><p><a class="reference internal" href="#updating-edges-topology" id="id26">Updating edges topology</a></p></li>
<li><p><a class="reference internal" href="#removing-the-surplus-edges" id="id27">Removing the surplus edges</a></p></li>
<li><p><a class="reference internal" href="#updating-vertices-topology" id="id28">Updating vertices topology</a></p></li>
<li><p><a class="reference internal" href="#checking-for-crossing-edges" id="id29">Checking for crossing edges</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dead-ends-and-disconnected-graphs" id="id30">Dead ends and disconnected graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#prepare-storage-for-connection-information" id="id31">Prepare storage for connection information</a></p></li>
<li><p><a class="reference internal" href="#save-the-vertices-connection-information" id="id32">Save the vertices connection information</a></p></li>
<li><p><a class="reference internal" href="#save-the-edges-connection-information" id="id33">Save the edges connection information</a></p></li>
<li><p><a class="reference internal" href="#get-the-closest-vertex" id="id34">Get the closest vertex</a></p></li>
<li><p><a class="reference internal" href="#connecting-components" id="id35">Connecting components</a></p></li>
<li><p><a class="reference internal" href="#checking-components" id="id36">Checking components</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#compute-a-path" id="id37">Calcular una Ruta</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#group-of-functions" id="id38">Grupo de Funciones</a></p>
<ul>
<li><p><a class="reference internal" href="#one-to-one" id="id39">Uno a Uno</a></p></li>
<li><p><a class="reference internal" href="#one-to-many" id="id40">Uno a Muchos</a></p></li>
<li><p><a class="reference internal" href="#many-to-one" id="id41">Muchos a Uno</a></p></li>
<li><p><a class="reference internal" href="#many-to-many" id="id42">Muchos a Muchos</a></p></li>
<li><p><a class="reference internal" href="#combinations" id="id43">Combinaciones</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inner-queries" id="id44">Consultas Internas</a></p>
<ul>
<li><p><a class="reference internal" href="#edges-sql" id="id45">SQL de aristas</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id46">General</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id47">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id48">General with (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id49">Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id50">Combinations SQL</a></p></li>
<li><p><a class="reference internal" href="#restrictions-sql" id="id51">Restrictions SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id52">Points SQL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id53">Parámetros</a></p>
<ul>
<li><p><a class="reference internal" href="#parameters-for-the-via-functions" id="id54">Parameters for the Via functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-trsp-functions" id="id55">For the TRSP functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns" id="id56">Return columns</a></p>
<ul>
<li><p><a class="reference internal" href="#return-columns-for-a-path" id="id57">Return columns for a path</a></p></li>
<li><p><a class="reference internal" href="#multiple-paths" id="id58">Multiple paths</a></p>
<ul>
<li><p><a class="reference internal" href="#selective-for-multiple-paths" id="id59">Selective for multiple paths.</a></p></li>
<li><p><a class="reference internal" href="#non-selective-for-multiple-paths" id="id60">Non selective for multiple paths</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns-for-cost-functions" id="id61">Return columns for cost functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-flow-functions" id="id62">Return columns for flow functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-spanning-tree-functions" id="id63">Return columns for spanning tree functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-topics" id="id64">Tópicos avanzados</a></p>
<ul>
<li><p><a class="reference internal" href="#routing-topology" id="id65">Topología para Ruteo</a></p></li>
<li><p><a class="reference internal" href="#graph-analytics" id="id66">Análisis de gráficas</a></p></li>
<li><p><a class="reference internal" href="#analyze-a-graph" id="id67">Analizar un gráfico</a></p></li>
<li><p><a class="reference internal" href="#analyze-one-way-streets" id="id68">Analizar las calles unidireccionales</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id69">Ejemplo</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance-tips" id="id70">Consejos de Rendimiento</a></p>
<ul>
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id71">Para las funciones de Ruteo</a></p></li>
<li><p><a class="reference internal" href="#for-the-topology-functions" id="id72">Para las funciones de topología:</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-contribute" id="id73">Cómo contribuir</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>Esta es una guía simple para llevarte a través de los pasos básicos para trabajar con pgRouting. Esta guía cubre:</p>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#graphs" id="id74">Graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#graph-with-cost" id="id75">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code></a></p></li>
<li><p><a class="reference internal" href="#graph-with-cost-and-reverse-cost" id="id76">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-without-geometries" id="id77">Graphs without geometries</a></p>
<ul>
<li><p><a class="reference internal" href="#wiki-example" id="id78">Wiki example</a></p></li>
<li><p><a class="reference internal" href="#prepare-the-database" id="id79">Prepare the database</a></p></li>
<li><p><a class="reference internal" href="#create-a-table" id="id80">Create a table</a></p></li>
<li><p><a class="reference internal" href="#insert-the-data" id="id81">Insert the data</a></p></li>
<li><p><a class="reference internal" href="#find-the-shortest-path" id="id82">Find the shortest path</a></p></li>
<li><p><a class="reference internal" href="#create-a-topology" id="id83">Create a topology</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-with-geometries" id="id84">Graphs with geometries</a></p>
<ul>
<li><p><a class="reference internal" href="#create-a-routing-database" id="id85">Crear una Base de Datos de Ruteo</a></p></li>
<li><p><a class="reference internal" href="#load-data" id="id86">Cargar Datos</a></p></li>
<li><p><a class="reference internal" href="#build-a-routing-topology" id="id87">Build a routing topology</a></p>
<ul>
<li><p><a class="reference internal" href="#update-to-length-of-geometry" id="id88">Update to length of geometry</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#check-the-routing-topology" id="id89">Compruebe la Topología de Ruteo</a></p>
<ul>
<li><p><a class="reference internal" href="#crossing-edges" id="id90">Crossing edges</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-split-edges" id="id91">Adding split edges</a></p></li>
<li><p><a class="reference internal" href="#adding-new-vertices" id="id92">Adding new vertices</a></p></li>
<li><p><a class="reference internal" href="#updating-edges-topology" id="id93">Updating edges topology</a></p></li>
<li><p><a class="reference internal" href="#removing-the-surplus-edges" id="id94">Removing the surplus edges</a></p></li>
<li><p><a class="reference internal" href="#updating-vertices-topology" id="id95">Updating vertices topology</a></p></li>
<li><p><a class="reference internal" href="#checking-for-crossing-edges" id="id96">Checking for crossing edges</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#dead-ends-and-disconnected-graphs" id="id97">Dead ends and disconnected graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#prepare-storage-for-connection-information" id="id98">Prepare storage for connection information</a></p></li>
<li><p><a class="reference internal" href="#save-the-vertices-connection-information" id="id99">Save the vertices connection information</a></p></li>
<li><p><a class="reference internal" href="#save-the-edges-connection-information" id="id100">Save the edges connection information</a></p></li>
<li><p><a class="reference internal" href="#get-the-closest-vertex" id="id101">Get the closest vertex</a></p></li>
<li><p><a class="reference internal" href="#connecting-components" id="id102">Connecting components</a></p></li>
<li><p><a class="reference internal" href="#checking-components" id="id103">Checking components</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#compute-a-path" id="id104">Calcular una Ruta</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#group-of-functions" id="id105">Grupo de Funciones</a></p>
<ul>
<li><p><a class="reference internal" href="#one-to-one" id="id106">Uno a Uno</a></p></li>
<li><p><a class="reference internal" href="#one-to-many" id="id107">Uno a Muchos</a></p></li>
<li><p><a class="reference internal" href="#many-to-one" id="id108">Muchos a Uno</a></p></li>
<li><p><a class="reference internal" href="#many-to-many" id="id109">Muchos a Muchos</a></p></li>
<li><p><a class="reference internal" href="#combinations" id="id110">Combinaciones</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inner-queries" id="id111">Consultas Internas</a></p>
<ul>
<li><p><a class="reference internal" href="#edges-sql" id="id112">SQL de aristas</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id113">General</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id114">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id115">General with (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id116">Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id117">Combinations SQL</a></p></li>
<li><p><a class="reference internal" href="#restrictions-sql" id="id118">Restrictions SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id119">Points SQL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id120">Parámetros</a></p>
<ul>
<li><p><a class="reference internal" href="#parameters-for-the-via-functions" id="id121">Parameters for the Via functions</a></p></li>
<li><p><a class="reference internal" href="#for-the-trsp-functions" id="id122">For the TRSP functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns" id="id123">Return columns</a></p>
<ul>
<li><p><a class="reference internal" href="#return-columns-for-a-path" id="id124">Return columns for a path</a></p></li>
<li><p><a class="reference internal" href="#multiple-paths" id="id125">Multiple paths</a></p>
<ul>
<li><p><a class="reference internal" href="#selective-for-multiple-paths" id="id126">Selective for multiple paths.</a></p></li>
<li><p><a class="reference internal" href="#non-selective-for-multiple-paths" id="id127">Non selective for multiple paths</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns-for-cost-functions" id="id128">Return columns for cost functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-flow-functions" id="id129">Return columns for flow functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-spanning-tree-functions" id="id130">Return columns for spanning tree functions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#advanced-topics" id="id131">Tópicos avanzados</a></p>
<ul>
<li><p><a class="reference internal" href="#routing-topology" id="id132">Topología para Ruteo</a></p></li>
<li><p><a class="reference internal" href="#graph-analytics" id="id133">Análisis de gráficas</a></p></li>
<li><p><a class="reference internal" href="#analyze-a-graph" id="id134">Analizar un gráfico</a></p></li>
<li><p><a class="reference internal" href="#analyze-one-way-streets" id="id135">Analizar las calles unidireccionales</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id136">Ejemplo</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance-tips" id="id137">Consejos de Rendimiento</a></p>
<ul>
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id138">Para las funciones de Ruteo</a></p></li>
<li><p><a class="reference internal" href="#for-the-topology-functions" id="id139">Para las funciones de topología:</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-contribute" id="id140">Cómo contribuir</a></p></li>
</ul>
</nav>
<section id="graphs">
<h2><a class="toc-backref" href="#id74" role="doc-backlink">Graphs</a><a class="headerlink" href="#graphs" title="Permalink to this heading">¶</a></h2>
<p>A graph is an ordered pair <span class="math notranslate nohighlight">\(G = (V ,E)\)</span> where:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V\)</span> is a set of vertices, also called nodes</p></li>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid u , v \in V \}\)</span></p></li>
</ul>
<p>There are different kinds of graphs.</p>
<ul class="simple">
<li><p>Undirected simple graph</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid u , v \in V, u \neq v\}\)</span></p></li>
</ul>
</li>
<li><p>Directed graph</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid (u , v) \in (V X V) \}\)</span></p></li>
</ul>
</li>
<li><p>Directed simple graph</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid (u , v) \in (V X V), u \neq v\}\)</span></p></li>
</ul>
</li>
</ul>
<p>Graphs:</p>
<ul class="simple">
<li><p>Do not have geometries</p></li>
<li><p>Some graph theory problems requires graphs to have weights, called <strong>cost</strong> in
pgRouting.</p></li>
</ul>
<p>In pgRouting there are several ways to represent a graph on the database:</p>
<ul class="simple">
<li><p>With <code class="docutils literal notranslate"><span class="pre">cost</span></code></p>
<ul>
<li><p>(<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">cost</span></code>)</p></li>
</ul>
</li>
<li><p>With <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p>
<ul>
<li><p>(<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">cost</span></code>, <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>)</p></li>
</ul>
</li>
</ul>
<p>Donde:</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p>Identifier of the edge. Requirement to use the database in a consistent
manner.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p>Identifier of a vertex</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p>Identifier of a vertex</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p>
<ul class="simple">
<li><p>When negative the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>) do not exist on the
graph</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) do not exist on the
graph</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The decision of the graph to be <strong>directed</strong> or <strong>undirected</strong> is done when
running a pgRouting algorithm.</p>
<section id="graph-with-cost">
<h3><a class="toc-backref" href="#id75" role="doc-backlink">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code></a><a class="headerlink" href="#graph-with-cost" title="Permalink to this heading">¶</a></h3>
<p>The weighted directed graph, <span class="math notranslate nohighlight">\(G_d(V,E)\)</span>, is interpreted as:</p>
<ul class="simple">
<li><p>the set of vertices  <span class="math notranslate nohighlight">\(V\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(V = source \cup target\)</span></p></li>
</ul>
</li>
<li><p>the set of edges <span class="math notranslate nohighlight">\(E\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E = \{(source_i, target_i, cost_i) \text{ when } cost_i &gt;=0 \}\)</span></p></li>
</ul>
</li>
</ul>
<p class="rubric">Directed graph</p>
<p>In a directed graph the edge <span class="math notranslate nohighlight">\((source_i, target_i, cost_i)\)</span> has
directionality: <span class="math notranslate nohighlight">\(source_i \rightarrow target_i\)</span></p>
<p>For the following data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span>
<span class="o">----+--------+--------+------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-fea3ff0c3c30969d4fcc1a5452438952118b0036.png" alt="digraph G {
 1 -&gt; 2 [label=&quot;  1(5)&quot;];
 3;
}" class="graphviz" /></div>
<p class="rubric">Undirected graph</p>
<p>In an undirected graph the edge <span class="math notranslate nohighlight">\((source_i, target_i, cost_i)\)</span> does not
have directionality: <span class="math notranslate nohighlight">\(source_i \; {\rule[0.5ex]{1em}{0.55pt}} \; target_i\)</span></p>
<ul class="simple">
<li><p>In terms of a directed graph is like having two edges: <span class="math notranslate nohighlight">\(source_i
\leftrightarrow target_i\)</span></p></li>
</ul>
<p>For the following data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span>
<span class="o">----+--------+--------+------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-15ad35e043b1329141358020162ef62da0f2d5e0.png" alt="graph G {
 1 -- 2 [label=&quot;  1(5)&quot;];
 3;
}" class="graphviz" /></div>
</section>
<section id="graph-with-cost-and-reverse-cost">
<h3><a class="toc-backref" href="#id76" role="doc-backlink">Graph with <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></a><a class="headerlink" href="#graph-with-cost-and-reverse-cost" title="Permalink to this heading">¶</a></h3>
<p>The weighted directed graph, <span class="math notranslate nohighlight">\(G_d(V,E)\)</span>, is defined by:</p>
<ul class="simple">
<li><p>the set of vertices  <span class="math notranslate nohighlight">\(V\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(V = source \cup target\)</span></p></li>
</ul>
</li>
<li><p>the set of edges <span class="math notranslate nohighlight">\(E\)</span></p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E = \begin{split} \begin{align}
&amp; {\{(source_i, target_i, cost_i) \text{ when } cost_i &gt;=0 \}} \\
&amp; \cup \\
&amp; {\{(target_i, source_i, reverse\_cost_i) \text{ when } reverse\_cost_i &gt;=0 \}}
\end{align} \end{split}\)</span></p></li>
</ul>
</li>
</ul>
<p class="rubric">Directed graph</p>
<p>In a directed graph both edges have directionality</p>
<ul class="simple">
<li><p>edge <span class="math notranslate nohighlight">\((source_i, target_i, cost_i)\)</span> has directionality: <span class="math notranslate nohighlight">\(source_i
\rightarrow target_i\)</span></p></li>
<li><p>edge <span class="math notranslate nohighlight">\((target_i, source_i, reverse\_cost_i)\)</span> has directionality:
<span class="math notranslate nohighlight">\(target_i \rightarrow source_i\)</span></p></li>
</ul>
<p>For the following data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">reverse_cost</span>
<span class="o">----+--------+--------+------+--------------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>            <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span> <span class="o">|</span>            <span class="mi">4</span>
  <span class="mi">3</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>           <span class="o">-</span><span class="mi">1</span>
<span class="p">(</span><span class="mi">3</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-30736f62adc8dbf11ad4115151b7af7577cda635.png" alt="digraph G {
 1 -&gt; 2 [label=&quot;  1(5)&quot;];
 2 -&gt; 1 [label=&quot;  1(2)&quot;];
 3 -&gt; 1 [label=&quot;  2(4)&quot;];
 2 -&gt; 3 [label=&quot;  3(7)&quot;];
}" class="graphviz" /></div>
<p class="rubric">Undirected graph</p>
<p>In a directed graph both edges do not have directionality</p>
<ul class="simple">
<li><p>Edge <span class="math notranslate nohighlight">\((source_i, target_i, cost_i)\)</span> is <span class="math notranslate nohighlight">\(source_i
\; {\rule[0.5ex]{1em}{0.55pt}} \; target_i\)</span></p></li>
<li><p>Edge <span class="math notranslate nohighlight">\((target_i, source_i, reverse\_cost_i)\)</span> is <span class="math notranslate nohighlight">\(target_i
\; {\rule[0.5ex]{1em}{0.55pt}} \; source_i\)</span></p></li>
<li><p>In terms of a directed graph is like having four edges:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(source_i \leftrightarrow target_i\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(target_i \leftrightarrow source_i\)</span></p></li>
</ul>
</li>
</ul>
<p>For the following data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">reverse_cost</span>
<span class="o">----+--------+--------+------+--------------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>            <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span> <span class="o">|</span>            <span class="mi">4</span>
  <span class="mi">3</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>           <span class="o">-</span><span class="mi">1</span>
<span class="p">(</span><span class="mi">3</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-d3e0d812756609c1050c29940fd38b77a9a039cd.png" alt="graph G {
 1 -- 2 [label=&quot;  1(5)&quot;];
 2 -- 1 [label=&quot;  1(2)&quot;];
 3 -- 1 [label=&quot;  2(4)&quot;];
 2 -- 3 [label=&quot;  3(7)&quot;];
}" class="graphviz" /></div>
</section>
</section>
<section id="graphs-without-geometries">
<h2><a class="toc-backref" href="#id77" role="doc-backlink">Graphs without geometries</a><a class="headerlink" href="#graphs-without-geometries" title="Permalink to this heading">¶</a></h2>
<p>Personal relationships, genealogy, file dependency problems can be solved
using pgRouting. Those problems, normally,  do not come with gemetries asociated
with the graph data.</p>
<section id="wiki-example">
<h3><a class="toc-backref" href="#id78" role="doc-backlink">Wiki example</a><a class="headerlink" href="#wiki-example" title="Permalink to this heading">¶</a></h3>
<p>Solve the example problem taken from wikipedia (<a class="reference external" href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">see top
right graph</a>) which:</p>
<ul class="simple">
<li><p>Problem find the shortest path from <span class="math notranslate nohighlight">\(1\)</span> to <span class="math notranslate nohighlight">\(5\)</span>.</p></li>
<li><p>Is an undirected graph.</p></li>
<li><p>Although visually looks like to have geometries, the drawing is not to scale.</p>
<ul>
<li><p>No geometries asociated to the vertices or edges</p></li>
</ul>
</li>
<li><p>Has 6 vertices :math`{1,2,3,4,5,6}”</p></li>
<li><p>Has 9 edges:</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(\begin{split} \begin{align}
E = &amp; \{(1,2,7), (1,3,9), (1,6,14), \\
&amp; (2,3,10), (2,4,13), \\
&amp; (3,4,11), (3,6,2), \\
&amp; (4,5,6), \\
&amp; (5,6,9) \}
\end{align} \end{split}\)</span></p>
<ul class="simple">
<li><p>The graph can be represented in many ways for example:</p></li>
</ul>
<div class="graphviz"><img src="_images/graphviz-f7be590ac01a366380dea45ade8a60068b4b9db9.png" alt="graph G {
 rankdir=&quot;LR&quot;;
 1 [color=&quot;red&quot;];
 5 [color=&quot;green&quot;];
 1 -- 2 [label=&quot;  (7)&quot;];
 5 -- 6 [label=&quot;  (9)&quot;];
 1 -- 3 [label=&quot;  (9)&quot;];
 1 -- 6 [label=&quot;  (14)&quot;];
 2 -- 3 [label=&quot;  (10)&quot;];
 2 -- 4 [label=&quot;  (13)&quot;];
 3 -- 4 [label=&quot;  (11)&quot;];
 3 -- 6 [label=&quot;  (2)&quot;];
 4 -- 5 [label=&quot;  (6)&quot;];
}" class="graphviz" /></div>
</section>
<section id="prepare-the-database">
<h3><a class="toc-backref" href="#id79" role="doc-backlink">Prepare the database</a><a class="headerlink" href="#prepare-the-database" title="Permalink to this heading">¶</a></h3>
<p>Create a database for the example, access the database and install pgRouting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ createdb wiki
$ psql wiki
wiki =# CREATE EXTENSION pgRouting CASCADE;
</pre></div>
</div>
</section>
<section id="create-a-table">
<h3><a class="toc-backref" href="#id80" role="doc-backlink">Create a table</a><a class="headerlink" href="#create-a-table" title="Permalink to this heading">¶</a></h3>
<p>The basic elements needed to perform basic routing on an undirected graph are:</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identificador de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identificador del primer vértice extremo de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identificador del segundo vértice extremo de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p>SMALLINT, INTEGER, BIGINT</p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p>SMALLINT, INTEGER, BIGINT, REAL, FLOAT</p>
</dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">wiki</span> <span class="p">(</span>
  <span class="nb">id</span> <span class="n">SERIAL</span><span class="p">,</span>
  <span class="n">source</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="n">target</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="n">cost</span> <span class="n">INTEGER</span><span class="p">);</span>
<span class="n">CREATE</span> <span class="n">TABLE</span>
</pre></div>
</div>
</section>
<section id="insert-the-data">
<h3><a class="toc-backref" href="#id81" role="doc-backlink">Insert the data</a><a class="headerlink" href="#insert-the-data" title="Permalink to this heading">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">wiki</span> <span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span> <span class="n">VALUES</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">9</span>
</pre></div>
</div>
</section>
<section id="find-the-shortest-path">
<h3><a class="toc-backref" href="#id82" role="doc-backlink">Find the shortest path</a><a class="headerlink" href="#find-the-shortest-path" title="Permalink to this heading">¶</a></h3>
<p>To solve this example <a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a> is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost FROM wiki&#39;</span><span class="p">,</span>
  <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----+----------+------+------+------+----------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>        <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>    <span class="mi">6</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>        <span class="mi">9</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>    <span class="mi">6</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>       <span class="mi">11</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span> <span class="o">|</span>       <span class="mi">20</span>
<span class="p">(</span><span class="mi">4</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>To go from <span class="math notranslate nohighlight">\(1\)</span> to <span class="math notranslate nohighlight">\(5\)</span> the path goes thru the following vertices:
<span class="math notranslate nohighlight">\(1 \rightarrow 3 \rightarrow 6 \rightarrow 5\)</span></p>
<div class="graphviz"><img src="_images/graphviz-5ad5eec8c89b5f62e851c73f0c5ed9e9286be10c.png" alt="graph G {
 rankdir=&quot;LR&quot;;
 1 [color=&quot;red&quot;];
 5 [color=&quot;green&quot;];
 1 -- 2 [label=&quot;  (7)&quot;];
 5 -- 6 [label=&quot;  (9)&quot;, color=&quot;blue&quot;];
 1 -- 3 [label=&quot;  (9)&quot;, color=&quot;blue&quot;];
 1 -- 6 [label=&quot;  (14)&quot;];
 2 -- 3 [label=&quot;  (10)&quot;];
 2 -- 4 [label=&quot;  (13)&quot;];
 3 -- 4 [label=&quot;  (11)&quot;];
 3 -- 6 [label=&quot;  (2)&quot;, color=&quot;blue&quot;];
 4 -- 5 [label=&quot;  (6)&quot;];
}" class="graphviz" /></div>
</section>
<section id="create-a-topology">
<h3><a class="toc-backref" href="#id83" role="doc-backlink">Create a topology</a><a class="headerlink" href="#create-a-topology" title="Permalink to this heading">¶</a></h3>
<p>For more complex functions a complete topology might be needed.</p>
<p>To create the vertices table, use <a class="reference internal" href="pgr_extractVertices.html"><span class="doc">pgr_extractVertices – Propuesto</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="n">FROM</span> <span class="n">wiki</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span>
<span class="o">----+--------+--------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span>
  <span class="mi">3</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">6</span>
  <span class="mi">4</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">3</span>
  <span class="mi">5</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">4</span>
  <span class="mi">6</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>      <span class="mi">6</span>
  <span class="mi">7</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>      <span class="mi">4</span>
  <span class="mi">8</span> <span class="o">|</span>      <span class="mi">4</span> <span class="o">|</span>      <span class="mi">5</span>
  <span class="mi">9</span> <span class="o">|</span>      <span class="mi">5</span> <span class="o">|</span>      <span class="mi">6</span>
<span class="p">(</span><span class="mi">9</span> <span class="n">rows</span><span class="p">)</span>

<span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span>
<span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, source, target FROM wiki&#39;</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">in_edges</span> <span class="o">|</span> <span class="n">out_edges</span>
<span class="o">----+----------+-----------</span>
  <span class="mi">3</span> <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>    <span class="o">|</span> <span class="p">{</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">}</span>
  <span class="mi">5</span> <span class="o">|</span> <span class="p">{</span><span class="mi">8</span><span class="p">}</span>      <span class="o">|</span> <span class="p">{</span><span class="mi">9</span><span class="p">}</span>
  <span class="mi">4</span> <span class="o">|</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">}</span>    <span class="o">|</span> <span class="p">{</span><span class="mi">8</span><span class="p">}</span>
  <span class="mi">2</span> <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">}</span>      <span class="o">|</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>
  <span class="mi">1</span> <span class="o">|</span>          <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
  <span class="mi">6</span> <span class="o">|</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">}</span>  <span class="o">|</span>
<span class="p">(</span><span class="mi">6</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
<section id="graphs-with-geometries">
<h2><a class="toc-backref" href="#id84" role="doc-backlink">Graphs with geometries</a><a class="headerlink" href="#graphs-with-geometries" title="Permalink to this heading">¶</a></h2>
<section id="create-a-routing-database">
<h3><a class="toc-backref" href="#id85" role="doc-backlink">Crear una Base de Datos de Ruteo</a><a class="headerlink" href="#create-a-routing-database" title="Permalink to this heading">¶</a></h3>
<p>The first step is to create a database and load pgRouting in the database.</p>
<p>Typically create a database for each project.</p>
<p>Once having the database to work in, load your data and build the routing
application in that database.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">createdb</span> <span class="n">sampledata</span>
<span class="n">psql</span> <span class="n">sampledata</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;CREATE EXTENSION postgis CASCADE&quot;</span>
</pre></div>
</div>
</section>
<section id="load-data">
<h3><a class="toc-backref" href="#id86" role="doc-backlink">Cargar Datos</a><a class="headerlink" href="#load-data" title="Permalink to this heading">¶</a></h3>
<p>There are several ways to load your data into pgRouting.</p>
<ul class="simple">
<li><p>Manually creating a database.</p>
<ul>
<li><p><a class="reference internal" href="#graphs-without-geometries">Graphs without geometries</a></p></li>
<li><p><a class="reference internal" href="sampledata.html"><span class="doc">Datos Muestra</span></a>: a small graph used on the documentation examples</p></li>
</ul>
</li>
<li><p>Using <a class="reference external" href="https://workshop.pgrouting.org/latest/en/basic/data.html">osm2pgrouting</a></p></li>
</ul>
<p>There are various open source tools that can help, like:</p>
<dl class="field-list simple">
<dt class="field-odd">shp2pgsql<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>postgresql shapefile loader</p></li>
</ul>
</dd>
<dt class="field-even">ogr2ogr<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>vector data conversion utility</p></li>
</ul>
</dd>
<dt class="field-odd">osm2pgsql<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>loadg OSM data into postgresql</p></li>
</ul>
</dd>
</dl>
<p>Please note that these tools will <strong>not</strong> import the data in a structure
compatible with pgRouting and when this happens the topology needs to be
adajusted.</p>
<ul class="simple">
<li><p>Breakup a segments on each segment-segment instersection</p></li>
<li><p>When missing, add columns and assign values to <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>,
<code class="docutils literal notranslate"><span class="pre">cost</span></code>, <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>.</p></li>
<li><p>Connect a disconnected graph.</p></li>
<li><p>Create the complete graph topology</p></li>
<li><p>Create one or more graphs based on the application to be developed.</p>
<ul>
<li><p>Create a contracted graph for the high speed roads</p></li>
<li><p>Create graphs per state/country</p></li>
</ul>
</li>
</ul>
<p>In few words:</p>
<blockquote>
<div><p>Prepare the graph</p>
</div></blockquote>
<p>What and how to prepare the graph, will depend on the application and/or on the
quality of the data and/or on how close the information is to have a topology
usable by pgRouting and/or some other factors not mentioned.</p>
<p>The steps to prepare the graph involve geometry operations using <a class="reference external" href="https://postgis.net/">PostGIS</a> and some others involve graph operations like
<a class="reference internal" href="pgr_contraction.html"><span class="doc">pgr_contraction</span></a> to contract a graph.</p>
<p>The <a class="reference external" href="https://workshop.pgrouting.org/latest">workshop</a> has a step by step on
how to prepare a graph using Open Street Map data, for a small application.</p>
<p>The use of indexes on the database design in general:</p>
<ul class="simple">
<li><p>Have the geometries indexed.</p></li>
<li><p>Have the identifiers columns indexed.</p></li>
</ul>
<p>Please consult the <a class="reference external" href="https://www.postgresql.org/docs/">PostgreSQL</a> documentation
and the <a class="reference external" href="https://postgis.net/">PostGIS</a> documentation.</p>
</section>
<section id="build-a-routing-topology">
<h3><a class="toc-backref" href="#id87" role="doc-backlink">Build a routing topology</a><a class="headerlink" href="#build-a-routing-topology" title="Permalink to this heading">¶</a></h3>
<p>The basic information to use the majority of the pgRouting functions <code class="docutils literal notranslate"><span class="pre">id,</span>
<span class="pre">source,</span> <span class="pre">target,</span> <span class="pre">cost,</span> <span class="pre">[reverse_cost]</span></code> is what in pgRouting is called the
routing topology.</p>
<p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> is optional but strongly recomended to have in order to reduce
the size of the database due to the size of the geometry columns.
Having said that, in this documentation <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> is used in this
documentation.</p>
<p>When the data comes with geometries and there is no routing topology, then this
step is needed.</p>
<p>All the start and end vertices of the geometries need an identifier that is to
be stored in a <code class="docutils literal notranslate"><span class="pre">source</span></code> and <code class="docutils literal notranslate"><span class="pre">target</span></code> columns of the table of the data.
Likewise, <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> need to have the value of traversing the
edge in both directions.</p>
<p>If the columns do not exist they need to be added to the table in question. (see
<a class="reference external" href="https://www.postgresql.org/docs/current/sql-altertable.html">ALTER TABLE</a></p>
<p>The function <a class="reference internal" href="pgr_extractVertices.html"><span class="doc">pgr_extractVertices – Propuesto</span></a> is used to create a vertices table
based on the edge identifier and the geometry of the edge of the graph.</p>
<p>Finnaly using the data stored on the vertices tables the <code class="docutils literal notranslate"><span class="pre">source</span></code> and
<code class="docutils literal notranslate"><span class="pre">target</span></code> are filled up.</p>
<p>See <a class="reference internal" href="sampledata.html"><span class="doc">Datos Muestra</span></a> for an example for building the topology.</p>
<p>Data coming from OSM and using <a class="reference external" href="https://github.com/pgRouting/osm2pgrouting">osm2pgrouting</a> as an import tool, comes with
the routing topology. See an example of using <code class="docutils literal notranslate"><span class="pre">osm2pgrouting</span></code> on the <a class="reference external" href="https://workshop.pgrouting.org/latest/en/basic/data.html">workshop</a>.</p>
<section id="update-to-length-of-geometry">
<h4><a class="toc-backref" href="#id88" role="doc-backlink">Update to length of geometry</a><a class="headerlink" href="#update-to-length-of-geometry" title="Permalink to this heading">¶</a></h4>
<p>The cost and reverse cost values can be in terms of the length of the geometry.
Assume that the <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> columns in the sample data
represent:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(1\)</span> when the edge exists in the graph</p></li>
<li><p><span class="math notranslate nohighlight">\(-1\)</span> when the edge does not exist in the graph</p></li>
</ul>
<p>Using that information updating to the length of the geometries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">geom</span><span class="p">),</span>
<span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">reverse_cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">geom</span><span class="p">);</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
<p>Which gives the following results</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span> <span class="n">FROM</span> <span class="n">edges</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span>        <span class="n">cost</span>        <span class="o">|</span>    <span class="n">reverse_cost</span>
<span class="o">----+--------------------+--------------------</span>
  <span class="mi">6</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">7</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">4</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">5</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
  <span class="mi">8</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
 <span class="mi">12</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">11</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">10</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
 <span class="mi">17</span> <span class="o">|</span>     <span class="mf">1.499999999999</span> <span class="o">|</span>     <span class="mf">1.499999999999</span>
 <span class="mi">14</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
 <span class="mi">18</span> <span class="o">|</span> <span class="mf">1.7000000000000002</span> <span class="o">|</span> <span class="mf">1.7000000000000002</span>
 <span class="mi">13</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">15</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
 <span class="mi">16</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">9</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">3</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                  <span class="mi">1</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Note that to be able to follow the documentation examples, everything is based
on the original graph.</p>
<p>So fixing to what there was before:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span>
<span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">reverse_cost</span><span class="p">);</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
</section>
</section>
<section id="check-the-routing-topology">
<h3><a class="toc-backref" href="#id89" role="doc-backlink">Compruebe la Topología de Ruteo</a><a class="headerlink" href="#check-the-routing-topology" title="Permalink to this heading">¶</a></h3>
<p>There are lots of possible problems in a graph.</p>
<ul class="simple">
<li><p>The data used may not have been designed with routing in mind.</p></li>
<li><p>A graph has some very specific requirements.</p></li>
<li><p>The graph is disconnected.</p></li>
<li><p>There are unwanted intersections.</p></li>
<li><p>The graph is too large and needs to be contracted.</p></li>
<li><p>A subgraph is needed for the application.</p></li>
<li><p>and many other problems that the pgRouting user, that is the application
developer might encounter.</p></li>
</ul>
<section id="crossing-edges">
<h4><a class="toc-backref" href="#id90" role="doc-backlink">Crossing edges</a><a class="headerlink" href="#crossing-edges" title="Permalink to this heading">¶</a></h4>
<p>To get the crossing edges:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">&lt;</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">st_crosses</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="nb">id</span>
<span class="o">----+----</span>
 <span class="mi">13</span> <span class="o">|</span> <span class="mi">18</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
<figure class="align-default">
<img alt="_images/crossing_edges.png" src="_images/crossing_edges.png" />
</figure>
<p>That information is correct, for example, when in terms of vehicles, is it a
tunnel or bride crossing over another road.</p>
<p>It might be incorrect, for example:</p>
<ol class="arabic simple">
<li><p>When it is actually an intersection of roads, where vehicles can make turns.</p></li>
<li><p>When in terms of electrical lines, the electrical line is able to swith roads
even on a tunnel or bridge.</p></li>
</ol>
<p>When it is incorrect, it needs fixing:</p>
<ol class="arabic simple">
<li><p>For vehicles and pedestrians</p>
<ul class="simple">
<li><p>If the data comes from OSM and was imported to the database using
<code class="docutils literal notranslate"><span class="pre">osm2pgrouting</span></code>, the fix needs to be done in the <a class="reference external" href="https://www.openstreetmap.org">OSM portal</a> and the data imported again.</p></li>
<li><p>In general when the data comes from a supplier that has the data prepared
for routing vehicles, and there is a problem, the data is to be fixed from
the supplier</p></li>
</ul>
</li>
<li><p>For very specific applications</p>
<ul class="simple">
<li><p>The data is correct when from the point of view of routing vehicles or
pedestrians.</p></li>
<li><p>The data needs a local fix for the specific application.</p></li>
</ul>
</li>
</ol>
<p>Once analized one by one the crossings, for the ones that need a local fix,
the edges need to be <a class="reference external" href="https://postgis.net/docs/ST_Split.html">split</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">ST_AsText</span><span class="p">((</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">13</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">18</span>
<span class="n">UNION</span>
<span class="n">SELECT</span> <span class="n">ST_AsText</span><span class="p">((</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">13</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>
         <span class="n">st_astext</span>
<span class="o">---------------------------</span>
 <span class="n">LINESTRING</span><span class="p">(</span><span class="mf">3.5</span> <span class="mf">2.3</span><span class="p">,</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">)</span>
 <span class="n">LINESTRING</span><span class="p">(</span><span class="mi">3</span> <span class="mi">3</span><span class="p">,</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">)</span>
 <span class="n">LINESTRING</span><span class="p">(</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">,</span><span class="mi">4</span> <span class="mi">3</span><span class="p">)</span>
 <span class="n">LINESTRING</span><span class="p">(</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">,</span><span class="mf">3.5</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="mi">4</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>The new edges need to be added to the edges table, the rest of the attributes
need to be updated in the new edges, the old edges need to be
removed and the routing topology needs to be updated.</p>
<section id="adding-split-edges">
<h5><a class="toc-backref" href="#id91" role="doc-backlink">Adding split edges</a><a class="headerlink" href="#adding-split-edges" title="Permalink to this heading">¶</a></h5>
<p>For each pair of crossing edges a process similar to this one must be performed.</p>
<p>The columns inserted and the way are calculated are based on the application.
For example, if the edges have a trait <strong>name</strong>, then that column is to be
copied.</p>
<p>For pgRouting calculations</p>
<ul class="simple">
<li><p><strong>factor</strong> based on the position of the intersection of the edges can be used
to adjust the <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> columns.</p></li>
<li><p>Capacity information, used on the <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familia de funciones.</span></a> functions does not need
to change when spliting edges.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WITH</span>
<span class="n">first_edge</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">ST_LineLocatePoint</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span><span class="n">ST_Intersection</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">))</span> <span class="n">AS</span> <span class="n">factor</span>
  <span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
  <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">13</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">18</span><span class="p">),</span>
<span class="n">first_segments</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">path</span><span class="p">,</span> <span class="n">first_edge</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">capacity</span><span class="p">,</span> <span class="n">reverse_capacity</span><span class="p">,</span>
    <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">path</span><span class="o">=</span><span class="mi">1</span> <span class="n">THEN</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">cost</span>
         <span class="n">ELSE</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost</span> <span class="n">END</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
    <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">path</span><span class="o">=</span><span class="mi">1</span> <span class="n">THEN</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">reverse_cost</span>
         <span class="n">ELSE</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)</span> <span class="o">*</span> <span class="n">reverse_cost</span> <span class="n">END</span> <span class="n">AS</span> <span class="n">reverse_cost</span>
  <span class="n">FROM</span> <span class="n">first_edge</span> <span class="p">,</span> <span class="n">edges</span> <span class="n">WHERE</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">13</span><span class="p">),</span>
<span class="n">second_edge</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">path</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">(</span><span class="n">ST_Dump</span><span class="p">(</span><span class="n">ST_Split</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">)))</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">ST_LineLocatePoint</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span><span class="n">ST_Intersection</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span><span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">))</span> <span class="n">AS</span> <span class="n">factor</span>
  <span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
  <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">13</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">18</span><span class="p">),</span>
<span class="n">second_segments</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">path</span><span class="p">,</span> <span class="n">second_edge</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span>
    <span class="n">capacity</span><span class="p">,</span> <span class="n">reverse_capacity</span><span class="p">,</span>
    <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">path</span><span class="o">=</span><span class="mi">1</span> <span class="n">THEN</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">cost</span>
         <span class="n">ELSE</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)</span> <span class="o">*</span> <span class="n">cost</span> <span class="n">END</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
    <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">path</span><span class="o">=</span><span class="mi">1</span> <span class="n">THEN</span> <span class="n">factor</span> <span class="o">*</span> <span class="n">reverse_cost</span>
         <span class="n">ELSE</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)</span> <span class="o">*</span> <span class="n">reverse_cost</span> <span class="n">END</span> <span class="n">AS</span> <span class="n">reverse_cost</span>
  <span class="n">FROM</span> <span class="n">second_edge</span> <span class="p">,</span> <span class="n">edges</span> <span class="n">WHERE</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">18</span><span class="p">),</span>
<span class="n">all_segments</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">first_segments</span>
  <span class="n">UNION</span>
  <span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">second_segments</span><span class="p">)</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">edges</span>
  <span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">reverse_capacity</span><span class="p">,</span>
    <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">,</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span>
    <span class="n">geom</span><span class="p">)</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">reverse_capacity</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">,</span>
  <span class="n">ST_X</span><span class="p">(</span><span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)),</span> <span class="n">ST_Y</span><span class="p">(</span><span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)),</span>
  <span class="n">ST_X</span><span class="p">(</span><span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)),</span> <span class="n">ST_Y</span><span class="p">(</span><span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">geom</span><span class="p">)),</span>
  <span class="n">geom</span>
  <span class="n">FROM</span> <span class="n">all_segments</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">4</span>
</pre></div>
</div>
</section>
<section id="adding-new-vertices">
<h5><a class="toc-backref" href="#id92" role="doc-backlink">Adding new vertices</a><a class="headerlink" href="#adding-new-vertices" title="Permalink to this heading">¶</a></h5>
<p>After adding all the split edges requiered by the application, the newly created
vertices need to be added to the vertices table.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">vertices</span> <span class="p">(</span><span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">geom</span><span class="p">)</span>
<span class="p">(</span><span class="n">SELECT</span> <span class="n">nv</span><span class="o">.</span><span class="n">in_edges</span><span class="p">,</span> <span class="n">nv</span><span class="o">.</span><span class="n">out_edges</span><span class="p">,</span> <span class="n">nv</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">nv</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">nv</span><span class="o">.</span><span class="n">geom</span>
<span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges&#39;</span><span class="p">)</span> <span class="n">AS</span> <span class="n">nv</span>
<span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span> <span class="n">USING</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span> <span class="n">WHERE</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span> <span class="n">IS</span> <span class="n">NULL</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="updating-edges-topology">
<h5><a class="toc-backref" href="#id93" role="doc-backlink">Updating edges topology</a><a class="headerlink" href="#updating-edges-topology" title="Permalink to this heading">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">source</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">source</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">source</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">4</span>
<span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">target</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">target</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">target</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">4</span>
</pre></div>
</div>
</section>
<section id="removing-the-surplus-edges">
<h5><a class="toc-backref" href="#id94" role="doc-backlink">Removing the surplus edges</a><a class="headerlink" href="#removing-the-surplus-edges" title="Permalink to this heading">¶</a></h5>
<p>Once all significant information needed by the application has been transported
to the new edges, then the crossing edges can be deleted.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DELETE</span> <span class="n">FROM</span> <span class="n">edges</span> <span class="n">WHERE</span> <span class="nb">id</span> <span class="n">IN</span> <span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
<span class="n">DELETE</span> <span class="mi">2</span>
</pre></div>
</div>
<p>There are other options to do this task, like creating a view, or a materialized
view.</p>
</section>
<section id="updating-vertices-topology">
<h5><a class="toc-backref" href="#id95" role="doc-backlink">Updating vertices topology</a><a class="headerlink" href="#updating-vertices-topology" title="Permalink to this heading">¶</a></h5>
<p>To keep the graph consistent, the vertices topology needs to be updated</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span> <span class="n">SET</span>
<span class="n">in_edges</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">out_edges</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges&#39;</span><span class="p">))</span> <span class="n">AS</span> <span class="n">nv</span>
<span class="n">WHERE</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
</section>
<section id="checking-for-crossing-edges">
<h5><a class="toc-backref" href="#id96" role="doc-backlink">Checking for crossing edges</a><a class="headerlink" href="#checking-for-crossing-edges" title="Permalink to this heading">¶</a></h5>
<p>There are no crossing edges on the graph.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">&lt;</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">st_crosses</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="nb">id</span>
<span class="o">----+----</span>
<span class="p">(</span><span class="mi">0</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
<section id="dead-ends-and-disconnected-graphs">
<h4><a class="toc-backref" href="#id97" role="doc-backlink">Dead ends and disconnected graphs</a><a class="headerlink" href="#dead-ends-and-disconnected-graphs" title="Permalink to this heading">¶</a></h4>
<p>To get the dead ends:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span> <span class="n">FROM</span> <span class="n">vertices</span>
<span class="n">WHERE</span> <span class="n">array_length</span><span class="p">(</span><span class="n">in_edges</span> <span class="o">||</span> <span class="n">out_edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 <span class="nb">id</span>
<span class="o">----</span>
  <span class="mi">1</span>
  <span class="mi">2</span>
  <span class="mi">4</span>
  <span class="mi">5</span>
  <span class="mi">9</span>
 <span class="mi">13</span>
 <span class="mi">14</span>
<span class="p">(</span><span class="mi">7</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>That information is correct, for example, when the dead end is on the limit of
the imported graph.</p>
<p>Visually node <span class="math notranslate nohighlight">\(4\)</span> looks to be as start/ending of 3 edges, but it is not.</p>
<p>Is that correct?</p>
<ul class="simple">
<li><p>Is there such a small curb:</p>
<ul>
<li><p>That does not allow a vehicle to use that visual intersection?</p></li>
<li><p>Is the applicaction for pedestrians and therefore the pedestrican can easily
walk on the small curb?</p></li>
<li><p>Is the application for the electicicity and the electrical lines than can
easily be extended on top of the small curb?</p></li>
</ul>
</li>
<li><p>Is there a big cliff and from eagles view look like the dead end is close to
the segment?</p></li>
</ul>
<p>To get the graph connectivity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">component</span> <span class="o">|</span> <span class="n">node</span>
<span class="o">-----+-----------+------</span>
   <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">3</span>
   <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">5</span>
   <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span>
   <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">7</span>
   <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">8</span>
   <span class="mi">7</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">9</span>
   <span class="mi">8</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">10</span>
   <span class="mi">9</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">11</span>
  <span class="mi">10</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">12</span>
  <span class="mi">11</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">13</span>
  <span class="mi">12</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">14</span>
  <span class="mi">13</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">15</span>
  <span class="mi">14</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">16</span>
  <span class="mi">15</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">17</span>
  <span class="mi">16</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">18</span>
  <span class="mi">17</span> <span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span>    <span class="mi">2</span>
  <span class="mi">18</span> <span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span>    <span class="mi">4</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>In this example, the component <span class="math notranslate nohighlight">\(2\)</span> consists of vertices <span class="math notranslate nohighlight">\(\{2, 4\}\)</span>
and both vertices are also part of the dead end result set.</p>
<p>This graph needs to be connected.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>With the original graph of this documentation, there would be 3 components as
the crossing edge in this graph is a different component.</p>
</div>
<section id="prepare-storage-for-connection-information">
<h5><a class="toc-backref" href="#id98" role="doc-backlink">Prepare storage for connection information</a><a class="headerlink" href="#prepare-storage-for-connection-information" title="Permalink to this heading">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">vertices</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">component</span> <span class="n">BIGINT</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edges</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">component</span> <span class="n">BIGINT</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
</pre></div>
</div>
</section>
<section id="save-the-vertices-connection-information">
<h5><a class="toc-backref" href="#id99" role="doc-backlink">Save the vertices connection information</a><a class="headerlink" href="#save-the-vertices-connection-information" title="Permalink to this heading">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">vertices</span> <span class="n">SET</span> <span class="n">component</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">component</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">))</span> <span class="n">AS</span> <span class="n">c</span>
<span class="n">WHERE</span> <span class="nb">id</span> <span class="o">=</span> <span class="n">node</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
</section>
<section id="save-the-edges-connection-information">
<h5><a class="toc-backref" href="#id100" role="doc-backlink">Save the edges connection information</a><a class="headerlink" href="#save-the-edges-connection-information" title="Permalink to this heading">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span> <span class="n">component</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">component</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">component</span> <span class="n">FROM</span> <span class="n">vertices</span><span class="p">)</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">source</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">20</span>
</pre></div>
</div>
</section>
<section id="get-the-closest-vertex">
<h5><a class="toc-backref" href="#id101" role="doc-backlink">Get the closest vertex</a><a class="headerlink" href="#get-the-closest-vertex" title="Permalink to this heading">¶</a></h5>
<p>Using <a class="reference internal" href="pgr_findCloseEdges.html"><span class="doc">pgr_findCloseEdges</span></a> the closest vertext to component <span class="math notranslate nohighlight">\(1\)</span> is
vertex <span class="math notranslate nohighlight">\(4\)</span>. And the closest edge to vertex <span class="math notranslate nohighlight">\(4\)</span> is edge <span class="math notranslate nohighlight">\(14\)</span>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT edge_id, fraction, ST_AsText(edge) AS edge, id AS closest_vertex
FROM pgr_findCloseEdges(
  $$SELECT id, geom FROM edges WHERE component = 1$$,
  (SELECT array_agg(geom) FROM vertices WHERE component = 2),
  2, partial =&gt; false) JOIN vertices USING (geom) ORDER BY distance LIMIT 1;
 edge_id | fraction |                 edge                 | closest_vertex
---------+----------+--------------------------------------+----------------
      14 |      0.5 | LINESTRING(1.999999999999 3.5,2 3.5) |              4
(1 row)

</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">edge</span></code> can be used to connect the components, using the <code class="docutils literal notranslate"><span class="pre">fraction</span></code>
information about the edge <span class="math notranslate nohighlight">\(14\)</span> to split the connecting edge.</p>
</section>
<section id="connecting-components">
<h5><a class="toc-backref" href="#id102" role="doc-backlink">Connecting components</a><a class="headerlink" href="#connecting-components" title="Permalink to this heading">¶</a></h5>
<p>There are three basic ways to connect the components</p>
<ul class="simple">
<li><p>From the vertex to the starting point of the edge</p></li>
<li><p>From the vertex to the ending point of the edge</p></li>
<li><p>From the vertex to the closest vertex on the edge</p>
<ul>
<li><p>This solution requiers the edge to be split.</p></li>
</ul>
</li>
</ul>
<p>The following query shows the three ways to connect the components:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>WITH
info AS (
  SELECT
    edge_id, fraction, side, distance, ce.geom, edge, v.id AS closest,
    source, target, capacity, reverse_capacity, e.geom AS e_geom
  FROM pgr_findCloseEdges(
    $$SELECT id, geom FROM edges WHERE component = 1$$,
    (SELECT array_agg(geom) FROM vertices WHERE component = 2),
    2, partial =&gt; false) AS ce
  JOIN vertices AS v USING (geom)
  JOIN edges AS e ON (edge_id = e.id)
  ORDER BY distance LIMIT 1),
three_options AS (
  SELECT
    closest AS source, target, 0 AS cost, 0 AS reverse_cost,
    capacity, reverse_capacity,
    ST_X(geom) AS x1, ST_Y(geom) AS y1,
    ST_X(ST_EndPoint(e_geom)) AS x2, ST_Y(ST_EndPoint(e_geom)) AS y2,
    ST_MakeLine(geom, ST_EndPoint(e_geom)) AS geom
  FROM info

  UNION

  SELECT closest, source, 0, 0, capacity, reverse_capacity,
    ST_X(geom) AS x1, ST_Y(geom) AS y1,
    ST_X(ST_StartPoint(e_geom)) AS x2, ST_Y(ST_StartPoint(e_geom)) AS y2,
    ST_MakeLine(info.geom, ST_StartPoint(e_geom))
  FROM info
  /*
  UNION
  -- This option requires splitting the edge
  SELECT closest, NULL, 0, 0, capacity, reverse_capacity,
    ST_X(geom) AS x1, ST_Y(geom) AS y1,
    ST_X(ST_EndPoint(edge)) AS x2, ST_Y(ST_EndPoint(edge)) AS y2,
    edge
  FROM info */
  )

INSERT INTO edges
  (source, target,
    cost, reverse_cost,
    capacity, reverse_capacity,
    x1, y1, x2, y2,
    geom)
(SELECT
    source, target, cost, reverse_cost, capacity, reverse_capacity,
    x1, y1, x2, y2, geom
  FROM three_options);
INSERT 0 2
</pre></div>
</div>
</section>
<section id="checking-components">
<h5><a class="toc-backref" href="#id103" role="doc-backlink">Checking components</a><a class="headerlink" href="#checking-components" title="Permalink to this heading">¶</a></h5>
<p>Ignoring the edge that requieres further work. The graph is now fully connected
as there is only one component.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">component</span> <span class="o">|</span> <span class="n">node</span>
<span class="o">-----+-----------+------</span>
   <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">2</span>
   <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">3</span>
   <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">4</span>
   <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">5</span>
   <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span>
   <span class="mi">7</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">7</span>
   <span class="mi">8</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">8</span>
   <span class="mi">9</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">9</span>
  <span class="mi">10</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">10</span>
  <span class="mi">11</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">11</span>
  <span class="mi">12</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">12</span>
  <span class="mi">13</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">13</span>
  <span class="mi">14</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">14</span>
  <span class="mi">15</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">15</span>
  <span class="mi">16</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">16</span>
  <span class="mi">17</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">17</span>
  <span class="mi">18</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">18</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
</section>
<section id="compute-a-path">
<h3><a class="toc-backref" href="#id104" role="doc-backlink">Calcular una Ruta</a><a class="headerlink" href="#compute-a-path" title="Permalink to this heading">¶</a></h3>
<p>Una vez que tenga todo el trabajo de preparación realizado anteriormente, calcular una ruta es bastante fácil. Tenemos muchos algoritmos diferentes que pueden funcionar con su red de carreteras preparada. La forma general de una consulta de ruta mediante el algoritmo Dijkstra es:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM myroads&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">start</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">end</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>
</div>
<p>Este algoritmo solo requiere <em>id</em>, <em>source</em>, <em>target</em> y <em>cost</em> como los atributos mínimos, que de forma predeterminada se considerarán columnas en la tabla de caminos. Si los nombres de columna de la tabla de caminos no coinciden exactamente con los nombres de estos atributos, puede usar alias. Por ejemplo, si importara datos de OSM mediante <strong>osm2pgrouting</strong>, el nombre de la columna id sería <em>gid</em> y la tabla de caminos sería <em>ways</em>, por lo que consultaría una ruta del id 1 del nodo al id 2 del nodo escribiendo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;SELECT gid AS id, source, target, cost FROM ways&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Como puede ver, esto es bastante sencillo y también permite una gran flexibilidad, tanto en términos de estructura de base de datos como en la definición de funciones de coste. Puede probar la consulta anterior utilizando <em>length_m AS cost</em> para calcular la ruta de acceso más corta en metros o <em>cost_s / 60 AS cost</em> para calcular la ruta de acceso más rápida en minutos.</p>
<p>Puede buscar y los algoritmos específicos para los detalles de las firmas y cómo utilizarlas. Estos resultados tienen información como el id de borde y/o el id del nodo junto con el costo o la geometría del paso en la ruta de acceso de <em>start</em> a <em>end</em>. Con los identificadores puede volver a unir estos resultados a la tabla perimetral para obtener más información sobre cada paso de la ruta de acceso.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a></p></li>
</ul>
</section>
</section>
<section id="group-of-functions">
<h2><a class="toc-backref" href="#id105" role="doc-backlink">Grupo de Funciones</a><a class="headerlink" href="#group-of-functions" title="Permalink to this heading">¶</a></h2>
<p>Una función puede tener diferentes sobrecargas. A través de esta documentación, para indicar qué sobrecarga usamos los siguientes términos:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-one">Uno a Uno</a></p></li>
<li><p><a class="reference internal" href="#one-to-many">Uno a Muchos</a></p></li>
<li><p><a class="reference internal" href="#many-to-one">Muchos a Uno</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Muchos a Muchos</a></p></li>
<li><p><a class="reference internal" href="#combinations">Combinaciones</a></p></li>
</ul>
<p>Dependiendo de la sobrecarga son los parámetros utilizados, manteniendo la coherencia en todas las funciones.</p>
<section id="one-to-one">
<h3><a class="toc-backref" href="#id106" role="doc-backlink">Uno a Uno</a><a class="headerlink" href="#one-to-one" title="Permalink to this heading">¶</a></h3>
<p>Cuando se rutea desde:</p>
<ul class="simple">
<li><p>Desde el vértice inicial <strong>one</strong></p></li>
<li><p>al  vértice final <strong>one</strong></p></li>
</ul>
</section>
<section id="one-to-many">
<h3><a class="toc-backref" href="#id107" role="doc-backlink">Uno a Muchos</a><a class="headerlink" href="#one-to-many" title="Permalink to this heading">¶</a></h3>
<p>Cuando se rutea desde:</p>
<ul class="simple">
<li><p>Desde el vértice inicial <strong>one</strong></p></li>
<li><p>a los vértices finales <strong>many</strong></p></li>
</ul>
</section>
<section id="many-to-one">
<h3><a class="toc-backref" href="#id108" role="doc-backlink">Muchos a Uno</a><a class="headerlink" href="#many-to-one" title="Permalink to this heading">¶</a></h3>
<p>Cuando se rutea desde:</p>
<ul class="simple">
<li><p>Desde  vértices iniciales <strong>many</strong></p></li>
<li><p>al  vértice final <strong>one</strong></p></li>
</ul>
</section>
<section id="many-to-many">
<h3><a class="toc-backref" href="#id109" role="doc-backlink">Muchos a Muchos</a><a class="headerlink" href="#many-to-many" title="Permalink to this heading">¶</a></h3>
<p>Cuando se rutea desde:</p>
<ul class="simple">
<li><p>Desde  vértices iniciales <strong>many</strong></p></li>
<li><p>a los vértices finales <strong>many</strong></p></li>
</ul>
</section>
<section id="combinations">
<h3><a class="toc-backref" href="#id110" role="doc-backlink">Combinaciones</a><a class="headerlink" href="#combinations" title="Permalink to this heading">¶</a></h3>
<p>Cuando se rutea desde:</p>
<ul class="simple">
<li><p>A partir de <strong>muchos</strong> diferentes vértices de inicio</p></li>
<li><p>a <strong>muchos</strong> diferentes vértices finales</p></li>
<li><p>Cada tupla especifica un par de vértices iniciales y un vértice final</p></li>
<li><p>Los usuarios pueden definir las combinaciones como deseen.</p></li>
</ul>
</section>
</section>
<section id="inner-queries">
<h2><a class="toc-backref" href="#id111" role="doc-backlink">Consultas Internas</a><a class="headerlink" href="#inner-queries" title="Permalink to this heading">¶</a></h2>
<nav class="contents local" id="id2">
<ul class="simple">
<li><p><a class="reference internal" href="#edges-sql" id="id141">SQL de aristas</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id142">General</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id143">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id144">General with (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id145">Flow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id146">Combinations SQL</a></p></li>
<li><p><a class="reference internal" href="#restrictions-sql" id="id147">Restrictions SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id148">Points SQL</a></p></li>
</ul>
</nav>
<p>There are several kinds of valid inner queries and also the columns returned are
depending of the function.
Which kind of inner query will depend on the function(s) requirements.
To simplify variety of types, <strong>ANY-INTEGER</strong> and <strong>ANY-NUMERICAL</strong> is used.</p>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p>SMALLINT, INTEGER, BIGINT</p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p>SMALLINT, INTEGER, BIGINT, REAL, FLOAT</p>
</dd>
</dl>
<section id="edges-sql">
<h3><a class="toc-backref" href="#id141" role="doc-backlink">SQL de aristas</a><a class="headerlink" href="#edges-sql" title="Permalink to this heading">¶</a></h3>
<section id="general">
<h4><a class="toc-backref" href="#id142" role="doc-backlink">General</a><a class="headerlink" href="#general" title="Permalink to this heading">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="dijkstra-family.html"><span class="doc">Dijkstra - Familia de funciones</span></a></p></li>
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Familia de funciones</span></a></p></li>
<li><p><a class="reference internal" href="bdDijkstra-family.html"><span class="doc">Bidirectional Dijkstra - Familia de funciones</span></a></p></li>
<li><p><a class="reference internal" href="components-family.html"><span class="doc">Componentes - Familia de funciones</span></a></p></li>
<li><p><a class="reference internal" href="kruskal-family.html"><span class="doc">Kruskal - Familia de funciones</span></a></p></li>
<li><p><a class="reference internal" href="prim-family.html"><span class="doc">Prim - Familia de funciones</span></a></p></li>
<li><p>Some uncategorized functions</p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del primer vértice extremo de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del segundo vértice extremo de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="general-without-id">
<h4><a class="toc-backref" href="#id143" role="doc-backlink">General without <code class="docutils literal notranslate"><span class="pre">id</span></code></a><a class="headerlink" href="#general-without-id" title="Permalink to this heading">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="allpairs-family.html"><span class="doc">Todos los Pares - Familia de Funciones</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del primer vértice extremo de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del segundo vértice extremo de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="general-with-x-y">
<h4><a class="toc-backref" href="#id144" role="doc-backlink">General with (X,Y)</a><a class="headerlink" href="#general-with-x-y" title="Permalink to this heading">¶</a></h4>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="aStar-family.html"><span class="doc">A* - Family of functions</span></a></p></li>
<li><p><a class="reference internal" href="bdAstar-family.html"><span class="doc">A* Bidireccional - Familia de Funciones</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 16%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parámetro</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del primer vértice extremo de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del segundo vértice extremo de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>),</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x1</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>X coordinate of <code class="docutils literal notranslate"><span class="pre">source</span></code> vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y1</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Y coordinate of <code class="docutils literal notranslate"><span class="pre">source</span></code> vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x2</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>X coordinate of <code class="docutils literal notranslate"><span class="pre">target</span></code> vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y2</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Y coordinate of <code class="docutils literal notranslate"><span class="pre">target</span></code> vertex.</p></td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="flow">
<h4><a class="toc-backref" href="#id145" role="doc-backlink">Flow</a><a class="headerlink" href="#flow" title="Permalink to this heading">¶</a></h4>
<p class="rubric">Edges SQL for <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familia de funciones.</span></a></p>
<p class="rubric">Edges SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_pushRelabel.html"><span class="doc">pgr_pushRelabel</span></a></p></li>
<li><p><a class="reference internal" href="pgr_edmondsKarp.html"><span class="doc">pgr_edmondsKarp</span></a></p></li>
<li><p><a class="reference internal" href="pgr_boykovKolmogorov.html"><span class="doc">pgr_boykovKolmogorov</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del primer vértice extremo de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del segundo vértice extremo de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>-1</p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
<p class="rubric">Edges SQL for the following functions of <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familia de funciones.</span></a></p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_maxFlowMinCost.html"><span class="doc">pgr_maxFlowMinCost - Experimental</span></a></p></li>
<li><p><a class="reference internal" href="pgr_maxFlowMinCost_Cost.html"><span class="doc">pgr_maxFlowMinCost_Cost - Experimental</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del primer vértice extremo de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador del segundo vértice extremo de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Capacity of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>-1</p></td>
<td><p>Capacity of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>When negative: edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) does not exist, therefore
it’s not part of the graph.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Weight of the edge  (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>) if it exist</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(-1\)</span></p></td>
<td><p>Weight of the edge (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) if it exist</p></td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="combinations-sql">
<h3><a class="toc-backref" href="#id146" role="doc-backlink">Combinations SQL</a><a class="headerlink" href="#combinations-sql" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Used on combination signatures</p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parámetro</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the departure vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the arrival vertex.</p></td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
</dl>
</section>
<section id="restrictions-sql">
<h3><a class="toc-backref" href="#id147" role="doc-backlink">Restrictions SQL</a><a class="headerlink" href="#restrictions-sql" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 10%" />
<col style="width: 25%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td><p>Sequence of edge identifiers that form a path that is not allowed to be
taken.
- Empty arrays or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> arrays are ignored.
- Arrays that have a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> element will raise an exception.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>Cost of taking the forbidden path.</p></td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="points-sql">
<h3><a class="toc-backref" href="#id148" role="doc-backlink">Points SQL</a><a class="headerlink" href="#points-sql" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Points SQL for</p>
<ul class="simple">
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Familia de funciones</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 16%" />
<col style="width: 18%" />
<col style="width: 9%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parámetro</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pid</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p><strong>value</strong></p></td>
<td><p>Identifier of the point.</p>
<ul class="simple">
<li><p>Use with positive value, as internally will be converted to negative
value</p></li>
<li><p>If column is present, it can not be NULL.</p></li>
<li><p>If column is not present, a sequential negative <strong>value</strong> will be given
automatically.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge_id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identificador de la arista «más cercano» al punto.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fraction</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>El valor en &lt;0,1&gt; que indica la posición relativa desde el primer punto final de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">side</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHAR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>Value in [<code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">l</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code>] indicating if the point is:</p>
<ul class="simple">
<li><p>In the right <code class="docutils literal notranslate"><span class="pre">r</span></code>,</p></li>
<li><p>In the left <code class="docutils literal notranslate"><span class="pre">l</span></code>,</p></li>
<li><p>In both sides <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id120" role="doc-backlink">Parámetros</a><a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h2>
<p>The main parameter of the majority of the pgRouting functions is a query that
selects the edges of the graph.</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Parámetro</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Edges SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#edges-sql">Edges SQL</a> as described below.</p></td>
</tr>
</tbody>
</table>
<p>Depending on the family or category of a function it will have additional
parameters, some of them are compulsory and some are optional.</p>
<p>The compulsory parameters are nameless and must be given in the required order.
The optional parameters are named parameters and will have a default value.</p>
<section id="parameters-for-the-via-functions">
<h3><a class="toc-backref" href="#id121" role="doc-backlink">Parameters for the Via functions</a><a class="headerlink" href="#parameters-for-the-via-functions" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstraVia.html"><span class="doc">pgr_dijkstraVia - Proposed</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17%" />
<col style="width: 25%" />
<col style="width: 9%" />
<col style="width: 49%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parámetro</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Edges SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td></td>
<td><p>SQL query as described.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>via vertices</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td></td>
<td><p>Arreglo ordenados de identificadores de vértices que serán visitados.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directed</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>Cuando <code class="docutils literal notranslate"><span class="pre">true</span></code> el gráfo se considera <cite>Dirigido</cite></p></li>
<li><p>Cuando <code class="docutils literal notranslate"><span class="pre">false</span></code> el gráfico se considera como No Dirigido</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">strict</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code> if a path is missing stops and returns <strong>EMPTY SET</strong></p></li>
<li><p>En caso de <code class="docutils literal notranslate"><span class="pre">false</span></code>, ignora las rutas faltantes y devuelve todas las rutas encontradas</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">U_turn_on_edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code> departing from a visited vertex will not try to avoid
using the edge used to reach it.  In other words, U turn using the edge
with same identifier is allowed.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">false</span></code> when a departing from a visited vertex tries to avoid
using the edge used to reach it.  In other words, U turn using the edge
with same identifier is used when no other path is found.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="for-the-trsp-functions">
<h3><a class="toc-backref" href="#id122" role="doc-backlink">For the TRSP functions</a><a class="headerlink" href="#for-the-trsp-functions" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_trsp.html"><span class="doc">pgr_trsp - Proposed</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 20%" />
<col style="width: 27%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Edges SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p>SQL query as described.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#restrictions-sql">Restrictions SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p>SQL query as described.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#combinations-sql">Combinations SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#combinations-sql">Combinations SQL</a> as described below</p></td>
</tr>
<tr class="row-odd"><td><p><strong>start vid</strong></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the departure vertex.</p></td>
</tr>
<tr class="row-even"><td><p><strong>start vids</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td><p>Array of identifiers of destination vertices.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>end vid</strong></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifier of the departure vertex.</p></td>
</tr>
<tr class="row-even"><td><p><strong>end vids</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[</span></code> <strong>ANY-INTEGER</strong> <code class="docutils literal notranslate"><span class="pre">]</span></code></p></td>
<td><p>Array of identifiers of destination vertices.</p></td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-INTEGER<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="return-columns">
<h2><a class="toc-backref" href="#id123" role="doc-backlink">Return columns</a><a class="headerlink" href="#return-columns" title="Permalink to this heading">¶</a></h2>
<nav class="contents local" id="id3">
<ul class="simple">
<li><p><a class="reference internal" href="#return-columns-for-a-path" id="id149">Return columns for a path</a></p></li>
<li><p><a class="reference internal" href="#multiple-paths" id="id150">Multiple paths</a></p>
<ul>
<li><p><a class="reference internal" href="#selective-for-multiple-paths" id="id151">Selective for multiple paths.</a></p></li>
<li><p><a class="reference internal" href="#non-selective-for-multiple-paths" id="id152">Non selective for multiple paths</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#return-columns-for-cost-functions" id="id153">Return columns for cost functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-flow-functions" id="id154">Return columns for flow functions</a></p></li>
<li><p><a class="reference internal" href="#return-columns-for-spanning-tree-functions" id="id155">Return columns for spanning tree functions</a></p></li>
</ul>
</nav>
<p>Hay varios tipos de columnas devueltas que dependen de la función.</p>
<section id="return-columns-for-a-path">
<h3><a class="toc-backref" href="#id149" role="doc-backlink">Return columns for a path</a><a class="headerlink" href="#return-columns-for-a-path" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Used on functions that return one path solution</p>
<p>Devuelve el conjunto de <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_vid]</span> <span class="pre">[,</span> <span class="pre">end_vid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Valor secuencial a partir de <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Posición relativa en la ruta. Tiene el valor <strong>1</strong> para el principio de una ruta.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice inicial. Se devuelve cuando hay varias vetrices iniciales en la consulta.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#many-to-one">Muchos a Uno</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Muchos a Muchos</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice final. Se devuelve cuando hay varios vértices finales en la consulta.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-many">Uno a Muchos</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Muchos a Muchos</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del nodo en la ruta de <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> a <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Costo del desplazamiento desde <code class="docutils literal notranslate"><span class="pre">node</span></code> usando `` edge`` hasta el siguiente nodo en la secuencia de ruta.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Used on functions the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Proposed</span></a></p></li>
</ul>
<p>Returns set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_pid]</span> <span class="pre">[,</span> <span class="pre">end_pid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Valor secuencial a partir de <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relative position in the path.</p>
<ul class="simple">
<li><p><strong>1</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_pid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of a starting vertex/point of the path.</p>
<ul class="simple">
<li><p>When positive is the identifier of the starting vertex.</p></li>
<li><p>When negative is the identifier of the starting point.</p></li>
<li><p>Returned on <a class="reference internal" href="#many-to-one">Many to One</a>  and <a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_pid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of an ending vertex/point of the path.</p>
<ul class="simple">
<li><p>When positive is the identifier of the ending vertex.</p></li>
<li><p>When negative is the identifier of the ending point.</p></li>
<li><p>Returned on <a class="reference internal" href="#one-to-many">One to Many</a> and <a class="reference internal" href="#many-to-many">Many to Many</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the node in the path from <code class="docutils literal notranslate"><span class="pre">start_pid</span></code> to <code class="docutils literal notranslate"><span class="pre">end_pid</span></code>.</p>
<ul class="simple">
<li><p>When positive is the identifier of the a vertex.</p></li>
<li><p>When negative is the identifier of the a point.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence.</p>
<ul class="simple">
<li><p><strong>-1</strong> for the last row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Costo del desplazamiento desde <code class="docutils literal notranslate"><span class="pre">node</span></code> usando `` edge`` hasta el siguiente nodo en la secuencia de ruta.</p>
<ul class="simple">
<li><p><strong>0</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
<ul class="simple">
<li><p><strong>0</strong> For the first row of the path.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Used on functions the following:</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstraNear.html"><span class="doc">pgr_dijkstraNear - Proposed</span></a></p></li>
</ul>
<p>Returns <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq,</span> <span class="pre">start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Valor secuencial a partir de <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Posición relativa en la ruta. Tiene el valor <strong>1</strong> para el principio de una ruta.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the starting vertex of the current path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the ending vertex of the current path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del nodo en la ruta de <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> a <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Costo del desplazamiento desde <code class="docutils literal notranslate"><span class="pre">node</span></code> usando `` edge`` hasta el siguiente nodo en la secuencia de ruta.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="multiple-paths">
<h3><a class="toc-backref" href="#id150" role="doc-backlink">Multiple paths</a><a class="headerlink" href="#multiple-paths" title="Permalink to this heading">¶</a></h3>
<section id="selective-for-multiple-paths">
<h4><a class="toc-backref" href="#id151" role="doc-backlink">Selective for multiple paths.</a><a class="headerlink" href="#selective-for-multiple-paths" title="Permalink to this heading">¶</a></h4>
<p>The columns depend on the function call.</p>
<p>Set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_id,</span> <span class="pre">path_seq</span> <span class="pre">[,</span> <span class="pre">start_vid]</span> <span class="pre">[,</span> <span class="pre">end_vid],</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Valor secuencial a partir de <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Path identifier.</p>
<ul class="simple">
<li><p>Has value <strong>1</strong> for the first of a path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to
<code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Posición relativa en la ruta. Tiene el valor <strong>1</strong> para el principio de una ruta.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice inicial. Se devuelve cuando hay varias vetrices iniciales en la consulta.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#many-to-one">Muchos a Uno</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Muchos a Muchos</a></p></li>
<li><p><a class="reference internal" href="#combinations">Combinaciones</a></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice final. Se devuelve cuando hay varios vértices finales en la consulta.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-many">Uno a Muchos</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Muchos a Muchos</a></p></li>
<li><p><a class="reference internal" href="#combinations">Combinaciones</a></p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del nodo en la ruta de <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> a <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Costo del desplazamiento desde <code class="docutils literal notranslate"><span class="pre">node</span></code> usando `` edge`` hasta el siguiente nodo en la secuencia de ruta.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="non-selective-for-multiple-paths">
<h4><a class="toc-backref" href="#id152" role="doc-backlink">Non selective for multiple paths</a><a class="headerlink" href="#non-selective-for-multiple-paths" title="Permalink to this heading">¶</a></h4>
<p>Regardless of the call, al the columns are returned.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_trsp.html"><span class="doc">pgr_trsp - Proposed</span></a></p></li>
</ul>
<p>Returns set of <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_id,</span> <span class="pre">path_seq,</span> <span class="pre">start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span>
<span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Valor secuencial a partir de <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Path identifier.</p>
<ul class="simple">
<li><p>Has value <strong>1</strong> for the first of a path from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to
<code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Posición relativa en la ruta. Tiene el valor <strong>1</strong> para el principio de una ruta.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice inicial.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice final.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del nodo en la ruta de <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> a <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge used to go from <code class="docutils literal notranslate"><span class="pre">node</span></code> to the next node in the
path sequence. <strong>-1</strong> for the last node of the path.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Costo del desplazamiento desde <code class="docutils literal notranslate"><span class="pre">node</span></code> usando `` edge`` hasta el siguiente nodo en la secuencia de ruta.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Aggregate cost from <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> to <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="return-columns-for-cost-functions">
<h3><a class="toc-backref" href="#id153" role="doc-backlink">Return columns for cost functions</a><a class="headerlink" href="#return-columns-for-cost-functions" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Used in the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="cost-category.html"><span class="doc">Costo - Categoría</span></a></p></li>
<li><p><a class="reference internal" href="costMatrix-category.html"><span class="doc">Cost Matrix - Categoría</span></a></p></li>
<li><p><a class="reference internal" href="allpairs-family.html"><span class="doc">Todos los Pares - Familia de Funciones</span></a></p></li>
</ul>
<p>Set of <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice inicial.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice final.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Coste agregado de <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> a <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>When start_vid or end_vid columns have negative values, the identifier is for
a Point.</p>
</div>
</section>
<section id="return-columns-for-flow-functions">
<h3><a class="toc-backref" href="#id154" role="doc-backlink">Return columns for flow functions</a><a class="headerlink" href="#return-columns-for-flow-functions" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Edges SQL for the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familia de funciones.</span></a></p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>seq</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Valor secuencial a partir de <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>edge</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge in the original query
(edges_sql).</p></td>
</tr>
<tr class="row-even"><td><p><strong>start_vid</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del primer vértice extremo de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>end_vid</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del segundo vértice extremo de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><strong>flujo</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Flujo a través del arista en la dirección  (<code class="docutils literal notranslate"><span class="pre">start_vid</span></code>, <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>residual_capacity</strong> (<strong>capacidad residual</strong>)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Capacidad residual del arista en la dirección (<code class="docutils literal notranslate"><span class="pre">start_vid</span></code>, <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>).</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Edges SQL for the following functions of <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familia de funciones.</span></a></p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_maxFlowMinCost.html"><span class="doc">pgr_maxFlowMinCost - Experimental</span></a></p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>seq</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Valor secuencial a partir de <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>edge</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifier of the edge in the original query
(edges_sql).</p></td>
</tr>
<tr class="row-even"><td><p><strong>origen</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del primer vértice extremo de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>objetivo</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del segundo vértice extremo de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><strong>flujo</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Flujo a través de la arista en la dirección (origen, destino).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>residual_capacity</strong> (<strong>capacidad residual</strong>)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Capacidad residual de la arista en la dirección (origen, destino).</p></td>
</tr>
<tr class="row-even"><td><p><strong>cost</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>El costo de enviar este flujo a través de la arista en la dirección (origen, destino).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>agg_cost</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>El costo agregado.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="return-columns-for-spanning-tree-functions">
<h3><a class="toc-backref" href="#id155" role="doc-backlink">Return columns for spanning tree functions</a><a class="headerlink" href="#return-columns-for-spanning-tree-functions" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Edges SQL for the following</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_prim.html"><span class="doc">pgr_prim</span></a></p></li>
<li><p><a class="reference internal" href="pgr_kruskal.html"><span class="doc">pgr_kruskal</span></a></p></li>
</ul>
<p>Returns SET OF <code class="docutils literal notranslate"><span class="pre">(edge,</span> <span class="pre">cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Cost to traverse the edge.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="advanced-topics">
<h2><a class="toc-backref" href="#id131" role="doc-backlink">Tópicos avanzados</a><a class="headerlink" href="#advanced-topics" title="Permalink to this heading">¶</a></h2>
<nav class="contents local" id="id4">
<ul class="simple">
<li><p><a class="reference internal" href="#routing-topology" id="id156">Topología para Ruteo</a></p></li>
<li><p><a class="reference internal" href="#graph-analytics" id="id157">Análisis de gráficas</a></p></li>
<li><p><a class="reference internal" href="#analyze-a-graph" id="id158">Analizar un gráfico</a></p></li>
<li><p><a class="reference internal" href="#analyze-one-way-streets" id="id159">Analizar las calles unidireccionales</a></p>
<ul>
<li><p><a class="reference internal" href="#example" id="id160">Ejemplo</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="routing-topology">
<span id="topology"></span><h3><a class="toc-backref" href="#id156" role="doc-backlink">Topología para Ruteo</a><a class="headerlink" href="#routing-topology" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Resumen</p>
<p>Normalmente cuando se cargan archivos GIS en la base de datos para su uso con pgRouting no tienen información de la topología asociada a ellos. Para crear una topología útil, los datos debe ser «noded». Esto significa que donde dos o más caminos forman una intersección allí debe existir y todos los segmentos de carretera necesitan estar partidos en la intersección, eso suponiendo que puede navegar a cualquier otro segmento mediante la intersección de cualquiera de estos segmentos.</p>
<p>Puedes utilizar <a class="reference internal" href="#analytics"><span class="std std-ref">graph analysis functions</span></a> para ayudarte a visualizar dónde podría haber problemas de topología en tus datos. Si necesitas crear nodos a partir de tus datos, también tenemos una función <a class="reference internal" href="pgr_nodeNetwork.html"><span class="doc">pgr_nodeNetwork ()</span></a> que deberían funcionarte. Esta función divide TODOS los segmentos cruzados y los une. Hay algunos casos en los que esto podría NO ser lo correcto.</p>
<p>Por ejemplo, cuando se tiene un cruce de puente o de un túnel, no quieres estos contengan un nodo, pero pgr_nodeNetwork no sabe que ese es el caso y va a crear un nodo,  entonces el enrutador interpretará el puente o  el paso a desnivel como si fuera una intersección plana en 2D. Para lidiar con este problema, se debe utilizar niveles z ya se para estos tipos de intersecciones o para otros casos en donde crear el nodo de la intersección no sea lo correcto.</p>
<p>Para los casos donde la topología debe construirse,  las siguientes funciones pueden ser de utilidad. Una forma de preparar los datos para pgRouting es agregar los siguientes campos a la tabla y luego poblarlas según corresponda. Este ejemplo tiene como supuestos: que la tabla original ya tiene columnas como  <code class="docutils literal notranslate"><span class="pre">one_way</span></code>, <code class="docutils literal notranslate"><span class="pre">fcc</span></code> y posiblemente otras y que contienen valores de datos específicos. Esto es sólo para darle una idea de lo que se puede hacer con los datos.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edge_table</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">source</span> <span class="n">integer</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">target</span> <span class="n">integer</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">cost_len</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">cost_time</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">rcost_len</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">rcost_time</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">x1</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">y1</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">x2</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">y2</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">to_cost</span> <span class="n">double</span> <span class="n">precision</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">rule</span> <span class="n">text</span><span class="p">,</span>
    <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">isolated</span> <span class="n">integer</span><span class="p">;</span>

<span class="n">SELECT</span> <span class="n">pgr_createTopology</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span> <span class="mf">0.000001</span><span class="p">,</span> <span class="s1">&#39;the_geom&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>La función <a class="reference internal" href="pgr_createTopology.html"><span class="doc">pgr_createTopology</span></a> crea la tabla <code class="docutils literal notranslate"><span class="pre">vertices_tmp</span></code> y llena las columnas de <code class="docutils literal notranslate"><span class="pre">source</span></code> y <code class="docutils literal notranslate"><span class="pre">target</span></code>. El siguiente ejemplo llenó las columnas restantes. Aquí, la columna <code class="docutils literal notranslate"><span class="pre">fcc</span></code> contiene código de clase de entidad y las declaraciones <code class="docutils literal notranslate"><span class="pre">CASE</span></code> lo convierten a una velocidad promedio.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edge_table</span> <span class="n">SET</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">st_x</span><span class="p">(</span><span class="n">st_startpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span>
                      <span class="n">y1</span> <span class="o">=</span> <span class="n">st_y</span><span class="p">(</span><span class="n">st_startpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span>
                      <span class="n">x2</span> <span class="o">=</span> <span class="n">st_x</span><span class="p">(</span><span class="n">st_endpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span>
                      <span class="n">y2</span> <span class="o">=</span> <span class="n">st_y</span><span class="p">(</span><span class="n">st_endpoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)),</span>
  <span class="n">cost_len</span>  <span class="o">=</span> <span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">),</span>
  <span class="n">rcost_len</span> <span class="o">=</span> <span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">),</span>
  <span class="n">len_km</span> <span class="o">=</span> <span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">)</span><span class="o">/</span><span class="mf">1000.0</span><span class="p">,</span>
  <span class="n">len_miles</span> <span class="o">=</span> <span class="n">st_length_spheroid</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span> <span class="s1">&#39;SPHEROID[&quot;WGS84&quot;,6378137,298.25728]&#39;</span><span class="p">)</span>
              <span class="o">/</span> <span class="mf">1000.0</span> <span class="o">*</span> <span class="mf">0.6213712</span><span class="p">,</span>
  <span class="n">speed_mph</span> <span class="o">=</span> <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A10&#39;</span> <span class="n">THEN</span> <span class="mi">65</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A15&#39;</span> <span class="n">THEN</span> <span class="mi">65</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A20&#39;</span> <span class="n">THEN</span> <span class="mi">55</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A25&#39;</span> <span class="n">THEN</span> <span class="mi">55</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A30&#39;</span> <span class="n">THEN</span> <span class="mi">45</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A35&#39;</span> <span class="n">THEN</span> <span class="mi">45</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A40&#39;</span> <span class="n">THEN</span> <span class="mi">35</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A45&#39;</span> <span class="n">THEN</span> <span class="mi">35</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A50&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A60&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A61&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A62&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A64&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A70&#39;</span> <span class="n">THEN</span> <span class="mi">15</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A69&#39;</span> <span class="n">THEN</span> <span class="mi">10</span>
                   <span class="n">ELSE</span> <span class="n">null</span> <span class="n">END</span><span class="p">,</span>
  <span class="n">speed_kmh</span> <span class="o">=</span> <span class="n">CASE</span> <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A10&#39;</span> <span class="n">THEN</span> <span class="mi">104</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A15&#39;</span> <span class="n">THEN</span> <span class="mi">104</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A20&#39;</span> <span class="n">THEN</span> <span class="mi">88</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A25&#39;</span> <span class="n">THEN</span> <span class="mi">88</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A30&#39;</span> <span class="n">THEN</span> <span class="mi">72</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A35&#39;</span> <span class="n">THEN</span> <span class="mi">72</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A40&#39;</span> <span class="n">THEN</span> <span class="mi">56</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A45&#39;</span> <span class="n">THEN</span> <span class="mi">56</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A50&#39;</span> <span class="n">THEN</span> <span class="mi">40</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A60&#39;</span> <span class="n">THEN</span> <span class="mi">50</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A61&#39;</span> <span class="n">THEN</span> <span class="mi">40</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A62&#39;</span> <span class="n">THEN</span> <span class="mi">40</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A64&#39;</span> <span class="n">THEN</span> <span class="mi">40</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A70&#39;</span> <span class="n">THEN</span> <span class="mi">25</span>
                   <span class="n">WHEN</span> <span class="n">fcc</span><span class="o">=</span><span class="s1">&#39;A69&#39;</span> <span class="n">THEN</span> <span class="mi">15</span>
                   <span class="n">ELSE</span> <span class="n">null</span> <span class="n">END</span><span class="p">;</span>

<span class="o">--</span> <span class="n">UPDATE</span> <span class="n">the</span> <span class="n">cost</span> <span class="n">information</span> <span class="n">based</span> <span class="n">on</span> <span class="n">oneway</span> <span class="n">streets</span>

<span class="n">UPDATE</span> <span class="n">edge_table</span> <span class="n">SET</span>
    <span class="n">cost_time</span> <span class="o">=</span> <span class="n">CASE</span>
        <span class="n">WHEN</span> <span class="n">one_way</span><span class="o">=</span><span class="s1">&#39;TF&#39;</span> <span class="n">THEN</span> <span class="mf">10000.0</span>
        <span class="n">ELSE</span> <span class="n">cost_len</span><span class="o">/</span><span class="mf">1000.0</span><span class="o">/</span><span class="n">speed_kmh</span><span class="p">::</span><span class="n">numeric</span><span class="o">*</span><span class="mf">3600.0</span>
        <span class="n">END</span><span class="p">,</span>
    <span class="n">rcost_time</span> <span class="o">=</span> <span class="n">CASE</span>
        <span class="n">WHEN</span> <span class="n">one_way</span><span class="o">=</span><span class="s1">&#39;FT&#39;</span> <span class="n">THEN</span> <span class="mf">10000.0</span>
        <span class="n">ELSE</span> <span class="n">cost_len</span><span class="o">/</span><span class="mf">1000.0</span><span class="o">/</span><span class="n">speed_kmh</span><span class="p">::</span><span class="n">numeric</span><span class="o">*</span><span class="mf">3600.0</span>
        <span class="n">END</span><span class="p">;</span>

<span class="o">--</span> <span class="n">clean</span> <span class="n">up</span> <span class="n">the</span> <span class="n">database</span> <span class="n">because</span> <span class="n">we</span> <span class="n">have</span> <span class="n">updated</span> <span class="n">a</span> <span class="n">lot</span> <span class="n">of</span> <span class="n">records</span>

<span class="n">VACUUM</span> <span class="n">ANALYZE</span> <span class="n">VERBOSE</span> <span class="n">edge_table</span><span class="p">;</span>
</pre></div>
</div>
<p>Ahora su base de datos debe estar lista para usarse en cualquiera (mayoría?) de los algoritmos de pgRouting.</p>
</section>
<section id="graph-analytics">
<span id="analytics"></span><h3><a class="toc-backref" href="#id157" role="doc-backlink">Análisis de gráficas</a><a class="headerlink" href="#graph-analytics" title="Permalink to this heading">¶</a></h3>
<p class="rubric">Resumen</p>
<p>Es común encontrar problemas con los gráficos que no se han construido completamente ligados con nodos o con gráficos con niveles z en intersecciónes que se han introducido incorrectamente. Otro problema es que las calles han sido introducidas en la dirección equivocada. No podemos detectar errores con respecto a la verdad respecto a la «tierra», pero podemos buscar inconsistencias y algunas anomalías en un gráfico y les reportarlas para inspecciones adicionales.</p>
<p>Nosotros no tenemos herramientas de visualización para estos problemas, pero se ha utilizado MapServer para reproducir la gráfica y poner en relieve las áreas con problemas potenciales. Alguien familiarizado con graphviz podría contribuir con herramientas para generar imágenes para este propósito.</p>
</section>
<section id="analyze-a-graph">
<h3><a class="toc-backref" href="#id158" role="doc-backlink">Analizar un gráfico</a><a class="headerlink" href="#analyze-a-graph" title="Permalink to this heading">¶</a></h3>
<p>Con <a class="reference internal" href="pgr_analyzeGraph.html"><span class="doc">pgr_analyzeGraph</span></a> el grafo puede revisarse en busca de errores. Por ejemplo, para la tabla «mytab» que incluye a «mytab_vertices_pgr» como la tabla de vértices:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">pgr_analyzeGraph</span><span class="p">(</span><span class="s1">&#39;mytab&#39;</span><span class="p">,</span> <span class="mf">0.000002</span><span class="p">);</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Performing</span> <span class="n">checks</span><span class="p">,</span> <span class="n">pelase</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">dead</span> <span class="n">ends</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">gaps</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">isolated</span> <span class="n">edges</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">ring</span> <span class="n">geometries</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="k">for</span> <span class="n">intersections</span><span class="o">.</span> <span class="n">Please</span> <span class="n">wait</span><span class="o">...</span>
<span class="n">NOTICE</span><span class="p">:</span>              <span class="n">ANALYSIS</span> <span class="n">RESULTS</span> <span class="n">FOR</span> <span class="n">SELECTED</span> <span class="n">EDGES</span><span class="p">:</span>
<span class="n">NOTICE</span><span class="p">:</span>                    <span class="n">Isolated</span> <span class="n">segments</span><span class="p">:</span> <span class="mi">158</span>
<span class="n">NOTICE</span><span class="p">:</span>                            <span class="n">Dead</span> <span class="n">ends</span><span class="p">:</span> <span class="mi">20028</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Potential</span> <span class="n">gaps</span> <span class="n">found</span> <span class="n">near</span> <span class="n">dead</span> <span class="n">ends</span><span class="p">:</span> <span class="mi">527</span>
<span class="n">NOTICE</span><span class="p">:</span>               <span class="n">Intersections</span> <span class="n">detected</span><span class="p">:</span> <span class="mi">2560</span>
<span class="n">NOTICE</span><span class="p">:</span>                      <span class="n">Ring</span> <span class="n">geometries</span><span class="p">:</span> <span class="mi">0</span>
<span class="n">pgr_analyzeGraph</span>
<span class="o">----------</span>
   <span class="n">OK</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>En la tabla de vértices «mytab_vertices_pgr»:</p>
<ul class="simple">
<li><p>Los callejones están identificados por <code class="docutils literal notranslate"><span class="pre">cnt=1</span></code></p></li>
<li><p>Se identifican problemas potenciales brecha con``chk=1``.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="n">deadends</span>  <span class="n">FROM</span> <span class="n">mytab_vertices_pgr</span> <span class="n">WHERE</span> <span class="n">cnt</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">deadends</span>
<span class="o">----------</span>
    <span class="mi">20028</span>
 <span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

<span class="n">SELECT</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="n">gaps</span>  <span class="n">FROM</span> <span class="n">mytab_vertices_pgr</span> <span class="n">WHERE</span> <span class="n">chk</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 <span class="n">gaps</span>
 <span class="o">-----</span>
   <span class="mi">527</span>
 <span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>Si se tienen segmentos aislados de caminos, por ejemplo, un segmento en el cual los dos extremos son callejones sin salida, se pueden encontrar con la siguiente consulta:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
    <span class="n">FROM</span> <span class="n">mytab</span> <span class="n">a</span><span class="p">,</span> <span class="n">mytab_vertices_pgr</span> <span class="n">b</span><span class="p">,</span> <span class="n">mytab_vertices_pgr</span> <span class="n">c</span>
    <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">source</span><span class="o">=</span><span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">b</span><span class="o">.</span><span class="n">cnt</span><span class="o">=</span><span class="mi">1</span> <span class="n">AND</span> <span class="n">a</span><span class="o">.</span><span class="n">target</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">c</span><span class="o">.</span><span class="n">cnt</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</pre></div>
</div>
<p>Si quieren visualizar en una imagen gráfica, entonces usted puede utilizar algo como MapServer para representar los bordes y los vértices y el estilizar en base a <code class="docutils literal notranslate"><span class="pre">cnt</span></code> o si están aislados, etc. También se puede hacer esto con una herramienta como graphviz o geoserver u otras herramientas similares.</p>
</section>
<section id="analyze-one-way-streets">
<h3><a class="toc-backref" href="#id159" role="doc-backlink">Analizar las calles unidireccionales</a><a class="headerlink" href="#analyze-one-way-streets" title="Permalink to this heading">¶</a></h3>
<p><a class="reference internal" href="pgr_analyzeOneWay.html"><span class="doc">pgr_analyzeOneWay</span></a> analiza las calles unidireccionales de un grafo e identifica los segmentos volteados. Básicamente, si cuenta las aristas que entran en un nodo y las aristas bordes que salen de un nodo, el número tiene que ser mayor que uno.</p>
<p>Esta consulta agrega dos columnas a la tabla vertices_tmp <code class="docutils literal notranslate"><span class="pre">ein</span> <span class="pre">int</span></code>  y <code class="docutils literal notranslate"><span class="pre">eout</span> <span class="pre">int</span></code> (ein = borde de entrada, eout=borde de salida) y las rellena con los conteos  correspondientes. Después de su ejecución, en un grafo se pueden identificar los nodos con  problemas potenciales utilizando la siguiente consulta.</p>
<p>Las reglas se definen como un conjunto de cadenas de texto que si coinciden con el valor de <code class="docutils literal notranslate"><span class="pre">col</span></code> se considera como válido para el origen o destino dentro o fuera de la condición.</p>
<section id="example">
<h4><a class="toc-backref" href="#id160" role="doc-backlink">Ejemplo</a><a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h4>
<p>Supongamos que tenemos una tabla «st» de bordes y una columna «one_way» que podría tener valores como:</p>
<ul class="simple">
<li><p>“FT” - dirección unidireccional de la fuente para el nodo de destino.</p></li>
<li><p>“TF” - dirección unidireccional  desde el nodo destino hasta el nodo fuente.</p></li>
<li><p>“B” - calle de doble sentido.</p></li>
<li><p>“”- campo vacío, suponer doble sentido.</p></li>
<li><p>&lt;NULL&gt; - Campo NULL, usar bandera de two_way_if_null, es decir, doble sentido cuando nulo.</p></li>
</ul>
<p>Entonces se puede  formar la siguiente consulta para analizar las calles unidireccionales para errores.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">pgr_analyzeOneway</span><span class="p">(</span><span class="s1">&#39;mytab&#39;</span><span class="p">,</span>
            <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;TF&#39;</span><span class="p">],</span>
            <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;FT&#39;</span><span class="p">],</span>
            <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;FT&#39;</span><span class="p">],</span>
            <span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;TF&#39;</span><span class="p">],</span>
            <span class="p">);</span>

<span class="o">--</span> <span class="n">now</span> <span class="n">we</span> <span class="n">can</span> <span class="n">see</span> <span class="n">the</span> <span class="n">problem</span> <span class="n">nodes</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">mytab_vertices_pgr</span> <span class="n">WHERE</span> <span class="n">ein</span><span class="o">=</span><span class="mi">0</span> <span class="n">OR</span> <span class="n">eout</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>

<span class="o">--</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">problem</span> <span class="n">edges</span> <span class="n">connected</span> <span class="n">to</span> <span class="n">those</span> <span class="n">nodes</span>
<span class="n">SELECT</span> <span class="n">gid</span> <span class="n">FROM</span> <span class="n">mytab</span> <span class="n">a</span><span class="p">,</span> <span class="n">mytab_vertices_pgr</span> <span class="n">b</span> <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">source</span><span class="o">=</span><span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">ein</span><span class="o">=</span><span class="mi">0</span> <span class="n">OR</span> <span class="n">eout</span><span class="o">=</span><span class="mi">0</span>
<span class="n">UNION</span>
<span class="n">SELECT</span> <span class="n">gid</span> <span class="n">FROM</span> <span class="n">mytab</span> <span class="n">a</span><span class="p">,</span> <span class="n">mytab_vertices_pgr</span> <span class="n">b</span> <span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">target</span><span class="o">=</span><span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">ein</span><span class="o">=</span><span class="mi">0</span> <span class="n">OR</span> <span class="n">eout</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<p>Normalmente estos problemas son generados por una rotura en la red, la dirección un camino equivocado, quizás un error relacionado con niveles z o una red que no esté debidamente indicada con nodos.</p>
<p>Las herramientas anteriores no detectan todos los problemas de la red, pero identifican algunos problemas comunes. Hay otros problemas que son difíciles de detectar porque son más globales en su naturaleza como múltiples redes desconectadas. Piense usted en una isla con una red de carreteras que no está conectada a la red del continente porque faltan las rutas del puente o del ferry.</p>
</section>
</section>
</section>
<section id="performance-tips">
<span id="performance"></span><h2><a class="toc-backref" href="#id137" role="doc-backlink">Consejos de Rendimiento</a><a class="headerlink" href="#performance-tips" title="Permalink to this heading">¶</a></h2>
<nav class="contents local" id="id5">
<ul class="simple">
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id161">Para las funciones de Ruteo</a></p></li>
<li><p><a class="reference internal" href="#for-the-topology-functions" id="id162">Para las funciones de topología:</a></p></li>
</ul>
</nav>
<section id="for-the-routing-functions">
<h3><a class="toc-backref" href="#id161" role="doc-backlink">Para las funciones de Ruteo</a><a class="headerlink" href="#for-the-routing-functions" title="Permalink to this heading">¶</a></h3>
<p>Para obtener resultados más rápidos, las consultas enlazan el área de interés para tener, por ejemplo, no más de un millón de filas.</p>
<p>Utilice una consulta SQL interna que no incluya algunas aristas en la función de ruteo</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="kn">from</span> <span class="nn">edge_table</span> <span class="n">WHERE</span>
        <span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">17</span> <span class="ow">and</span>
        <span class="n">the_geom</span>  <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">select</span> <span class="n">st_buffer</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">myarea</span> <span class="n">FROM</span>  <span class="n">edge_table</span> <span class="n">where</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>Integración de la consulta interna a la función pgRouting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span>
        <span class="s1">&#39;SELECT id, source, target from edge_table WHERE</span>
            <span class="nb">id</span> <span class="o">&lt;</span> <span class="mi">17</span> <span class="ow">and</span>
            <span class="n">the_geom</span>  <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">select</span> <span class="n">st_buffer</span><span class="p">(</span><span class="n">the_geom</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">myarea</span> <span class="n">FROM</span>  <span class="n">edge_table</span> <span class="n">where</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span><span class="s1">&#39;,</span>
    <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="for-the-topology-functions">
<h3><a class="toc-backref" href="#id162" role="doc-backlink">Para las funciones de topología:</a><a class="headerlink" href="#for-the-topology-functions" title="Permalink to this heading">¶</a></h3>
<p>Cuando «sabe» que va a eliminar un conjunto de bordes de la tabla de  bordes, y sin esos bordes va a utilizar una función de enrrutamiento puede hacer el siguiente:</p>
<p>Analizar la topología nueva basada en la topología actual:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_analyzegraph</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="o">:=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>O crear una nueva topología si el cambio es permanente:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_createTopology</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="o">:=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span>
<span class="n">pgr_analyzegraph</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="n">rows_where</span><span class="o">:=</span><span class="s1">&#39;id &lt; 17&#39;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="how-to-contribute">
<span id="how-contribute"></span><h2><a class="toc-backref" href="#id140" role="doc-backlink">Cómo contribuir</a><a class="headerlink" href="#how-to-contribute" title="Permalink to this heading">¶</a></h2>
<p class="rubric">Wiki</p>
<ul class="simple">
<li><p>Edit an existing  <a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki">pgRouting Wiki</a> page.</p></li>
<li><p>O crea una nueva página Wiki</p>
<ul>
<li><p>Create a page on the <a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki">pgRouting Wiki</a></p></li>
<li><p>Asigne al título un nombre apropiado</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki/How-to:-Handle-parallel-edges-(KSP)">Example</a></p></li>
</ul>
<p class="rubric">Agregar funcionalidad a pgRouting</p>
<p>Consult the <a class="reference external" href="https://docs.pgrouting.org/doxy/2.4/index.html">developer’s documentation</a></p>
<p class="rubric">Índices y tablas</p>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Índice</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Página de Búsqueda</span></a></p></li>
</ul>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v3.4.0-dev.<br/>
      Actualizado por última vez en jun 20, 2022.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.0.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>